<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å‰ç«¯æ¨¡å—åŒ–</title>
      <link href="/post/2b2f44ba.html"/>
      <url>/post/2b2f44ba.html</url>
      
        <content type="html"><![CDATA[<p>è‡ªä» JavaScript è¯ç”Ÿä»¥æ¥ï¼Œäººä»¬ä¸€ç›´å°†å®ƒä½œä¸ºä¸€ç§ç½‘é¡µè„šæœ¬è¯­è¨€ï¼Œä¸€èˆ¬åªç”¨ä½œè¡¨å•æ ¡éªŒè·Ÿé¡µé¢ç‰¹æ•ˆï¼Œç”±äºè¢«ä»“ä¿ƒçš„åˆ›é€ å‡ºæ¥ï¼Œæ‰€ä»¥å®ƒè‡ªèº«çš„å„ç§é™·é˜±å’Œç¼ºç‚¹ä¹Ÿè¢«ç¼–ç¨‹äººå‘˜æ‰€è¯Ÿç—…ã€‚éšç€ Web2.0 çš„æµè¡Œï¼Œå„ç§å‰ç«¯åº“å’Œæ¡†æ¶è¢«å¼€å‘å‡ºæ¥ï¼Œéšåéšç€æ›´å¤šçš„ç”¨æˆ·éœ€æ±‚åœ¨å‰ç«¯è¢«å®ç°ï¼ŒJavaScript ä¹Ÿä»è¡¨å•æ ¡éªŒè·ƒè¿åˆ°åº”ç”¨å¼€å‘çš„çº§åˆ«ä¸Šã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®ƒå¤§è‡´ç»å†äº†å·¥å…·ç±»åº“ã€ç»„ä»¶åº“ã€å‰ç«¯æ¡†æ¶ã€å‰ç«¯åº”ç”¨çš„å˜è¿ã€‚</p><span id="more"></span><p>éšç€ä¸šåŠ¡å‘å±•ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„ç»„ç»‡ä¸šåŠ¡é€»è¾‘ï¼ŒJavaScript æœ‰äº†<strong>æ¨¡å—åŒ–</strong>çš„éœ€æ±‚ã€‚</p><p>ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬åœ¨ JavaScript ä¸­é€šè¿‡ <strong>script</strong> æ ‡ç­¾å¼•å…¥ä»£ç çš„æ–¹å¼æ¥å®ç°æ¨¡å—åŒ–ï¼Œä½†è¿™æ ·å¾€å¾€ç¼ºä¹ç»„ç»‡èƒ½åŠ›è·Ÿçº¦æŸèƒ½åŠ›ï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€éœ€è¦äººä¸ºçš„å¯¹ä»£ç è¿›è¡Œçº¦æŸï¼Œé¿å…å˜é‡ã€å‡½æ•°å†²çªç­‰é—®é¢˜ã€‚</p><br/><h2 id="æ¨¡å—åŒ–çš„ç†è§£"><a href="#æ¨¡å—åŒ–çš„ç†è§£" class="headerlink" title="æ¨¡å—åŒ–çš„ç†è§£"></a>æ¨¡å—åŒ–çš„ç†è§£</h2><hr/><h3 id="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"><a href="#ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"></a>ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–</h3><ul><li>å°†ä»£ç æŒ‰ç…§åŠŸèƒ½è¿›è¡Œå°è£…ï¼Œéµå¾ªå•ä¸€èŒè´£ã€‚</li><li>æ¨¡å—å†…éƒ¨æ•°æ®ç§æœ‰, é€šè¿‡å‘å¤–æš´éœ²çš„å˜é‡ã€æ–¹æ³•ä¸å¤–éƒ¨é€šä¿¡ã€‚</li></ul><h3 id="æ¨¡å—åŒ–çš„å¥½å¤„"><a href="#æ¨¡å—åŒ–çš„å¥½å¤„" class="headerlink" title="æ¨¡å—åŒ–çš„å¥½å¤„"></a>æ¨¡å—åŒ–çš„å¥½å¤„</h3><ul><li>é¿å…å‘½åå†²çª(å‡å°‘å‘½åç©ºé—´æ±¡æŸ“)</li><li>æ›´å¥½çš„åˆ†ç¦», æŒ‰éœ€åŠ è½½</li><li>æ›´é«˜å¤ç”¨æ€§</li><li>é«˜å¯ç»´æŠ¤æ€§</li></ul><h3 id="æ¨¡å—åŒ–æ–¹æ¡ˆ"><a href="#æ¨¡å—åŒ–æ–¹æ¡ˆ" class="headerlink" title="æ¨¡å—åŒ–æ–¹æ¡ˆ"></a>æ¨¡å—åŒ–æ–¹æ¡ˆ</h3><ul><li>å…¨å±€ function æ¨¡å¼ï¼Œæ ¹æ®åŠŸèƒ½å°†æ¨¡å—å°è£…æˆä¸åŒçš„å…¨å±€å‡½æ•°ã€‚<!-- -   å¼Šç«¯ï¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼Œå®¹æ˜“é€ æˆå‘½åå†²çªï¼Œæ¨¡å—ä¹‹é—´çš„å…³ç³»æ¨¡ç³Š --></li><li>nameSpace æ¨¡å¼ï¼Œå¯¹å¯¹è±¡è¿›è¡Œå°è£…ã€‚å‡å°‘å…¨å±€å˜é‡ï¼Œè§£å†³å‘½åå†²çªã€‚<!-- -   å¼Šç«¯ï¼šæ•°æ®ä¸å®‰å…¨ï¼Œå¤–éƒ¨å¯ä»¥ç›´æ¥å¯¹æ¨¡å—å†…çš„æ•°æ®è¿›è¡Œä¿®æ”¹ --></li><li>IIFE ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œæ•°æ®æ˜¯ç§æœ‰çš„, å¤–éƒ¨åªèƒ½é€šè¿‡æš´éœ²çš„æ–¹æ³•æ“ä½œã€‚<!-- -   å¼Šç«¯ï¼šæ— æ³•å¤„ç†æ¨¡å—ç›¸äº’ä¾èµ–çš„åœºæ™¯ --></li></ul><br/><h2 id="æ¨¡å—åŒ–è§„èŒƒ"><a href="#æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="æ¨¡å—åŒ–è§„èŒƒ"></a>æ¨¡å—åŒ–è§„èŒƒ</h2><hr/><h3 id="CommonJs"><a href="#CommonJs" class="headerlink" title="CommonJs"></a>CommonJs</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>CommonJs è§„èŒƒä¸»è¦ç”¨äº Node.jsï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œæ¯ä¸ªæ–‡ä»¶ä¸­çš„å˜é‡ã€å‡½æ•°ã€ç±»éƒ½æ˜¯ç§æœ‰çš„ã€‚</p><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>å¯¼å‡ºçš„æ˜¯å€¼çš„æ‹·è´</li><li>ç‹¬ç«‹ä½œç”¨åŸŸï¼Œä¸æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li><li>é¡ºåºåŠ è½½</li><li>æ¨¡å—å¯ä»¥å¤šæ¬¡åŠ è½½ï¼Œä½†æ˜¯åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œç„¶åè¿è¡Œç»“æœå°±è¢«ç¼“å­˜äº†</li></ul><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><ul><li><p>å¯¼å‡ºï¼šä½¿ç”¨ <font color=#2F74DC>module.export</font> å¯¼å‡ºï¼Œä¹Ÿå¯ä»¥ç®€å†™ä¸º <font color=#2F74DC>exports</font>ã€‚CommonJS è§„èŒƒè§„å®šï¼Œæ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œmodule å˜é‡ä»£è¡¨å½“å‰æ¨¡å—ã€‚è¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„ exports å±æ€§ï¼ˆå³ module.exportsï¼‰æ˜¯å¯¹å¤–çš„æ¥å£ã€‚åŠ è½½æŸä¸ªæ¨¡å—ï¼Œå…¶å®æ˜¯åŠ è½½è¯¥æ¨¡å—çš„ <strong>module.exports</strong>å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module.export å¯¼å‡º</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">export</span> = &#123;</span><br><span class="line">    <span class="attr">add</span>: add,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// exports å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span>.<span class="property">add</span> = <span class="keyword">function</span>(<span class="params">a, b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¯¼å…¥ï¼šä½¿ç”¨ <font color=#2F74DC>require</font> åŒæ­¥åŠ è½½æ¨¡å—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥</span></span><br><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">&quot;./math&quot;</span>);</span><br><span class="line">math.<span class="title function_">add</span>(<span class="number">2</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure></li><li><p>æ¨¡å—é‡å‘½å</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æ–°çš„æ±‚å’Œæ–¹æ³• newAdd</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">add</span>: newAdd &#125; = <span class="built_in">require</span>(<span class="string">&quot;./math&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul><h4 id="åŠ è½½æœºåˆ¶"><a href="#åŠ è½½æœºåˆ¶" class="headerlink" title="åŠ è½½æœºåˆ¶"></a>åŠ è½½æœºåˆ¶</h4><p>CommonJS æ¨¡å—çš„åŠ è½½æœºåˆ¶æ˜¯ï¼Œè¾“å…¥çš„æ˜¯è¢«è¾“å‡ºçš„å€¼çš„æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚è¿™éƒ¨åˆ†è·Ÿ ES6 æ¨¡å—åŒ–æœ‰æ‰€ä¸åŒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">incCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    counter++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">counter</span>: counter,</span><br><span class="line">    <span class="attr">incCounter</span>: incCounter,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="built_in">require</span>(<span class="string">&quot;./lib&quot;</span>).<span class="property">counter</span>;</span><br><span class="line"><span class="keyword">var</span> incCounter = <span class="built_in">require</span>(<span class="string">&quot;./lib&quot;</span>).<span class="property">incCounter</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter); <span class="comment">// 3</span></span><br><span class="line"><span class="title function_">incCounter</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œ <strong>incCounter</strong> å‰åï¼Œlib.js ä¸­çš„ <strong>counter</strong> å§‹ç»ˆä¸º 3ï¼Œå¯ä»¥å¾—çŸ¥ CommonJS è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ã€‚</p><br/><h3 id="ES6-æ¨¡å—åŒ–"><a href="#ES6-æ¨¡å—åŒ–" class="headerlink" title="ES6 æ¨¡å—åŒ–"></a>ES6 æ¨¡å—åŒ–</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ES6 åœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œæ—¨åœ¨æˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚å…¶æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼šexport å’Œ importã€‚export å‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œimport å‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚</p><h4 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>æµè§ˆå™¨ç¯å¢ƒé»˜è®¤æ”¯æŒ</li><li>è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨</li><li>åŠ¨æ€å¼•ç”¨ï¼Œä¸ä¼šç¼“å­˜å€¼</li><li>é™æ€åŒ–ï¼Œç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥è¾“å‡ºçš„å˜é‡ï¼Œå¯ä»¥ tree shaking</li></ul><h4 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><ul><li>å¯¼å‡ºï¼šä½¿ç”¨ <font color=#2F74DC>export</font> å¯¼å‡º</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math.js</span></span><br><span class="line"><span class="keyword">var</span> total = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> add = <span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123; add, total &#125;;</span><br></pre></td></tr></table></figure><ul><li>å¯¼å…¥ï¼šä½¿ç”¨ <font color=#2F74DC>import</font> å¯¼å…¥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add, total &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¨¡å—é‡å‘½å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> newAdd <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br></pre></td></tr></table></figure><h4 id="åŠ è½½æœºåˆ¶-1"><a href="#åŠ è½½æœºåˆ¶-1" class="headerlink" title="åŠ è½½æœºåˆ¶"></a>åŠ è½½æœºåˆ¶</h4><ul><li>æ¨¡å—åŠ è½½æ–¹å¼å–å†³äºæ‰€å¤„çš„ç¯å¢ƒï¼ŒNode.js ç¯å¢ƒä¸­åŒæ­¥åŠ è½½ï¼Œæµè§ˆå™¨ç«¯å¼‚æ­¥åŠ è½½</li></ul><br/><h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><br/><h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3>]]></content>
      
      
      <categories>
          
          <category> æ‹“å±• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github Action è‡ªåŠ¨æ„å»º Flutter Android Apk</title>
      <link href="/post/25ae93b9.html"/>
      <url>/post/25ae93b9.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è¿™æ®µæ—¶é—´ç”¨ Flutter åšäº†ä¸€ä¸ªå¼€æºçš„é¡¹ç›® <a href="https://github.com/guozhigq/flutter_v2ex">VVEX</a>, å› ä¸ºéœ€è¦æ‰“åŒ… apkï¼Œåœ¨æ­¤ä¹‹å‰ä¸€ç›´æ˜¯æ‰‹åŠ¨ flutter build apkï¼Œå†æŠŠæ–‡ä»¶ä¸Šä¼ åˆ° releaseï¼Œæ¯æ¬¡å‘å¸ƒæ–°ç‰ˆæœ¬ç¡®å®æœ‰ç‚¹ç¹çã€‚è¶ç€æœ‰ç©ºæ¥ä½¿ç”¨ Github Action åšä¸ªæŒç»­åŒ–é›†æˆï¼Œè‡ªåŠ¨æ‰“åŒ… apkã€‚</p><p><strong>æœ€åå®Œæˆçš„è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬å¦‚ä¸‹ï¼š</strong></p><p><strong>æ›´æ–°ï¼š</strong> 5æœˆè°·æ­Œå‘å¸ƒäº†Flutter stable 3.10.0 ç‰ˆæœ¬ï¼Œå¯èƒ½ä¼šå‡ºç°æ’ä»¶ä¸å…¼å®¹æƒ…å†µï¼Œéœ€è¦å°† yml æ–‡ä»¶ä¸­flutterå¯¹åº” <code>channel</code> æ”¹ä¸º <code>any</code>ï¼Œ<code>flutter-version</code>éœ€è¦æŒ‡å®šä¸ºæŸä¸€ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿æ‰“åŒ…ç¯å¢ƒæ­£å¸¸ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œéƒ¨åˆ† step çš„ name éƒ½ä½¿ç”¨äº†ä¸­æ–‡å‘½å</p><span id="more"></span><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">build_apk</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># actionäº‹ä»¶è§¦å‘</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">    <span class="attr">push:</span></span><br><span class="line">        <span class="comment"># push tagæ—¶è§¦å‘</span></span><br><span class="line">        <span class="attr">tag:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">v*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥æœ‰å¤šä¸ªjobs</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">    <span class="attr">build_apk:</span></span><br><span class="line">        <span class="comment"># è¿è¡Œç¯å¢ƒ ubuntu-latest window-latest mac-latest</span></span><br><span class="line">        <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ¯ä¸ªjobsä¸­å¯ä»¥æœ‰å¤šä¸ªsteps</span></span><br><span class="line">        <span class="attr">steps:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ä»£ç è¿å‡º</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">æ„å»ºJavaç¯å¢ƒ</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">actions/setup-java@v3</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">distribution:</span> <span class="string">&quot;zulu&quot;</span></span><br><span class="line">                  <span class="attr">java-version:</span> <span class="string">&quot;17&quot;</span></span><br><span class="line">                  <span class="attr">token:</span> <span class="string">$&#123;&#123;secrets.GIT_TOKEN&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">æ£€æŸ¥ç¼“å­˜</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">              <span class="attr">id:</span> <span class="string">cache-flutter</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">path:</span> <span class="string">/root/flutter-sdk</span> <span class="comment"># Flutter SDK çš„è·¯å¾„</span></span><br><span class="line">                  <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-flutter-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/pubspec.lock&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å®‰è£…Flutter</span></span><br><span class="line">              <span class="attr">if:</span> <span class="string">steps.cache-flutter.outputs.cache-hit</span> <span class="type">!=</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">subosito/flutter-action@v2</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">flutter-version:</span> <span class="number">3.7</span><span class="number">.7</span></span><br><span class="line">                  <span class="attr">channel:</span> <span class="string">any</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ä¸‹è½½é¡¹ç›®ä¾èµ–</span></span><br><span class="line">              <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">pub</span> <span class="string">get</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">è§£ç ç”Ÿæˆ</span> <span class="string">jks</span></span><br><span class="line">              <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$KEYSTORE_BASE64</span> <span class="string">|</span> <span class="string">base64</span> <span class="string">-di</span> <span class="string">&gt;</span> <span class="string">android/app/vvex.jks</span></span><br><span class="line">              <span class="attr">env:</span></span><br><span class="line">                  <span class="attr">KEYSTORE_BASE64:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_BASE64</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span></span><br><span class="line">              <span class="comment"># å¯¹åº” android/app/build.gradle signingConfigsä¸­çš„é…ç½®é¡¹</span></span><br><span class="line">              <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span> <span class="string">--release</span> <span class="string">--split-per-abi</span></span><br><span class="line">              <span class="attr">env:</span></span><br><span class="line">                  <span class="attr">KEYSTORE_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">                  <span class="attr">KEY_ALIAS:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_ALIAS</span> <span class="string">&#125;&#125;</span></span><br><span class="line">                  <span class="attr">KEY_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_PASSWORD&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å‘å¸ƒ</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">ncipollo/release-action@v1</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">artifacts:</span> <span class="string">&quot;build/app/outputs/flutter-apk/app-*.apk&quot;</span></span><br><span class="line">                  <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GIT_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">                  <span class="attr">allowUpdates:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š"><a href="#åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š" class="headerlink" title="åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š"></a>åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š</h3><ul><li>æ— ç­¾åæ‰“åŒ…</li><li>å¸¦ç­¾åæ‰“åŒ…</li></ul></br><h4 id="æ— ç­¾åæ‰“åŒ…"><a href="#æ— ç­¾åæ‰“åŒ…" class="headerlink" title="æ— ç­¾åæ‰“åŒ…"></a>æ— ç­¾åæ‰“åŒ…</h4><p>åœ¨ä½¿ç”¨ GitHub å®Œæˆè‡ªåŠ¨åŒ–æ„å»ºä¹‹å‰ï¼Œä¸€ç›´ä½¿ç”¨çš„æ˜¯æ— ç­¾åæ‰“åŒ…ï¼Œå¾ˆç®€å•ï¼Œä¸éœ€è¦é¢å¤–é…ç½®ä»€ä¹ˆ<br>æ— ç­¾åæ‰“åŒ…çš„è„šæœ¬éœ€è¦å»æ‰ä¸Šé¢çš„è¿™éƒ¨åˆ†å†…å®¹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">è§£ç ç”Ÿæˆ</span> <span class="string">jks</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$KEYSTORE_BASE64</span> <span class="string">|</span> <span class="string">base64</span> <span class="string">-di</span> <span class="string">&gt;</span> <span class="string">android/app/vvex.jks</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">      <span class="attr">KEYSTORE_BASE64:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_BASE64</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span> <span class="string">--release</span> <span class="string">--split-per-abi</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">        <span class="attr">KEYSTORE_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">KEY_ALIAS:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_ALIAS</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">KEY_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_PASSWORD&#125;&#125;</span></span><br></pre></td></tr></table></figure></br><p>ä»¥ä¸‹éƒ¨åˆ†éœ€è¦ä¿ç•™</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span></span><br><span class="line">   <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span> <span class="string">--release</span> <span class="string">--split-per-abi</span></span><br></pre></td></tr></table></figure></br><h4 id="å¸¦ç­¾åæ‰“åŒ…"><a href="#å¸¦ç­¾åæ‰“åŒ…" class="headerlink" title="å¸¦ç­¾åæ‰“åŒ…"></a>å¸¦ç­¾åæ‰“åŒ…</h4><p><strong>ç­¾åæ–‡ä»¶ xxx.js è·Ÿ xxx.properties æ–‡ä»¶ä¸è¦æäº¤è‡³å…¬å…±ä»“åº“</strong><br>ä¸»è¦åˆ†ä¸‹é¢å‡ æ­¥</p><ul><li>ç”Ÿæˆç­¾å jks æ–‡ä»¶ï¼šæ¯”å¦‚ <strong>vvex.jks</strong></li><li>åˆ›å»º <strong>key.properties</strong> æ–‡ä»¶</li><li>ä¿®æ”¹ <strong>build.gradle</strong> æ–‡ä»¶</li><li>Github é…ç½® <strong>action secrets</strong></li></ul></br><h5 id="ç”Ÿæˆç­¾åæ–‡ä»¶"><a href="#ç”Ÿæˆç­¾åæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆç­¾åæ–‡ä»¶"></a>ç”Ÿæˆç­¾åæ–‡ä»¶</h5><p>æ­¤å¤„åŠä»¥ä¸‹ä»¥ VVEX ä¸¾ä¾‹ Mac ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç§»åŠ¨è‡³æ¡Œé¢</span></span><br><span class="line"><span class="built_in">cd</span> desktop</span><br><span class="line"><span class="comment"># åˆ›å»º jksæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">mkdir</span> jks</span><br><span class="line"><span class="built_in">cd</span> jks</span><br><span class="line"><span class="comment"># ç”Ÿæˆjks</span></span><br><span class="line">keytool -genkeypair -<span class="built_in">alias</span> vvex -keyalg RSA -keysize 2048 -keypass password -keystore vvex.jks -storepass password -validity 10000</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li><strong>-alias vvex</strong> æ­¤å¤„çš„ <strong>vvex</strong> å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ä¸ºä»»æ„</li><li><strong>-keystore vvex.jks</strong> æ­¤å¤„çš„ <strong>vvex</strong> å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ä¸ºä»»ï¼Œå»ºè®®ä¸åˆ«åç›¸åŒ</li><li>å»ºè®®ä»¥ä¸Š vvex ä¸ºç›¸åŒå†…å®¹</li><li><strong>-keypass password</strong> æ­¤å¤„çš„ <strong>password</strong> è®¾ç½®å¯†é’¥å¯†ç </li><li><strong>-storepass password</strong> æ­¤å¤„çš„ <strong>password</strong> è®¾ç½®å¯†é’¥åº“å¯†ç </li><li>å»ºè®®ä»¥ä¸Š password ä¸ºç›¸åŒå†…å®¹</li></ul><p>vvex.jks æ–‡ä»¶ç”Ÿæˆå®Œæˆåï¼Œå¤åˆ¶è‡³ android&#x2F;app ç›®å½•ä¸‹</p><p>è‡³æ­¤ï¼Œç¬¬ä¸€æ­¥å®Œæˆ</p></br><h5 id="åˆ›å»º-key-properties-æ–‡ä»¶"><a href="#åˆ›å»º-key-properties-æ–‡ä»¶" class="headerlink" title="åˆ›å»º key.properties æ–‡ä»¶"></a>åˆ›å»º key.properties æ–‡ä»¶</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># -storepass password å¤„çš„password</span></span><br><span class="line">storePassword = password</span><br><span class="line"><span class="comment"># -keypass password å¤„çš„password</span></span><br><span class="line">keyPassword = password</span><br><span class="line"><span class="comment"># åˆ«å</span></span><br><span class="line">keyAlias = vvex</span><br><span class="line"><span class="comment"># æ­¤å¤„æ³¨æ„ ç›´æ¥å†™xxxx.jkså°±å¯ä»¥ï¼Œä¸éœ€è¦å†™å…¶ä»–è·¯å¾„</span></span><br><span class="line">storeFile = vvex.jks</span><br></pre></td></tr></table></figure><p>key.properties æ–‡ä»¶ç”Ÿæˆå®Œæˆåï¼Œå¤åˆ¶è‡³ android ç›®å½•ä¸‹</p><p>è‡³æ­¤ï¼Œç¬¬ä¸€æ­¥å®Œæˆ</p></br><h5 id="ä¿®æ”¹-build-gradle-æ–‡ä»¶"><a href="#ä¿®æ”¹-build-gradle-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ build.gradle æ–‡ä»¶"></a>ä¿®æ”¹ build.gradle æ–‡ä»¶</h5><p><strong>android&#x2F;app</strong> ç›®å½•ä¸‹çš„ <strong>build.gradle</strong> æ–‡ä»¶å¢åŠ ä»¥ä¸‹å†…å®¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  å¼•ç”¨ key.properties æ–‡ä»¶</span></span><br><span class="line">def keystorePropertiesFile = rootProject.<span class="title function_">file</span>(<span class="string">&#x27;key.properties&#x27;</span>)</span><br><span class="line">def keystoreProperties = <span class="keyword">new</span> <span class="title class_">Properties</span>()</span><br><span class="line"><span class="keyword">if</span> (keystorePropertiesFile.<span class="title function_">exists</span>()) &#123;</span><br><span class="line">    keystoreProperties.<span class="title function_">load</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(keystorePropertiesFile))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">def _storeFile = <span class="title function_">file</span>(<span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEYSTORE&quot;</span>) ?: keystoreProperties[<span class="string">&quot;storeFile&quot;</span>] ?: <span class="string">&quot;vvex.jks&quot;</span>)</span><br><span class="line">def _storePassword = <span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEYSTORE_PASSWORD&quot;</span>) ?: keystoreProperties[<span class="string">&quot;storePassword&quot;</span>]</span><br><span class="line">def _keyAlias = <span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEY_ALIAS&quot;</span>) ?: keystoreProperties[<span class="string">&quot;keyAlias&quot;</span>]</span><br><span class="line">def _keyPassword = <span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEY_PASSWORD&quot;</span>) ?: keystoreProperties[<span class="string">&quot;keyPassword&quot;</span>]</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  signingConfigs &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ ç­¾åé…ç½®</span></span><br><span class="line">    release &#123;</span><br><span class="line">        <span class="comment">// é…ç½®å¯†é’¥åº“æ–‡ä»¶çš„ä½ç½®ã€åˆ«åã€å¯†ç ç­‰ä¿¡æ¯</span></span><br><span class="line">        storeFile _storeFile</span><br><span class="line">        storePassword _storePassword</span><br><span class="line">        keyAlias _keyAlias</span><br><span class="line">        keyPassword _keyPassword</span><br><span class="line">        v1SigningEnabled <span class="literal">true</span></span><br><span class="line">        v2SigningEnabled <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  buildTypes &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">      signingConfig signingConfigs.<span class="property">release</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ å¤§å†™å­—ç¬¦ <strong>KEYSTORE_PASSWORD</strong>ã€<strong>KEY_ALIAS</strong>ã€<strong>KEY_PASSWORD</strong> åœ¨ github è®¾ç½®<strong>secrets</strong>æ—¶ä¼šç”¨åˆ°</p><h5 id="Github-é…ç½®-action-secrets"><a href="#Github-é…ç½®-action-secrets" class="headerlink" title="Github é…ç½® action secrets"></a>Github é…ç½® action secrets</h5><ul><li>æ‰“å¼€è¿œç¨‹ä»“åº“çš„è®¾ç½®é¡µé¢ï¼ˆç”¨æˆ·ååŠä»“åº“åè®°å¾—æ›¿æ¢ä¸ºè‡ªå·±çš„ï¼‰<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/guozhigq/flutter_test/settings/secrets/actions</span><br></pre></td></tr></table></figure></li><li>ç‚¹å‡»å³ä¸Šæ–¹ ã€New repository secretã€‘</li><li>ä¾æ¬¡åˆ›å»º Actions secrets</li></ul><table><thead><tr><th>name</th><th>Secret</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>KEYSTORE_BASE64</td><td>base64</td><td>vvex.jks base64 ç¼–ç </td></tr><tr><td>KEY_ALIAS</td><td>vvex</td><td><strong>-alias vvex</strong>å¤„çš„ vvex</td></tr><tr><td>KEY_PASSWORD</td><td>password</td><td><strong>-keypass password</strong>å¤„çš„ password</td></tr><tr><td>KEYSTORE_PASSWORD</td><td>password</td><td><strong>-storepass password</strong>å¤„çš„ password</td></tr><tr><td>KEY_PROPERTIES</td><td>base64</td><td>key.properties base64 ç¼–ç </td></tr><tr><td>GIT_TOKEN</td><td>å­—ç¬¦ä¸²</td><td>github è®¾ç½®ä¸­ç”Ÿæˆ</td></tr></tbody></table></br><p><strong>å¦‚ä½•å¯¹ vvex.jksã€key.properties è¿›è¡Œ base64 ç¼–ç </strong><br>æ–¹ä¾¿èµ·è§ï¼Œå°† key.properties å¤åˆ¶åˆ° desktop&#x2F;jks æ–‡ä»¶å¤¹ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªåŠ¨ç”Ÿæˆbase64å¹¶å¤åˆ¶åˆ°äº†ç²˜è´´æ¿ï¼Œç›´æ¥åˆ°githubå¤åˆ¶å³å¯</span></span><br><span class="line"><span class="built_in">base64</span> vvex.jks | pbcopy</span><br><span class="line"><span class="built_in">base64</span> key.properties | pbcopy</span><br></pre></td></tr></table></figure></br><p>å¦‚ä½•ç”Ÿæˆ <strong>GIT_TOKEN</strong><br><a href="https://github.com/settings/tokens">æ‰“å¼€ tokens è®¾ç½®é¡µé¢</a></p>]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åºŠåŠ è½½å¤±è´¥ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆ</title>
      <link href="/post/6bb61c1a.html"/>
      <url>/post/6bb61c1a.html</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹  fluuterï¼Œæ‰€ä»¥å¼€å‘äº†ä¸€æ¬¾åº”ç”¨ï¼Œèµ·åä¸ºï¼š<a href="https://github.com/guozhigq/flutter_v2ex">vvex</a>ã€‚ä¸»è¦æ˜¯ <a href="https://www.v2ex.com/">v2ex</a> çš„å®¢æˆ·ç«¯å®ç°ï¼Œå¤§éƒ¨åˆ†æ•°æ®éƒ½æ˜¯é€šè¿‡æ¨¡æ‹Ÿè¯·æ±‚ï¼Œè§£æ html ç»“æ„æ‹¿åˆ°çš„ã€‚</p><p>ä»Šå¤©åœ¨æ‰‹æœºä¸Šæµè§ˆä¸»é¢˜æ—¶ï¼Œå‘ç°åœ¨è¯¦æƒ…é¡µä¼šå‡ºç°åŠ è½½æ—¶ç™½å±çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾ã€‚å¾ˆæ˜æ˜¾å¯ä»¥åˆ¤æ–­æ˜¯å›¾ç‰‡åŠ è½½å¼‚å¸¸å¯¼è‡´çš„é—®é¢˜ã€‚æ‰“å¼€ç¼–è¾‘å™¨ ğŸ”¨ ï¼Œå¤ç°ä¸€ä¸‹é—®é¢˜ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬å›¾ç‰‡èµ„æºå‡ºäº†ç‚¹æœ‰é—®é¢˜</p><span id="more"></span><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">flutter: https:<span class="comment">//tutu.to/ttt_tvI99C.png</span></span><br><span class="line">flutter: Exception: Invalid image data</span><br><span class="line">flutter: Exception: Invalid image data</span><br><span class="line"></span><br><span class="line">======== Exception caught by rendering <span class="keyword">library</span> =====================================================</span><br><span class="line">The following assertion was thrown during performLayout():</span><br><span class="line">BoxConstraints forces an infinite height.</span><br><span class="line"></span><br><span class="line">These invalid constraints were provided to RenderConstrainedBox<span class="string">&#x27;s layout() function by the following function, which probably computed the invalid constraints in question:</span></span><br><span class="line"><span class="string">  RenderBox.layout (package:flutter/src/rendering/box.dart:2430:11)</span></span><br><span class="line"><span class="string">The offending constraints were: BoxConstraints(w=357.0, h=Infinity)</span></span><br><span class="line"><span class="string">The relevant error-causing widget was:</span></span><br><span class="line"><span class="string">  Stack Stack:file:///Users/user/Desktop/flutter_v2ex/lib/components/common/image_loading.dart:81:22</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">......</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The following RenderObject was being processed when the exception was fired: RenderStack#e240b relayoutBoundary=up43 NEEDS-LAYOUT NEEDS-PAINT NEEDS-COMPOSITING-BITS-UPDATE</span></span><br><span class="line"><span class="string">...  parentData: &lt;none&gt; (can use size)</span></span><br><span class="line"><span class="string">...  constraints: BoxConstraints(0.0&lt;=w&lt;=357.0, 0.0&lt;=h&lt;=Infinity)</span></span><br><span class="line"><span class="string">...  size: MISSING</span></span><br><span class="line"><span class="string">...  alignment: AlignmentDirectional.topStart</span></span><br><span class="line"><span class="string">...  textDirection: ltr</span></span><br><span class="line"><span class="string">...  fit: expand</span></span><br><span class="line"><span class="string">RenderObject: RenderStack#e240b relayoutBoundary=up43 NEEDS-LAYOUT NEEDS-PAINT NEEDS-COMPOSITING-BITS-UPDATE</span></span><br><span class="line"><span class="string">  parentData: &lt;none&gt; (can use size)</span></span><br><span class="line"><span class="string">  constraints: BoxConstraints(0.0&lt;=w&lt;=357.0, 0.0&lt;=h&lt;=Infinity)</span></span><br><span class="line"><span class="string">  size: MISSING</span></span><br><span class="line"><span class="string">  alignment: AlignmentDirectional.topStart</span></span><br><span class="line"><span class="string">  textDirection: ltr</span></span><br><span class="line"><span class="string">  fit: expand</span></span><br><span class="line"><span class="string">...  child 1: RenderConstrainedBox#b9ed3 NEEDS-LAYOUT NEEDS-PAINT NEEDS-COMPOSITING-BITS-UPDATE</span></span><br><span class="line"><span class="string">...    parentData: not positioned; offset=Offset(0.0, 0.0)</span></span><br><span class="line"><span class="string">...    constraints: MISSING</span></span><br><span class="line"><span class="string">...    size: MISSING</span></span><br><span class="line"><span class="string">...    additionalConstraints: BoxConstraints(w=Infinity, h=60.0)</span></span><br><span class="line"><span class="string">...    child: _RenderColoredBox#4a254 NEEDS-LAYOUT NEEDS-PAINT NEEDS-COMPOSITING-BITS-UPDATE</span></span><br><span class="line"><span class="string">...      parentData: &lt;none&gt;</span></span><br><span class="line"><span class="string">...      constraints: MISSING</span></span><br><span class="line"><span class="string">...      size: MISSING</span></span><br><span class="line"><span class="string">...      behavior: opaque</span></span><br><span class="line"><span class="string">...      child: RenderPositionedBox#f7ed4 NEEDS-LAYOUT NEEDS-PAINT NEEDS-COMPOSITING-BITS-UPDATE</span></span><br><span class="line"><span class="string">...        parentData: &lt;none&gt;</span></span><br><span class="line"><span class="string">...        constraints: MISSING</span></span><br><span class="line"><span class="string">...        size: MISSING</span></span><br><span class="line"><span class="string">...        alignment: Alignment.center</span></span><br><span class="line"><span class="string">...        textDirection: ltr</span></span><br><span class="line"><span class="string">...        widthFactor: expand</span></span><br><span class="line"><span class="string">...        heightFactor: expand</span></span><br><span class="line"><span class="string">...        child: RenderParagraph#d237d NEEDS-LAYOUT NEEDS-PAINT</span></span><br><span class="line"><span class="string">...          parentData: offset=Offset(0.0, 0.0)</span></span><br><span class="line"><span class="string">...          constraints: MISSING</span></span><br><span class="line"><span class="string">...          size: MISSING</span></span><br><span class="line"><span class="string">...          textAlign: start</span></span><br><span class="line"><span class="string">...          textDirection: ltr</span></span><br><span class="line"><span class="string">...          softWrap: wrapping at box width</span></span><br><span class="line"><span class="string">...          overflow: clip</span></span><br><span class="line"><span class="string">...          locale: en_US</span></span><br><span class="line"><span class="string">...          maxLines: unlimited</span></span><br><span class="line"><span class="string">...  child 2: RenderParagraph#0be05 NEEDS-LAYOUT NEEDS-PAINT</span></span><br><span class="line"><span class="string">...    parentData: right=0.0; bottom=0.0; left=0.0; offset=Offset(0.0, 0.0)</span></span><br><span class="line"><span class="string">...    constraints: MISSING</span></span><br><span class="line"><span class="string">...    size: MISSING</span></span><br><span class="line"><span class="string">...    textAlign: center</span></span><br><span class="line"><span class="string">...    textDirection: ltr</span></span><br><span class="line"><span class="string">...    softWrap: wrapping at box width</span></span><br><span class="line"><span class="string">...    overflow: clip</span></span><br><span class="line"><span class="string">...    locale: en_US</span></span><br><span class="line"><span class="string">...    maxLines: unlimited</span></span><br><span class="line"><span class="string">...    text: TextSpan</span></span><br><span class="line"><span class="string">...      debugLabel: (englishLike bodyMedium 2021).merge(((blackCupertino bodyMedium).apply).apply)</span></span><br><span class="line"><span class="string">...      inherit: false</span></span><br><span class="line"><span class="string">...      color: Color(0xff191c1b)</span></span><br><span class="line"><span class="string">...      family: NotoSansSC</span></span><br><span class="line"><span class="string">...      size: 14.0</span></span><br><span class="line"><span class="string">...      weight: 400</span></span><br><span class="line"><span class="string">...      letterSpacing: 0.3</span></span><br><span class="line"><span class="string">...      baseline: alphabetic</span></span><br><span class="line"><span class="string">...      height: 1.4x</span></span><br><span class="line"><span class="string">...      leadingDistribution: even</span></span><br><span class="line"><span class="string">...      decoration: Color(0xff191c1b) TextDecoration.none</span></span><br><span class="line"><span class="string">...      &quot;load image failed, click to reload&quot;</span></span><br><span class="line"><span class="string">====================================================================================================</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p>å°è¯•åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå‘ç°é‡å®šå‘åˆ°äº† <a href="https://tutu.to/show/ttt_tvI99C-png">https://tutu.to/show/ttt_tvI99C-png</a>ï¼Œè¿™å°±å€¼å¾—æ€€ç–‘äº†ï¼Œæ˜¯ä¸æ˜¯åœ¨ app ä¸­ä½¿ç”¨ http get è·å–å›¾ç‰‡èµ„æºæ—¶ï¼Œå‘ç”Ÿäº†é‡å®šå‘ç›´æ¥è¿”å›äº† html ç»“æ„ï¼Œå¹¶éæœ‰æ•ˆçš„ bytes æ•°æ®ï¼Œå¯¼è‡´å›¾ç‰‡åŠ è½½å¤±è´¥å‘¢ï¼Ÿ</p><hr/>æˆ‘ä»¬å…ˆå°è¯•åœ¨postmanä¸­æ¨¡æ‹Ÿè¯·æ±‚ï¼Œå›¾ç‰‡æ²¡æœ‰æ­£å¸¸æ˜¾ç¤ºï¼Œè¿”å›äº†htmlç»“æ„<p>åŒæ ·çš„ï¼Œæˆ‘ä»¬åœ¨ app ä¸­ç›´æ¥ä½¿ç”¨ http è¯·æ±‚å›¾ç‰‡ï¼Œè·Ÿ postman è¿”å›äº†åŒæ ·çš„ html ç»“æ„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[log] <span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span> <span class="attr">class</span>=<span class="string">&quot;relative min-full&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;strict-origin-when-cross-origin&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;csrf-token&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">content</span>=<span class="string">&quot;Qc2IhKwxEALVm7hdNXnLl8uaSBkpStYXnTlSvkOI&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>loading<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;0.1;url=show/ttt_tvI99C-png&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">            <span class="attr">defer</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">&quot;https://s.urstudio.cn/pixel/YIavbDTc6LktjXg2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">referrerpolicy</span>=<span class="string">&quot;origin&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr/><p>äºæ˜¯æˆ‘åœ¨æµè§ˆå™¨ä¸­è®¿é—®åŸä¸»é¢˜ï¼Œå‘ç°å›¾ç‰‡å¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œé€šè¿‡æŸ¥çœ‹ Domï¼Œå‘ç° <a href="https://tutu.to/ttt_tvI99C.png">å›¾ç‰‡é“¾æ¥</a> ä¹Ÿç›¸åŒï¼Œå¦å¤–åœ¨ image æ ‡ç­¾ä¸Šæœ‰é¢å¤–ä¸¤ä¸ªå±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">referrerpolicy = <span class="string">&quot;no-referrer&quot;</span>;</span><br><span class="line">rel = <span class="string">&quot;noreferrer&quot;</span>;</span><br></pre></td></tr></table></figure><p>mark æ­¤å¤„ï¼Œæˆ‘ä»¬å…ˆç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><p>æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œå‘ç°å›¾ç‰‡èµ„æºçš„è¯·æ±‚å“åº”ä¸­å¹¶æ²¡æœ‰è¿”å›ç±»ä¼¼äº redirect é‡å®šå‘çš„å†…å®¹</p><p>å¤åˆ¶ cURL åˆ° postman æ¨¡æ‹Ÿè¯·æ±‚ï¼Œå›¾ç‰‡å¯ä»¥æ­£å¸¸è¿”å›ï¼Œæå–åˆ°è¯·æ±‚å¤´ä¸­å…³é”®å­—æ®µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;sec-fetch-dest&#x27;</span> : image</span><br></pre></td></tr></table></figure><p>å°è¯•åœ¨è¯·æ±‚å¤´ä¸­åŠ å…¥è¿™ä¸ªå­—æ®µï¼ŒæˆåŠŸè§£å†³ã€‚</p><blockquote><h2 id="Sec-Fetch-Dest"><a href="#Sec-Fetch-Dest" class="headerlink" title="Sec-Fetch-Dest"></a>Sec-Fetch-Dest</h2><p>Sec-Fetch-Dest Fetch å…ƒæ•°æ®è¯·æ±‚æ ‡å¤´æŒ‡ç¤ºè¯·æ±‚çš„ç›®æ ‡ï¼Œå³æ•°æ®çš„æ¥æºä»¥åŠå¦‚ä½•ä½¿ç”¨è¿™äº›è·å–åˆ°çš„æ•°æ®ã€‚<br>è¿™å…è®¸æœåŠ¡å™¨æ ¹æ®è¯·æ±‚æ˜¯å¦é‡‡ç”¨äº†é€‚å½“çš„ä½¿ç”¨æ–¹å¼æ¥ç¡®å®šæ˜¯å¦ä¸ºè¯·æ±‚æä¾›æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰ audio ç›®æ ‡çš„è¯·æ±‚åº”è¯·æ±‚éŸ³é¢‘æ•°æ®ï¼Œè€Œä¸æ˜¯å…¶ä»–ç±»å‹çš„èµ„æºï¼ˆä¾‹å¦‚ï¼ŒåŒ…å«æ•æ„Ÿç”¨æˆ·ä¿¡æ¯çš„æ–‡æ¡£ï¼‰ã€‚</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Flutter æœ¬åœ°æŒä¹…åŒ–ä¸ç¼“å­˜</title>
      <link href="/post/a690fcba.html"/>
      <url>/post/a690fcba.html</url>
      
        <content type="html"><![CDATA[<h3 id="Flutter-æœ¬åœ°æŒä¹…åŒ–ä¸ç¼“å­˜"><a href="#Flutter-æœ¬åœ°æŒä¹…åŒ–ä¸ç¼“å­˜" class="headerlink" title="Flutter æœ¬åœ°æŒä¹…åŒ–ä¸ç¼“å­˜"></a>Flutter æœ¬åœ°æŒä¹…åŒ–ä¸ç¼“å­˜</h3><p>éœ€è¦ä½¿ç”¨çš„æ’ä»¶</p><ul><li>dart:io</li><li>path_provider</li></ul><p>æ¶‰åŠåˆ°ç¼“å­˜çš„æ’ä»¶</p><ul><li>dio_http_cache</li><li>get_storage</li><li>cached_network_image</li><li>cookJar 3.0.1</li></ul><p>dio_http_cache</p><ul><li>0.3.0</li><li>ç¼“å­˜ç›®å½• ã€å¯ä½¿ç”¨ path_provider æä¾›çš„ getApplicationDocumentsDirectory æ–¹æ³•è·å–åˆ°ã€‘<ul><li>ios ç«¯ &#x2F;Users&#x2F;user&#x2F;Library&#x2F;Developer&#x2F;CoreSimulator&#x2F;Devices&#x2F;A5F2542D-A814-4A70-8386-71D0094A2BFD&#x2F;data&#x2F;Containers&#x2F;Data&#x2F;Application&#x2F;F9FF16B2-48DB-4003-82F1-35AAA41DC64F&#x2F;Documents</li></ul></li></ul><p>get_storage</p><ul><li>2.0.3</li><li>å­˜å‚¨ç™»å½•çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯ã€åº”ç”¨ä¸»é¢˜ã€å„é…ç½®é¡¹å¼€å…³</li><li>ç¼“å­˜ç›®å½• ã€å¯ä½¿ç”¨ path_provider æä¾›çš„ getApplicationDocumentsDirectory æ–¹æ³•è·å–åˆ°ã€‘<ul><li>ios ç«¯ &#x2F;Users&#x2F;user&#x2F;Library&#x2F;Developer&#x2F;CoreSimulator&#x2F;Devices&#x2F;A5F2542D-A814-4A70-8386-71D0094A2BFD&#x2F;data&#x2F;Containers&#x2F;Data&#x2F;Application&#x2F;F9FF16B2-48DB-4003-82F1-35AAA41DC64F&#x2F;Documents</li></ul></li></ul><p>cached_network_image</p><ul><li>3.2.3</li><li>ç¼“å­˜ç›®å½•<ul><li>ios ç«¯ &#x2F;Users&#x2F;user&#x2F;Library&#x2F;Developer&#x2F;CoreSimulator&#x2F;Devices&#x2F;A5F2542D-A814-4A70-8386-71D0094A2BFD&#x2F;data&#x2F;Containers&#x2F;Data&#x2F;Application&#x2F;F9FF16B2-48DB-4003-82F1-35AAA41DC64F&#x2F;Library&#x2F;Caches&#x2F;libCachedImageData</li></ul></li></ul><p>éœ€è¦åˆ é™¤çš„ç¼“å­˜</p><ul><li>dio_http_cache &#x2F;Documents<ul><li>DioCacheManager(CacheConfig(baseUrl: baseUrl)).clearAll() æ— æ•ˆ</li><li>éœ€è¦æ‰‹åŠ¨åˆ é™¤ &#x2F;Documents&#x2F;</li></ul></li><li>cached_network_image &#x2F;Library&#x2F;Caches&#x2F;libCachedImageData</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºHTTP</title>
      <link href="/post/843bb9f9.html"/>
      <url>/post/843bb9f9.html</url>
      
        <content type="html"><![CDATA[<p>HTTP åˆç§°è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè‡ªä»1991å¹´å‘å¸ƒåˆå§‹ç‰ˆæœ¬0.9ï¼Œç°å¦‚ä»Šå·²ç»åˆ°äº†HTTP 3.0ã€‚åœ¨è¿™é‡Œåšä¸ªç¬”è®°ï¼Œæ¥è®°å½•ä¸€ä¸‹HTTPçš„å‰ä¸–ä»Šç”Ÿ</p><h3 id="HTTP-0-9-x2F-1-0"><a href="#HTTP-0-9-x2F-1-0" class="headerlink" title="HTTP 0.9&#x2F;1.0"></a>HTTP 0.9&#x2F;1.0</h3><p>HTTP 0.9ä¸æ”¯æŒè¯·æ±‚å¤´ï¼Œåªæ”¯æŒGETæ–¹æ³•ã€‚<br>HTTP 1.0 åœ¨0.9çš„åŸºç¡€äº†ï¼Œå¢åŠ äº†ä¸€äº›å˜åŒ–ï¼š</p><ul><li><p>è¯·æ±‚ä¸­åŠ å…¥çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ <code>HTTP/1.0</code></p></li><li><p>å¢åŠ äº†è¯·æ±‚å¤´&amp;å“åº”å¤´</p></li><li><p>å¢åŠ äº†HTTP Status Code å½“ç„¶ï¼Œä¸šåŠ¡å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½è¿”å›200</p></li><li><p>å¢åŠ äº†<code>Content-Type</code>ï¼Œå¯ä»¥ä¼ è¾“å…¶ä»–æ–‡ä»¶äº†</p><p>åœ¨HTTP 1.0ç‰ˆæœ¬ä¸­å­˜åœ¨çš„é—®é¢˜</p><ul><li>æ¯å‘èµ·ä¸€ä¸ªè¯·æ±‚éƒ½éœ€è¦æ–°å»ºä¸€ä¸ªTCPé“¾æ¥ï¼Œè€Œæ¯æ¬¡å»ºç«‹TCPé“¾æ¥éƒ½éœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œä¼šäº§ç”Ÿå·¨å¤§å¼€é”€ã€‚</li><li>ä¸²è¡Œè¯·æ±‚ï¼šå¤šä¸ªè¯·æ±‚æ—¶éœ€è¦ç­‰åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚è¿”å›åæ‰èƒ½ç»§ç»­åç»­è¯·æ±‚ï¼Œå¯¼è‡´é¡µé¢&#x2F;æ•°æ®åŠ è½½ç¼“æ…¢ã€‚</li><li>ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚</li></ul><h3 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP 1.1"></a>HTTP 1.1</h3><p>åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼ŒHTTP 1.1ä¸»è¦è§£å†³äº† 1.0 çš„ç½‘ç»œæ€§èƒ½é—®é¢˜ï¼Œå¹¶å¢åŠ äº†ä¸€äº›ç‰¹æ€§ï¼š</p><ul><li>HTTP é•¿é“¾æ¥ï¼š å¢åŠ  <code>keepalive</code> å®ç°TCPé“¾æ¥é‡ç”¨ï¼Œå‡å°‘TCPä¸‰æ¬¡æ¡æ‰‹çš„å¼€é”€ã€‚</li><li>ç®¡é“ä¼ è¾“ï¼šå¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œé¿å…è¯·æ±‚ç«¯å¯¹å¤´é˜»å¡ï¼Œå‡å°‘æ•´ä½“å“åº”æ—¶é—´ã€‚ï¼ˆå¯¹äºéå¹‚ç­‰çš„POSTè¯·æ±‚æˆ–è€…æœ‰ä¾èµ–çš„è¯·æ±‚ä¸é€‚ç”¨ï¼‰</li><li>æ”¯æŒ Chunked Responses ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨Responseçš„æ—¶å€™ï¼Œä¸å¿…è¯´æ˜ Content-Length è¿™æ ·ï¼Œå®¢æˆ·ç«¯å°±ä¸èƒ½æ–­è¿æ¥ï¼Œç›´åˆ°æ”¶åˆ°æœåŠ¡ç«¯çš„EOFæ ‡è¯†ã€‚è¿™ç§æŠ€æœ¯åˆå« â€œæœåŠ¡ç«¯Pushæ¨¡å‹â€ï¼Œæˆ–æ˜¯ â€œæœåŠ¡ç«¯Pushå¼çš„HTTP æŒä¹…é“¾æ¥â€ ï¼ˆè¿™ä¸ªè¿˜ä¸å¤ªæ‡‚ï¼‰</li><li>ç¼“å­˜æœºåˆ¶ï¼šå¢åŠ cache controlæœºåˆ¶</li><li>è¡¥å……åè®®å¤´å†…å®¹ï¼ŒLanguageã€Encodingã€Typeç­‰ç­‰</li><li>å¢åŠ  <code>HOST</code>ï¼Œå¯ä»¥ç”¨äºæœåŠ¡ç«¯åŒºåˆ†åŸŸåä¿¡æ¯</li><li>å¢åŠ  <code>OPTIONS</code>æ–¹æ³•ï¼Œ</li><li>æ–°å¢äº†TLSåè®®</li></ul><p>åœ¨HTTP 1.1ç‰ˆæœ¬ä¸­å­˜åœ¨çš„é—®é¢˜</p><ul><li>è¯·æ±‚å¹¶è¡Œæ•°é‡é™åˆ¶ï¼Œä¸€èˆ¬é™åˆ¶6ä¸ªã€‚ï¼ˆç²¾çµå›¾çš„ä¼˜åŒ–æ¥æºäºæ­¤ï¼Œå‡å°‘è¯·æ±‚æ•°ï¼Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ï¼‰</li><li>ä¸»è¦ä»¥æ–‡æœ¬æ ¼å¼ä¼ è¾“æ•°æ®ï¼Œä¼ è¾“æˆæœ¬è¾ƒå¤§ã€‚</li></ul></li></ul><h3 id="HTTP-2-0"><a href="#HTTP-2-0" class="headerlink" title="HTTP 2.0"></a>HTTP 2.0</h3><p>åŒæ ·çš„ï¼ŒHTTP2.0ä¹Ÿè§£å†³äº†1.1çš„ä¸€äº›é—®é¢˜ï¼š</p><ul><li>å¹¶å‘è¯·æ±‚ï¼šåœ¨ä¸€ä¸ªTCPé“¾æ¥ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªHTTPè¯·æ±‚ã€‚</li><li>å¤šè·¯å¤ç”¨ï¼šä¸€ä¸ªTCPè¿æ¥ä¸­å­˜åœ¨å¤šä¸ªæµï¼ŒåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå¯¹ç«¯å¯ä»¥é€šè¿‡å¸§ä¸­çš„è¡¨ç¤ºçŸ¥é“è¯¥å¸§å±äºå“ªä¸ªè¯·æ±‚ã€‚åœ¨å®¢æˆ·ç«¯ï¼Œè¿™äº›å¸§ä¹±åºå‘é€ï¼Œåˆ°å¯¹ç«¯åå†æ ¹æ®æ¯ä¸ªå¸§é¦–éƒ¨çš„æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…</li><li>å¤´éƒ¨å‹ç¼©ï¼šåœ¨ç½‘ç»œè¯·æ±‚ä¸­ï¼Œè¯·æ±‚å¤´çš„å†…å®¹ä¸€èˆ¬å¤§ä¸”é‡å¤ï¼Œæ•°æ®å†—ä½™å¾ˆä¸¥é‡ï¼ŒHTTP2.0ä¸­é€šè¿‡HPAKç®—æ³•ï¼Œæ¶ˆé™¤é‡å¤éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯è·ŸæœåŠ¡ç«¯ç»´æŠ¤åŒä¸€ä»½å­—å…¸è¡¨ã€‚</li><li>äºŒè¿›åˆ¶ä¼ è¾“</li><li>æœåŠ¡ç«¯æ¨é€ï¼šæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€æ•°æ®è‡³å®¢æˆ·ç«¯</li></ul><p>åœ¨HTTP 2.0ä¸­å­˜åœ¨çš„é—®é¢˜</p><ul><li>ä¸¢åŒ…ï¼š</li><li>æ…¢å¯åŠ¨ï¼š</li><li>å»ºç«‹é“¾æ¥æ—¶éœ€è¦å…ˆè¿›è¡ŒTCPä¸‰æ¬¡æ¡æ‰‹ã€åœ¨TLSä¸‰æ¬¡æ¡æ‰‹</li></ul><h3 id="HTTP-3-0"><a href="#HTTP-3-0" class="headerlink" title="HTTP 3.0"></a>HTTP 3.0</h3><p>HTTP3.0ä½¿ç”¨äº†åŸºäºUDPçš„QUICåè®®</p><ul><li>æ²¡æœ‰äº†TCPçš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¹¶ä¸”TLSç‰ˆæœ¬å‡çº§ä¸º1.3ï¼Œå…è®¸å®¢æˆ·ç«¯æ— éœ€ç­‰å¾…TLSæ¡æ‰‹å®Œæˆå°±å¼€å§‹å‘é€æ•°æ®ï¼Œå®ç°å¿«é€Ÿå»ºç«‹è¿æ¥</li><li>å¢åŠ äº†ä¸¢åŒ…é‡ä¼ æœºåˆ¶</li><li>é»˜è®¤åŠ å¯†</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tree shakingæ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/post/f3aa05d6.html"/>
      <url>/post/f3aa05d6.html</url>
      
        <content type="html"><![CDATA[<p>ä¸€ç›´ä»¥æ¥éƒ½çŸ¥é“åœ¨ webpack æ‰“åŒ…ä¼˜åŒ–ä¸­ï¼Œæœ‰ tree shakingï¼ˆåˆ«åï¼šæ ‘æ‘‡ï¼‰è¿™ä¸€é¡¹ä¼˜åŒ–ï¼Œå´ä¸çŸ¥é“å®ƒçš„å·¥ä½œæœºåˆ¶å’ŒåŸç†ï¼Œè¶ç€ä»Šå¤©å¤ä¹ çŸ¥è¯†çš„ç©ºå­¦ä¹ ä¸€ä¸‹</p><span id="more"></span><h4 id="tree-shaking-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#tree-shaking-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="tree shaking æ˜¯ä»€ä¹ˆï¼Ÿ"></a>tree shaking æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p><strong>tree shaking</strong>ï¼Œåˆ«åï¼šæ ‘æ‘‡ï¼Œæœ€æ—©æ˜¯ç”±<strong>Rollup</strong>å®ç°ã€‚æ ¹æ®å­—é¢æ„æ€æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ç§å·¥å…·ï¼Œå¯ä»¥â€œæ‘‡åŠ¨â€æˆ‘ä»¬çš„ JS æ–‡ä»¶ï¼Œå°†å…¶ä¸­ç”¨ä¸åˆ°çš„ä»£ç â€œæ‘‡â€æ‰ï¼Œå±äºæ€§èƒ½ä¼˜åŒ–çš„ä¸€éƒ¨åˆ†ã€‚å…·ä½“åˆ°å®é™…åœºæ™¯ä¸­æ¥çœ‹ï¼Œæˆ‘ä»¬åœ¨ webpack é¡¹ç›®ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œä¼šæœ‰å¾ˆå¤šçš„ä¾èµ–æ¨¡å—æŒ‚è½½åœ¨ index.js ä¸‹ï¼Œä½†æ˜¯æˆ‘ä»¬åªä¼šç”¨åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œé€ æˆå†…å­˜ç©ºé—´æµªè´¹ï¼Œ tree shaking å°±å¯ä»¥å°†æ— ç”¨çš„æ¨¡å—å‰”é™¤æ‰ï¼Œå®ç°ä»£ç ä½“ç§¯ä¼˜åŒ–çš„æ•ˆæœã€‚</p><h4 id="tree-shaking-çš„å·¥ä½œæœºåˆ¶"><a href="#tree-shaking-çš„å·¥ä½œæœºåˆ¶" class="headerlink" title="tree shaking çš„å·¥ä½œæœºåˆ¶"></a>tree shaking çš„å·¥ä½œæœºåˆ¶</h4><p>å› ä¸º tree shaking åªèƒ½åœ¨é™æ€çš„ modules ä¸‹å·¥ä½œï¼Œæ‰€ä»¥ç›´åˆ° ES6 çš„ import è¯­æ³•ä¸­æ‰å¯ä»¥å®Œç¾ä½¿ç”¨ã€‚</p><!-- è™½ç„¶tree shaking çš„æ¦‚å¿µå¾ˆæ—©å°±è¢«æäº†å‡ºæ¥ï¼Œä½†æ˜¯çœŸæ­£è¢«åˆ©ç”¨å´æ˜¯åœ¨æœ€è¿‘å‡ å¹´ï¼Œä¸€åˆ‡éƒ½æ˜¯å› ä¸ºå®ƒä¾èµ–äºES6çš„æ¨¡å—ç‰¹å¾ã€‚æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ES6 module çš„ç‰¹ç‚¹ï¼š+ åªèƒ½ä½œä¸ºæ¨¡å—é¡¶å±‚è¯­å¥å‡ºç°+ import çš„æ¨¡å—ååªèƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡+ import binding æ˜¯ immutableçš„ --><!-- ES6æ¨¡å—ä¾èµ–å…³ç³»æ˜¯ç¡®å®šçš„ï¼Œå’Œè¿è¡Œæ—¶çš„çŠ¶æ€æ— å…³ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œå¯é çš„é™æ€åˆ†æã€‚è€Œ ComminJS ä»¥ require() å¼•å…¥æ¨¡å—æ˜¯åŠ¨æ€çš„ï¼Œæ— æ³•åœ¨è¿è¡Œå‰ç¡®å®šå®é™…è¿è¡Œä¸­éœ€è¦çš„æ¨¡å—ã€‚ --><h4 id="tree-shaking-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#tree-shaking-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="tree shaking çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>tree shaking çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul><li>ES6 Module å¼•å…¥è¿›è¡Œé™æ€åˆ†æï¼Œæ•…è€Œç¼–è¯‘çš„æ—¶å€™æ­£ç¡®åˆ¤æ–­åˆ°åº•åŠ è½½äº†é‚£äº›æ¨¡å—</li><li>é™æ€åˆ†æç¨‹åºæµï¼Œåˆ¤æ–­é‚£äº›æ¨¡å—å’Œå˜é‡æœªè¢«ä½¿ç”¨æˆ–è€…å¼•ç”¨ï¼Œè¿›è€Œåˆ é™¤å¯¹åº”ä»£ç </li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackä¸€äºŒä¸‰è®²</title>
      <link href="/post/d9987a00.html"/>
      <url>/post/d9987a00.html</url>
      
        <content type="html"><![CDATA[<h4 id="webpackæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#webpackæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="webpackæ˜¯ä»€ä¹ˆï¼Ÿ"></a>webpackæ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨å®ƒç®¡ç†é¡¹ç›®ä¸­çš„æ¨¡å—ä¾èµ–ï¼Œå¹¶ç¼–è¯‘è¾“å‡ºæ¨¡å—æ‰€éœ€çš„é™æ€æ–‡ä»¶ã€‚å®ƒå¯ä»¥å¾ˆå¥½åœ°ç®¡ç†ã€æ‰“åŒ…å¼€å‘ä¸­æ‰€ç”¨åˆ°çš„HTML,CSS,JavaScriptå’Œé™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ï¼Œå­—ä½“ï¼‰ç­‰ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆã€‚å¯¹äºä¸åŒç±»å‹çš„ä¾èµ–ï¼Œwebpackæœ‰å¯¹åº”çš„æ¨¡å—åŠ è½½å™¨ï¼Œè€Œä¸”ä¼šåˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ€ååˆå¹¶ç”Ÿæˆä¼˜åŒ–çš„é™æ€èµ„æº</p><span id="more"></span><h4 id="webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†"><a href="#webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†" class="headerlink" title="webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†"></a>webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†</h4><ul><li>ä»£ç è½¬æ¢ï¼šTypeScript ç¼–è¯‘æˆ JavaScriptã€SCSS ç¼–è¯‘æˆ CSS ç­‰ç­‰</li><li>æ–‡ä»¶ä¼˜åŒ–ï¼šå‹ç¼© JavaScriptã€CSSã€HTML ä»£ç ï¼Œå‹ç¼©åˆå¹¶å›¾ç‰‡ç­‰</li><li>ä»£ç åˆ†å‰²ï¼šæå–å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç ã€æå–é¦–å±ä¸éœ€è¦æ‰§è¡Œéƒ¨åˆ†çš„ä»£ç è®©å…¶å¼‚æ­¥åŠ è½½</li><li>æ¨¡å—åˆå¹¶ï¼šåœ¨é‡‡ç”¨æ¨¡å—åŒ–çš„é¡¹ç›®æœ‰å¾ˆå¤šæ¨¡å—å’Œæ–‡ä»¶ï¼Œéœ€è¦æ„å»ºåŠŸèƒ½æŠŠæ¨¡å—åˆ†ç±»åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶</li><li>è‡ªåŠ¨åˆ·æ–°ï¼šç›‘å¬æœ¬åœ°æºä»£ç çš„å˜åŒ–ï¼Œè‡ªåŠ¨æ„å»ºï¼Œåˆ·æ–°æµè§ˆå™¨</li><li>ä»£ç æ ¡éªŒï¼šåœ¨ä»£ç è¢«æäº¤åˆ°ä»“åº“å‰éœ€è¦æ£€æµ‹ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä»¥åŠå•å…ƒæµ‹è¯•æ˜¯å¦é€šè¿‡</li><li>è‡ªåŠ¨å‘å¸ƒï¼šæ›´æ–°å®Œä»£ç åï¼Œè‡ªåŠ¨æ„å»ºå‡ºçº¿ä¸Šå‘å¸ƒä»£ç å¹¶ä¼ è¾“ç»™å‘å¸ƒç³»ç»Ÿã€‚</li></ul><h4 id="webpackæ„å»ºè¿‡ç¨‹"><a href="#webpackæ„å»ºè¿‡ç¨‹" class="headerlink" title="webpackæ„å»ºè¿‡ç¨‹"></a>webpackæ„å»ºè¿‡ç¨‹</h4><p>Webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š</p><ol><li>åˆå§‹åŒ–å‚æ•°ï¼šä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°</li><li>å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘</li><li>ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶</li><li>ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†</li><li>å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»</li><li>è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š</li><li>è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ</li></ol><p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼ŒWebpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œå¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æœã€‚</p><h4 id="webpack-çƒ­æ›´æ–°åŸç†"><a href="#webpack-çƒ­æ›´æ–°åŸç†" class="headerlink" title="webpack çƒ­æ›´æ–°åŸç†"></a>webpack çƒ­æ›´æ–°åŸç†</h4><p><strong>Webpack</strong> çš„çƒ­æ›´æ–°åˆç§°çƒ­æ›¿æ¢ï¼ˆ<strong>Hot Module Replacement</strong>ï¼‰ï¼Œç¼©å†™ä¸º <strong>HMR</strong>ã€‚ è¿™ä¸ªæœºåˆ¶å¯ä»¥åšåˆ°ä¸ç”¨åˆ·æ–°æµè§ˆå™¨è€Œå°†æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—ã€‚<br>HMRçš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯æ‹‰å»æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ <strong>chunk diff</strong> (<strong>chunk</strong> éœ€è¦æ›´æ–°çš„éƒ¨åˆ†)ï¼Œå®é™…ä¸Š <strong>WDS</strong> ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª <strong>Websocket</strong>ï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<strong>WDS</strong> ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ <strong>hash</strong>ï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ <strong>WDS</strong> å‘èµ· <strong>Ajax</strong> è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹(æ–‡ä»¶åˆ—è¡¨ã€<strong>hash</strong>)ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ <strong>WDS</strong> å‘èµ· <strong>jsonp</strong> è¯·æ±‚è·å–è¯¥chunkçš„å¢é‡æ›´æ–°ã€‚<br>åç»­çš„éƒ¨åˆ†(æ‹¿åˆ°å¢é‡æ›´æ–°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿå“ªäº›çŠ¶æ€è¯¥ä¿ç•™ï¼Ÿå“ªäº›åˆéœ€è¦æ›´æ–°ï¼Ÿ)ç”± <strong>HotModulePlugin</strong> æ¥å®Œæˆï¼Œæä¾›äº†ç›¸å…³ API ä»¥ä¾›å¼€å‘è€…é’ˆå¯¹è‡ªèº«åœºæ™¯è¿›è¡Œå¤„ç†ï¼Œåƒ<strong>react-hot-loader</strong> å’Œ <strong>vue-loader</strong> éƒ½æ˜¯å€ŸåŠ©è¿™äº› API å®ç° HMRã€‚</p><h4 id="å¦‚ä½•ä¼˜åŒ–-webpack-æ‰“åŒ…é€Ÿåº¦ï¼Ÿ"><a href="#å¦‚ä½•ä¼˜åŒ–-webpack-æ‰“åŒ…é€Ÿåº¦ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¼˜åŒ– webpack æ‰“åŒ…é€Ÿåº¦ï¼Ÿ"></a>å¦‚ä½•ä¼˜åŒ– webpack æ‰“åŒ…é€Ÿåº¦ï¼Ÿ</h4><ul><li>ä½¿ç”¨é«˜ç‰ˆæœ¬çš„ webpack å’Œ Node.js</li><li>å¤šè¿›ç¨‹&#x2F;å¤šå®ä¾‹æ„å»ºï¼šå¼€å¯ <strong>parallel</strong> å‚æ•°ï¼Œä½¿ç”¨å¤šè¿›ç¨‹å‹ç¼©</li><li>csså‹ç¼©ï¼šå€ŸåŠ© <strong>optimize-css-assets-webpack-plugin</strong> æ’ä»¶ï¼Œå‹ç¼©å¼•æ“æ˜¯ <strong>cssnano</strong></li><li>æ“¦é™¤æ— ç”¨çš„cssï¼šä½¿ç”¨ <strong>PurgeCSS</strong> æ¥å®Œæˆå¯¹æ— ç”¨ css çš„æ“¦é™¤ï¼Œå®ƒéœ€è¦å’Œ <strong>mini-css-extract-plugin</strong> é…åˆä½¿ç”¨ã€‚</li><li>å›¾ç‰‡å‹ç¼©ï¼šé…ç½® <strong>image-webpack-loader</strong>ã€ä½¿ç”¨åŸºäº Node åº“çš„ <strong>imagemin</strong></li><li>åˆ©ç”¨ç¼“å­˜æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦ï¼š<ul><li>babel-loader å¼€å¯ç¼“å­˜</li><li>terser-webpack-plugin å¼€å¯ç¼“å­˜</li><li>ä½¿ç”¨ cache-loader æˆ–è€… hard-source-webpack-plugin</li></ul></li><li>Tree shaking (æ‘‡æ ‘)<ul><li>æ‰“åŒ…è¿‡ç¨‹ä¸­æ£€æµ‹å·¥ç¨‹ä¸­æ²¡æœ‰å¼•ç”¨è¿‡çš„æ¨¡å—å¹¶è¿›è¡Œæ ‡è®°ï¼Œåœ¨èµ„æºå‹ç¼©æ—¶å°†å®ƒä»¬ä»æœ€ç»ˆçš„bundleä¸­å»æ‰(åªèƒ½å¯¹ES6 Modlueç”Ÿæ•ˆ) å¼€å‘ä¸­å°½å¯èƒ½ä½¿ç”¨ES6 Moduleçš„æ¨¡å—ï¼Œæé«˜tree shakingæ•ˆç‡</li><li>ç¦ç”¨ babel-loader çš„æ¨¡å—ä¾èµ–è§£æï¼Œå¦åˆ™ Webpack æ¥æ”¶åˆ°çš„å°±éƒ½æ˜¯è½¬æ¢è¿‡çš„ CommonJS å½¢å¼çš„æ¨¡å—ï¼Œæ— æ³•è¿›è¡Œ tree-shaking</li><li>ä½¿ç”¨ PurifyCSS(ä¸åœ¨ç»´æŠ¤) æˆ–è€… uncss å»é™¤æ— ç”¨ CSS ä»£ç <ul><li>purgecss-webpack-plugin å’Œ mini-css-extract-pluginé…åˆä½¿ç”¨(å»ºè®®)</li></ul></li></ul></li><li>åˆç†ä½¿ç”¨ Ployfill<ul><li>é‡‡ç”¨ polyfill-service åªç»™ç”¨æˆ·è¿”å›éœ€è¦çš„polyfill</li></ul></li></ul><h4 id="å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ"><a href="#å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ"></a>å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ</h4><ul><li>raw-loaderï¼šåŠ è½½æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆutf-8ï¼‰</li><li>file-loaderï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)</li><li>url-loaderï¼šä¸ file-loader ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¤§äºé˜ˆå€¼ä¼šäº¤ç»™ file-loader å¤„ç†ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶ base64 å½¢å¼ç¼–ç  (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)</li><li>source-map-loaderï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•</li><li>svg-inline-loaderï¼šå°†å‹ç¼©åçš„ SVG å†…å®¹æ³¨å…¥ä»£ç ä¸­</li><li>image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶</li><li>json-loader åŠ è½½ JSON æ–‡ä»¶ï¼ˆé»˜è®¤åŒ…å«ï¼‰</li><li>handlebars-loader: å°† Handlebars æ¨¡ç‰ˆç¼–è¯‘æˆå‡½æ•°å¹¶è¿”å›</li><li>babel-loaderï¼šæŠŠ ES6 è½¬æ¢æˆ ES5</li><li>ts-loader: å°† TypeScript è½¬æ¢æˆ JavaScript</li><li>awesome-typescript-loaderï¼šå°† TypeScript è½¬æ¢æˆ JavaScriptï¼Œæ€§èƒ½ä¼˜äº ts-loader</li><li>sass-loaderï¼šå°†SCSS&#x2F;SASSä»£ç è½¬æ¢æˆCSS</li><li>css-loaderï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§</li><li>style-loaderï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSS</li><li>postcss-loaderï¼šæ‰©å±• CSS è¯­æ³•ï¼Œä½¿ç”¨ä¸‹ä¸€ä»£ CSSï¼Œå¯ä»¥é…åˆ autoprefixer æ’ä»¶è‡ªåŠ¨è¡¥é½ CSS3 å‰ç¼€</li><li>eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç </li><li>tslint-loaderï¼šé€šè¿‡ TSLintæ£€æŸ¥ TypeScript ä»£ç </li><li>mocha-loaderï¼šåŠ è½½ Mocha æµ‹è¯•ç”¨ä¾‹çš„ä»£ç </li><li>coverjs-loaderï¼šè®¡ç®—æµ‹è¯•çš„è¦†ç›–ç‡</li><li>vue-loaderï¼šåŠ è½½ Vue.js å•æ–‡ä»¶ç»„ä»¶</li><li>i18n-loader: å›½é™…åŒ–</li><li>cache-loader: å¯ä»¥åœ¨ä¸€äº›æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ Loader ä¹‹å‰æ·»åŠ ï¼Œç›®çš„æ˜¯å°†ç»“æœç¼“å­˜åˆ°ç£ç›˜é‡Œ</li></ul><h4 id="å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ"><a href="#å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ"></a>å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ</h4><ul><li>define-pluginï¼šå®šä¹‰ç¯å¢ƒå˜é‡ (Webpack4 ä¹‹åæŒ‡å®š mode ä¼šè‡ªåŠ¨é…ç½®)</li><li>ignore-pluginï¼šå¿½ç•¥éƒ¨åˆ†æ–‡ä»¶</li><li>html-webpack-pluginï¼šç®€åŒ– HTML æ–‡ä»¶åˆ›å»º (ä¾èµ–äº html-loader)</li><li>web-webpack-pluginï¼šå¯æ–¹ä¾¿åœ°ä¸ºå•é¡µåº”ç”¨è¾“å‡º HTMLï¼Œæ¯” html-webpack-plugin å¥½ç”¨</li><li>uglifyjs-webpack-pluginï¼šä¸æ”¯æŒ ES6 å‹ç¼© (Webpack4 ä»¥å‰)</li><li>terser-webpack-plugin: æ”¯æŒå‹ç¼© ES6 (Webpack4)</li><li>webpack-parallel-uglify-plugin: å¤šè¿›ç¨‹æ‰§è¡Œä»£ç å‹ç¼©ï¼Œæå‡æ„å»ºé€Ÿåº¦</li><li>mini-css-extract-plugin: åˆ†ç¦»æ ·å¼æ–‡ä»¶ï¼ŒCSS æå–ä¸ºç‹¬ç«‹æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ (æ›¿ä»£extract-text-webpack-plugin)</li><li>serviceworker-webpack-pluginï¼šä¸ºç½‘é¡µåº”ç”¨å¢åŠ ç¦»çº¿ç¼“å­˜åŠŸèƒ½</li><li>clean-webpack-plugin: ç›®å½•æ¸…ç†</li><li>ModuleConcatenationPlugin: å¼€å¯ Scope Hoisting</li><li>speed-measure-webpack-plugin: å¯ä»¥çœ‹åˆ°æ¯ä¸ª Loader å’Œ Plugin æ‰§è¡Œè€—æ—¶ (æ•´ä¸ªæ‰“åŒ…è€—æ—¶ã€æ¯ä¸ª Plugin å’Œ Loader è€—æ—¶)</li><li>webpack-bundle-analyzer: å¯è§†åŒ– Webpack è¾“å‡ºæ–‡ä»¶çš„ä½“ç§¯ (ä¸šåŠ¡ç»„ä»¶ã€ä¾èµ–ç¬¬ä¸‰æ–¹æ¨¡å—)</li></ul><h4 id="Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ"><a href="#Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ"></a>Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ</h4><ul><li><p>Loader æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯¹æ¥æ”¶åˆ°çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œè¿”å›è½¬æ¢åçš„ç»“æœã€‚ å› ä¸º Webpack åªè®¤è¯† JavaScriptï¼Œæ‰€ä»¥ Loader å°±æˆäº†ç¿»è¯‘å®˜ï¼Œå¯¹å…¶ä»–ç±»å‹çš„èµ„æºè¿›è¡Œè½¬è¯‘çš„é¢„å¤„ç†å·¥ä½œã€‚</p></li><li><p>Plugin å°±æ˜¯æ’ä»¶ï¼ŒåŸºäºäº‹ä»¶æµæ¡†æ¶ Tapableï¼Œæ’ä»¶å¯ä»¥æ‰©å±• Webpack çš„åŠŸèƒ½ï¼Œåœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚</p></li><li><p>Loader åœ¨ module.rules ä¸­é…ç½®ï¼Œä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™ï¼Œç±»å‹ä¸ºæ•°ç»„ã€‚æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ª Objectï¼Œå†…éƒ¨åŒ…å«äº† test(ç±»å‹æ–‡ä»¶)ã€loaderã€options (å‚æ•°)ç­‰å±æ€§ã€‚</p></li><li><p>Plugin åœ¨ plugins ä¸­å•ç‹¬é…ç½®ï¼Œç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª Plugin çš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚</p></li></ul><h4 id="å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ"></a>å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ</h4><p>Loader æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œæ‰€ä»¥å¼€å‘ä¸Šéœ€è¦ä¸¥æ ¼éµå¾ªâ€œå•ä¸€èŒè´£â€ï¼Œæ¯ä¸ª Loader åªè´Ÿè´£è‡ªå·±éœ€è¦è´Ÿè´£çš„äº‹æƒ…ã€‚</p><ul><li>Loader è¿è¡Œåœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»æ„ Node.js è‡ªå¸¦çš„ API æˆ–è€…å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œè°ƒç”¨</li><li>Webpack ä¼ ç»™ Loader çš„åŸå†…å®¹éƒ½æ˜¯ UTF-8 æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå½“æŸäº›åœºæ™¯ä¸‹ Loader å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œéœ€è¦é€šè¿‡ exports.raw &#x3D; true å‘Šè¯‰ Webpack è¯¥ Loader æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ®</li><li>å°½å¯èƒ½çš„å¼‚æ­¥åŒ– Loaderï¼Œå¦‚æœè®¡ç®—é‡å¾ˆå°ï¼ŒåŒæ­¥ä¹Ÿå¯ä»¥</li><li>Loader æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨ Loader ä¸­ä¿ç•™çŠ¶æ€</li><li>ä½¿ç”¨ loader-utils å’Œ schema-utils ä¸ºæˆ‘ä»¬æä¾›çš„å®ç”¨å·¥å…·</li><li>åŠ è½½æœ¬åœ° Loader æ–¹æ³•<ul><li>Npm link</li><li>ResolveLoader</li></ul></li></ul><h4 id="å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ"></a>å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ</h4><p>webpackåœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨ç‰¹å®šçš„é˜¶æ®µé’©å…¥æƒ³è¦æ·»åŠ çš„è‡ªå®šä¹‰åŠŸèƒ½ã€‚Webpack çš„ Tapable äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§ï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ‰©å±•æ€§è‰¯å¥½ã€‚</p><ul><li>compiler æš´éœ²äº†å’Œ Webpack æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é’©å­</li><li>compilation æš´éœ²äº†ä¸æ¨¡å—å’Œä¾èµ–æœ‰å…³çš„ç²’åº¦æ›´å°çš„äº‹ä»¶é’©å­</li><li>æ’ä»¶éœ€è¦åœ¨å…¶åŸå‹ä¸Šç»‘å®šapplyæ–¹æ³•ï¼Œæ‰èƒ½è®¿é—® compiler å®ä¾‹</li><li>ä¼ ç»™æ¯ä¸ªæ’ä»¶çš„ compiler å’Œ compilationå¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼Œè‹¥åœ¨ä¸€ä¸ªæ’ä»¶ä¸­ä¿®æ”¹äº†å®ƒä»¬èº«ä¸Šçš„å±æ€§ï¼Œä¼šå½±å“åé¢çš„æ’ä»¶</li><li>æ‰¾å‡ºåˆé€‚çš„äº‹ä»¶ç‚¹å»å®Œæˆæƒ³è¦çš„åŠŸèƒ½<ul><li>emit äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¯ä»¥è¯»å–åˆ°æœ€ç»ˆè¾“å‡ºçš„èµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ï¼Œå¹¶è¿›è¡Œä¿®æ”¹(emit äº‹ä»¶æ˜¯ä¿®æ”¹ Webpack è¾“å‡ºèµ„æºçš„æœ€åæ—¶æœº)</li><li>watch-run å½“ä¾èµ–çš„æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘</li></ul></li><li>å¼‚æ­¥çš„äº‹ä»¶éœ€è¦åœ¨æ’ä»¶å¤„ç†å®Œä»»åŠ¡æ—¶è°ƒç”¨å›è°ƒå‡½æ•°é€šçŸ¥ Webpack è¿›å…¥ä¸‹ä¸€ä¸ªæµç¨‹ï¼Œä¸ç„¶ä¼šå¡ä½</li></ul><h4 id="BabelåŸç†"><a href="#BabelåŸç†" class="headerlink" title="BabelåŸç†"></a>BabelåŸç†</h4><p>å¤§å¤šæ•°JavaScript Parseréµå¾ª estree è§„èŒƒï¼ŒBabel æœ€åˆåŸºäº acorn é¡¹ç›®(è½»é‡çº§ç°ä»£ JavaScript è§£æå™¨) Babelå¤§æ¦‚åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼š</p><ul><li>è§£æï¼šå°†ä»£ç è½¬æ¢æˆ AST è¯­æ³•æ ‘<ul><li>è¯æ³•åˆ†æï¼šå°†ä»£ç (å­—ç¬¦ä¸²)åˆ†å‰²ä¸ºtokenæµï¼Œå³è¯­æ³•å•å…ƒæˆçš„æ•°ç»„</li><li>è¯­æ³•åˆ†æï¼šåˆ†ætokenæµ(ä¸Šé¢ç”Ÿæˆçš„æ•°ç»„)å¹¶ç”Ÿæˆ AST</li></ul></li><li>è½¬æ¢ï¼šè®¿é—® AST çš„èŠ‚ç‚¹è¿›è¡Œå˜æ¢æ“ä½œç”Ÿäº§æ–°çš„ AST</li><li>ç”Ÿæˆï¼šä»¥æ–°çš„ AST ä¸ºåŸºç¡€ç”Ÿæˆä»£ç </li></ul><h4 id="source-Map-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#source-Map-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="source Map æ˜¯ä»€ä¹ˆï¼Ÿ"></a>source Map æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>source map æ˜¯å°†ç¼–è¯‘ã€æ‰“åŒ…ã€å‹ç¼©åçš„ä»£ç æ˜ å°„å›æºä»£ç çš„è¿‡ç¨‹ã€‚æ‰“åŒ…å‹ç¼©åçš„ä»£ç ä¸å…·å¤‡è‰¯å¥½çš„å¯è¯»æ€§ï¼Œæƒ³è¦è°ƒè¯•æºç å°±éœ€è¦ soucre mapã€‚<br>mapæ–‡ä»¶åªè¦ä¸æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šåŠ è½½çš„ã€‚<br>çº¿ä¸Šç¯å¢ƒä¸€èˆ¬æœ‰ä¸‰ç§å¤„ç†æ–¹æ¡ˆï¼š</p><p>hidden-source-mapï¼šå€ŸåŠ©ç¬¬ä¸‰æ–¹é”™è¯¯ç›‘æ§å¹³å° Sentry ä½¿ç”¨<br>nosources-source-mapï¼šåªä¼šæ˜¾ç¤ºå…·ä½“è¡Œæ•°ä»¥åŠæŸ¥çœ‹æºä»£ç çš„é”™è¯¯æ ˆã€‚å®‰å…¨æ€§æ¯” sourcemap é«˜<br>sourcemapï¼šé€šè¿‡ nginx è®¾ç½®å°† .map æ–‡ä»¶åªå¯¹ç™½åå•å¼€æ”¾(å…¬å¸å†…ç½‘)</p><p>æ³¨æ„ï¼šé¿å…åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ inline- å’Œ eval-ï¼Œå› ä¸ºå®ƒä»¬ä¼šå¢åŠ  bundle ä½“ç§¯å¤§å°ï¼Œå¹¶é™ä½æ•´ä½“æ€§èƒ½ã€‚</p><h4 id="ä»£ç å‹ç¼©"><a href="#ä»£ç å‹ç¼©" class="headerlink" title="ä»£ç å‹ç¼©"></a>ä»£ç å‹ç¼©</h4><p>ä»£ç åˆ†å‰²çš„æœ¬è´¨å…¶å®å°±æ˜¯åœ¨æºä»£ç ç›´æ¥ä¸Šçº¿å’Œæ‰“åŒ…æˆå”¯ä¸€è„šæœ¬main.bundle.jsè¿™ä¸¤ç§æç«¯æ–¹æ¡ˆä¹‹é—´çš„ä¸€ç§æ›´é€‚åˆå®é™…åœºæ™¯çš„ä¸­é—´çŠ¶æ€ã€‚<br>ã€Œç”¨å¯æ¥å—çš„æœåŠ¡å™¨æ€§èƒ½å‹åŠ›å¢åŠ æ¥æ¢å–æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ã€<br>æºä»£ç ç›´æ¥ä¸Šçº¿ï¼šè™½ç„¶è¿‡ç¨‹å¯æ§ï¼Œä½†æ˜¯httpè¯·æ±‚å¤šï¼Œæ€§èƒ½å¼€é”€å¤§ã€‚<br>æ‰“åŒ…æˆå”¯ä¸€è„šæœ¬ï¼šä¸€æŠŠæ¢­å®Œè‡ªå·±çˆ½ï¼ŒæœåŠ¡å™¨å‹åŠ›å°ï¼Œä½†æ˜¯é¡µé¢ç©ºç™½æœŸé•¿ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚</p><br/>]]></content>
      
      
      
        <tags>
            
            <tag> å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSå¸¸ç”¨çš„å¾ªç¯éå†</title>
      <link href="/post/5ef4056b.html"/>
      <url>/post/5ef4056b.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ•°ç»„éå†"><a href="#æ•°ç»„éå†" class="headerlink" title="æ•°ç»„éå†"></a>æ•°ç»„éå†</h3><h4 id="for-ã€forEachã€forâ€¦of"><a href="#for-ã€forEachã€forâ€¦of" class="headerlink" title="for ã€forEachã€forâ€¦of"></a>for ã€forEachã€forâ€¦of</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, , <span class="number">10</span>, <span class="number">11</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = list.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (list[i] === <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 1 2 3 4</span></span><br><span class="line">        <span class="comment">// continue; // 1 2 3 4 6 7 8 undefined 10 11</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(list[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (item === <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 1 2 3 4</span></span><br><span class="line">        <span class="comment">// continue; // 1 2 3 4 6 7 8 undefined 10 11</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item === <span class="number">5</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(index); <span class="comment">// 0 1 2 3 5 6 7 9 10</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// 1 2 3 4 6 7 8 9 10</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><span id="more"></span><p><strong>å°ç»“</strong></p><ul><li>è¿™ä¸‰ç§å¾ªç¯éƒ½æ˜¯ä»å·¦åˆ°å³éå†æ•°ç»„;</li><li><strong>forEach</strong> æ— æ³•è·³å‡ºå¾ªç¯ï¼›<strong>for</strong> å’Œ <strong>forâ€¦of</strong> å¯ä»¥ä½¿ç”¨ <strong>break</strong> æˆ–è€… <strong>countinue</strong> è·³å‡ºå¾ªç¯æˆ–ä¸­æ–­å¾ªç¯;</li><li><strong>forâ€¦of</strong> ç›´æ¥è®¿é—®çš„æ˜¯å®é™…å…ƒç´ ã€‚<strong>for</strong> éå†æ•°ç»„ç´¢å¼•ï¼Œ<strong>forEach</strong> å›è°ƒå‡½æ•°å‚æ•°æ›´ä¸°å¯Œï¼Œå…ƒç´ ã€ç´¢å¼•ã€åŸæ•°ç»„éƒ½å¯ä»¥è·å–;</li><li><strong>forâ€¦of</strong> ä¸ <strong>for</strong> å¦‚æœæ•°ç»„ä¸­å­˜åœ¨ç©ºå…ƒç´ ï¼ŒåŒæ ·ä¼šæ‰§è¡Œ;</li></ul><h4 id="someã€every"><a href="#someã€every" class="headerlink" title="someã€every"></a>someã€every</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;å¤´éƒ¨å¯¼èˆª&quot;</span>, <span class="attr">backward</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;è½®æ’­&quot;</span>, <span class="attr">backward</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">backward</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> someBackward = list.<span class="title function_">some</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">backward</span>);</span><br><span class="line"><span class="comment">// someBackward: true</span></span><br><span class="line"><span class="keyword">const</span> everyNewest = list.<span class="title function_">every</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> !item.<span class="property">backward</span>);</span><br><span class="line"><span class="comment">// everyNewest: false</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>äºŒè€…éƒ½æ˜¯ç”¨æ¥åšæ•°ç»„æ¡ä»¶åˆ¤æ–­çš„ï¼Œéƒ½æ˜¯è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼;</li><li>äºŒè€…éƒ½å¯ä»¥è¢«ä¸­æ–­;</li><li><strong>some</strong> è‹¥æŸä¸€å…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› trueï¼Œå¾ªç¯ä¸­æ–­ï¼›æ‰€æœ‰å…ƒç´ ä¸æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› false;</li><li><strong>every</strong> è‹¥æœ‰ä¸€å…ƒç´ ä¸æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› falseï¼Œå¾ªç¯ä¸­æ–­ï¼›æ‰€æœ‰å…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› true;</li></ul><h4 id="filterã€map"><a href="#filterã€map" class="headerlink" title="filterã€map"></a>filterã€map</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;å¤´éƒ¨å¯¼èˆª&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;nav&quot;</span>, <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    ,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;è½®æ’­&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;content&quot;</span>, <span class="attr">id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;nav&quot;</span>, <span class="attr">id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> resultList = list.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">    <span class="keyword">return</span> item.<span class="property">type</span> === <span class="string">&quot;nav&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// resultList: [</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;å¤´éƒ¨å¯¼èˆª&#x27;, type: &#x27;nav&#x27;, id: 1 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;é¡µè„š&#x27;, type: &#x27;nav&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newList = list.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">    <span class="keyword">return</span> item.<span class="property">id</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// newList: [1, empty, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// list: [</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;å¤´éƒ¨å¯¼èˆª&#x27;, type: &#x27;nav&#x27;, id: 1 &#125;,</span></span><br><span class="line"><span class="comment">//   empty,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;è½®æ’­&#x27;, type: &#x27;content&#x27;, id: 2 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;é¡µè„š&#x27;, type: &#x27;nav&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>äºŒè€…éƒ½æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œéƒ½ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼ˆä¸åŒ…æ‹¬éå†å¯¹è±¡æ•°ç»„æ˜¯ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­æ“ä½œå…ƒç´ å¯¹è±¡ï¼‰;</li><li>äºŒè€…éƒ½ä¼šè·³è¿‡ç©ºå…ƒç´ ;</li><li><strong>map</strong> ä¼šå°†å›è°ƒå‡½æ•°çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸åŸæ•°ç»„ä¸€è‡´;</li><li><strong>filter</strong> ä¼šå°†ç¬¦åˆå›è°ƒå‡½æ•°æ¡ä»¶çš„å…ƒç´ ç»„æˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸åŸæ•°ç»„ä¸åŒ;</li><li><strong>map</strong> ç”Ÿæˆçš„æ–°æ•°ç»„å…ƒç´ æ˜¯å¯è‡ªå®šä¹‰;</li><li><strong>filter</strong> ç”Ÿæˆçš„æ–°æ•°ç»„å…ƒç´ ä¸å¯è‡ªå®šä¹‰ï¼Œä¸å¯¹åº”åŸæ•°ç»„å…ƒç´ ä¸€è‡´;</li></ul><h4 id="findã€findIndex"><a href="#findã€findIndex" class="headerlink" title="findã€findIndex"></a>findã€findIndex</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;å¤´éƒ¨å¯¼èˆª&quot;</span>, <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;è½®æ’­&quot;</span>, <span class="attr">id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> result = list.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">id</span> === <span class="number">3</span>);</span><br><span class="line"><span class="comment">// result: &#123; name: &#x27;é¡µè„š&#x27;, id: 3 &#125;</span></span><br><span class="line">result.<span class="property">name</span> = <span class="string">&quot;åº•éƒ¨å¯¼èˆª&quot;</span>;</span><br><span class="line"><span class="comment">// list: [</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;å¤´éƒ¨å¯¼èˆª&#x27;, id: 1 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;è½®æ’­&#x27;, id: 2 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;åº•éƒ¨å¯¼èˆª&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;é¡µè„š&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> index = list.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">id</span> === <span class="number">3</span>);</span><br><span class="line"><span class="comment">// index: 2</span></span><br><span class="line">list[index].<span class="property">name</span>; <span class="comment">// &#x27;åº•éƒ¨å¯¼èˆª&#x27;;</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>äºŒè€…éƒ½æ˜¯ç”¨æ¥æŸ¥æ‰¾æ•°ç»„å…ƒç´ ;</li><li><strong>find</strong> æ–¹æ³•è¿”å›æ•°ç»„ä¸­æ»¡è¶³ callback å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚å¦‚æœä¸å­˜åœ¨è¿”å› undefined;</li><li><strong>findIndex</strong> å®ƒè¿”å›æ•°ç»„ä¸­æ‰¾åˆ°çš„å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯å…¶å€¼ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å› -1;</li></ul><h3 id="å¯¹è±¡éå†"><a href="#å¯¹è±¡éå†" class="headerlink" title="å¯¹è±¡éå†"></a>å¯¹è±¡éå†</h3><h4 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">fun</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="number">2</span>: <span class="string">&quot;a&quot;</span>, <span class="number">1</span>: <span class="string">&quot;b&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i, <span class="string">&quot;:&quot;</span>, obj[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1: b</span></span><br><span class="line"><span class="comment">// 2: a</span></span><br><span class="line"><span class="comment">// fun : () =&gt; &#123;&#125; Object åŸå‹é“¾ä¸Šæ‰©å±•çš„æ–¹æ³•ä¹Ÿè¢«éå†å‡ºæ¥for (const i in obj) &#123;  if (Object.prototype.hasOwnProperty.call(obj, i)) &#123;      console.log(i, &#x27;:&#x27;, obj[i]);    &#125;&#125;</span></span><br><span class="line"><span class="comment">// name : a ä¸å±äºè‡ªèº«çš„å±æ€§å°†è¢« hasOwnProperty è¿‡æ»¤</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>ä½¿ç”¨ <strong>for in</strong> å¾ªç¯æ—¶ï¼Œè¦æ³¨æ„è¿”å›çš„æ˜¯æ‰€æœ‰èƒ½å¤Ÿé€šè¿‡å¯¹è±¡è®¿é—®çš„ã€å¯æšä¸¾çš„å±æ€§ï¼Œæ—¢åŒ…æ‹¬å­˜åœ¨äºå®ä¾‹ä¸­çš„å±æ€§ï¼Œä¹ŸåŒ…æ‹¬å­˜åœ¨äºåŸå‹ä¸­çš„å®ä¾‹ã€‚å¦‚æœåªéœ€è¦è·å–å¯¹è±¡å®ä¾‹ä¸­çš„å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ <strong>hasOwnProperty</strong> è¿›è¡Œè¿‡æ»¤;</li><li>ä½¿ç”¨æ—¶ï¼Œè¦ä½¿ç”¨ <strong>(const x in a)</strong> è€Œä¸æ˜¯ <strong>(x in a)</strong> ï¼Œåè€…å°†ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡;</li></ul><h4 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys"></a>Object.keys</h4><ul><li>ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å¯æšä¸¾çš„å±æ€§å€¼ï¼Œä½†ä¸åŒ…æ‹¬åŸå‹ä¸­çš„å±æ€§ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”±å±æ€§åç»„æˆçš„æ•°ç»„;</li><li>è¯¥å¯¹è±¡å¯ä»¥æ˜¯ æ•°ç»„<strong>Array</strong>ã€å¯¹è±¡<strong>Object</strong>ã€å­—ç¬¦ä¸²<strong>String</strong>;</li><li>å½“è¯¥å¯¹è±¡ä¸º å­—ç¬¦ä¸²<strong>String</strong> æ—¶ï¼Œåœ¨ ES5 é‡Œï¼Œå®ƒä¼šæŠ›å‡º TypeErrorã€‚åœ¨ ES2015 ä¸­ï¼Œéå¯¹è±¡çš„å‚æ•°å°†è¢«å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡;</li></ul><h4 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values"></a>Object.values</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> an_obj = &#123; <span class="number">100</span>: <span class="string">&quot;a&quot;</span>, <span class="number">2</span>: <span class="string">&quot;b&quot;</span>, <span class="number">7</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">values</span>(an_obj));</span><br><span class="line"><span class="comment">// [&#x27;b&#x27;, &#x27;c&#x27;, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure><ul><li>ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å¯æšä¸¾çš„å±æ€§å€¼ï¼Œä½†ä¸åŒ…æ‹¬åŸå‹ä¸­çš„å±æ€§ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”±å±æ€§å€¼ç»„æˆçš„æ•°ç»„;</li><li>å½“ obj çš„å¯ä»¥å€¼ä¸ºæ•°å­—æ—¶ï¼Œè¿”å›é¡ºåºæŒ‰ç…§æ•°å­—å¤§å°ä»å°åˆ°å¤§è¿”å›</li><li>åŒä¸Š</li></ul><h4 id="Object-entrise"><a href="#Object-entrise" class="headerlink" title="Object.entrise"></a>Object.entrise</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)); <span class="comment">// [ [&#x27;foo&#x27;, &#x27;bar&#x27;], [&#x27;baz&#x27;, 42] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="number">0</span>: <span class="string">&quot;a&quot;</span>, <span class="number">1</span>: <span class="string">&quot;b&quot;</span>, <span class="number">2</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)); <span class="comment">// [ [&#x27;0&#x27;, &#x27;a&#x27;], [&#x27;1&#x27;, &#x27;b&#x27;], [&#x27;2&#x27;, &#x27;c&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object with random key ordering</span></span><br><span class="line"><span class="keyword">const</span> anObj = &#123; <span class="number">100</span>: <span class="string">&quot;a&quot;</span>, <span class="number">2</span>: <span class="string">&quot;b&quot;</span>, <span class="number">7</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(anObj)); <span class="comment">// [ [&#x27;2&#x27;, &#x27;b&#x27;], [&#x27;7&#x27;, &#x27;c&#x27;], [&#x27;100&#x27;, &#x27;a&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// non-object argument will be coerced to an object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="string">&quot;foo&quot;</span>)); <span class="comment">// [ [&#x27;0&#x27;, &#x27;f&#x27;], [&#x27;1&#x27;, &#x27;o&#x27;], [&#x27;2&#x27;, &#x27;o&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iterate through key-value gracefully</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">5</span>, <span class="attr">b</span>: <span class="number">7</span>, <span class="attr">c</span>: <span class="number">9</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span> <span class="subst">$&#123;value&#125;</span>`</span>); <span class="comment">// &quot;a 5&quot;, &quot;b 7&quot;, &quot;c 9&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames"></a>Object.getOwnPropertyNames</h4><p>ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å¯æšä¸¾çš„å±æ€§å€¼ï¼Œä½†ä¸åŒ…æ‹¬åŸå‹ä¸­çš„å±æ€§ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”±å±æ€§åç»„æˆçš„æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">fun</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyNames</span>(obj));</span><br><span class="line"><span class="comment">// [&quot;a&quot;, &quot;b&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="é¢è¯•è€ƒç‚¹"><a href="#é¢è¯•è€ƒç‚¹" class="headerlink" title="é¢è¯•è€ƒç‚¹"></a>é¢è¯•è€ƒç‚¹</h4><ol><li>for ã€for in ã€forâ€¦of ã€ forEach çš„åŒºåˆ«</li><li>Object.keys ã€ Object.values</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºç”¨æˆ·æˆæƒåˆåŒå’æ”¹äº†</title>
      <link href="/post/80bad882.html"/>
      <url>/post/80bad882.html</url>
      
        <content type="html"><![CDATA[<p>ä¸ºäº†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå°ç¨‹åºå¹³å°åˆåŒå’æ”¹äº†ï¼Œæ­¤æ¬¡æ”¹åŠ¨åˆæ¶‰åŠåˆ°å“ªäº›apiå‘¢ï¼Ÿ</p><span id="more"></span><h4 id="è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹"><a href="#è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹" class="headerlink" title="è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹"></a>è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹</h4><p>æ—©åœ¨å»å¹´2æœˆä»½ï¼Œå°ç¨‹åºç¤¾åŒºé‡Œå°±å‘å¸ƒç›¸å…³å…¬å‘Š: <a href="https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801">ã€Šå°ç¨‹åºç™»å½•ã€ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ¥å£è°ƒæ•´è¯´æ˜ã€‹</a><br>å¤§è‡´å†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š</p><ol><li>å¢åŠ é€šè¿‡wx.loginæ¥å£è·å–çš„ç™»å½•å‡­è¯å¯ç›´æ¥æ¢å–unionID: <a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/login/auth.code2Session.html">auth.code2Sessionè¯´æ˜æ–‡æ¡£</a> <!-- éœ€è¦æ³¨æ„çš„æ˜¯: æ—©åœ¨[2018å¹´å®˜æ–¹å…¬å‘Š](https://developers.weixin.qq.com/community/develop/doc/000c2424654c40bd9c960e71e5b009?highline=getUserInfo)ä¸­å°±å·²ç»æœ‰äº†ä»¥ä¸‹è¯´æ˜ï¼š  > è‹¥ç”¨æˆ·æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œåˆ™å¯ä»¥ç”¨wx.login è·å–åˆ°çš„codeç›´æ¥æ¢åˆ°unionId --></li><li>åŸ<code>&lt;button open-type=&quot;getUserInfo&quot;/&gt;</code>è·å–ç”¨æˆ·çœŸå®ä¸ªäººä¿¡æ¯çš„èƒ½åŠ›å–æ¶ˆï¼Œè¿”å›åŒ¿åä¿¡æ¯ã€‚è·å–openIDä¸unionIDèƒ½åŠ›ä¸åšè°ƒæ•´ã€‚<!-- éœ€è¦æ³¨æ„çš„æ˜¯: æ—©åœ¨[2018å¹´å®˜æ–¹å…¬å‘Š](https://developers.weixin.qq.com/community/develop/doc/000c2424654c40bd9c960e71e5b009?highline=getUserInfo)ä¸­å°±å·²ç»æœ‰äº†ä»¥ä¸‹è¯´æ˜ï¼š  > è‹¥ç”¨æˆ·æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œåˆ™å¯ä»¥ç”¨wx.login è·å–åˆ°çš„codeç›´æ¥æ¢åˆ°unionId --></li><li>æ–°å¢getUserProfileæ¥å£ï¼Œ<code>&lt;button bindtap=&quot;getUserProfile&quot;&gt;&lt;/button&gt;</code>è§¦å‘ï¼Œå¯è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¤´åƒã€æ˜µç§°ã€æ€§åˆ«ï¼‰ï¼Œç”¨æˆ·åŠ å¯†æ•°æ®ï¼Œæ¯æ¬¡è§¦å‘éƒ½ä¼šå¼¹æ¡†ã€‚</li></ol><font size=2>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæˆªæ­¢2021.04.09æ—¥ï¼Œ[wx.getUserProfile](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html) åœ¨å¼€å‘è€…å·¥å…·è°ƒè¯•ä¸­ï¼ŒåŸºç¡€åº“`2.15.0`åŠä»¥ä¸‹ç‰ˆæœ¬åªè¿”å›ç”¨æˆ·ä¿¡æ¯ï¼Œåœ¨åŸºç¡€åº“`2.16.0`ç‰ˆæœ¬å¢åŠ è¿”å›`encryptedData`ç­‰ç”¨æˆ·åŠ å¯†æ•°æ®ï¼Œæ‰€ä»¥å¼€å‘è€…ä¸€å®šè¦è®°å¾—å°†åŸºç¡€åº“ç‰ˆæœ¬è®¾ç½®ä¸º2.16.0</font><h4 id="getUserProfileä½¿ç”¨"><a href="#getUserProfileä½¿ç”¨" class="headerlink" title="getUserProfileä½¿ç”¨"></a>getUserProfileä½¿ç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wxml æ–¹æ³•åç§°éšæ„ï¼Œä¸€å®šè¦ç”¨buttonæŒ‰é’®è§¦å‘</span></span><br><span class="line">&lt;button bindtap=<span class="string">&quot;getUserProfile&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// js</span></span><br><span class="line"><span class="title function_">getUserProfile</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">      <span class="attr">desc</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œåç»­ä¼šå±•ç¤ºåœ¨å¼¹çª—ä¸­ï¼Œè¯·è°¨æ…å¡«å†™</span></span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">userInfo</span>: res.<span class="property">userInfo</span> <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…¼å®¹å®ç°"><a href="#å…¼å®¹å®ç°" class="headerlink" title="å…¼å®¹å®ç°"></a>å…¼å®¹å®ç°</h4><p>é€šè¿‡ä¸Šé¢çš„è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä»¥ä¸‹ï¼š <code>wx.login + wx.getUserProfile == wx.getUserInfo</code><br>ç”±äºç”¨æˆ·å¾®ä¿¡ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä½ç‰ˆæœ¬çš„å¾®ä¿¡ä¹Ÿä¸æ”¯æŒwx.getUserProfileï¼ˆ7.0.9ä»¥ä¸Šæ”¯æŒï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é’ˆå¯¹è¿™ç§æƒ…å†µåšå‡ºå…¼å®¹å¤„ç†ï¼Œé€šè¿‡åˆ¤æ–­ wx.getUserProfile æ˜¯å¦å­˜åœ¨æ¥å†³å®šé‡‡ç”¨å“ªç§æˆæƒæ–¹æ¡ˆ<br><font size=2>wxmlä»£ç å¦‚ä¸‹</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;container&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;userinfo&quot;&gt;</span><br><span class="line">    &lt;block wx:if=&quot;&#123;&#123;!hasUserInfo&#125;&#125;&quot;&gt;</span><br><span class="line">      &lt;button wx:if=&quot;&#123;&#123;canIUseGetUserProfile&#125;&#125;&quot; bindtap=&quot;getUserProfile&quot;&gt; è·å–å¤´åƒæ˜µç§° &lt;/button&gt;</span><br><span class="line">      &lt;button wx:else open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;getUserInfo&quot;&gt; è·å–å¤´åƒæ˜µç§° &lt;/button&gt;</span><br><span class="line">    &lt;/block&gt;</span><br><span class="line">    &lt;block wx:else&gt;</span><br><span class="line">      &lt;image bindtap=&quot;bindViewTap&quot; class=&quot;userinfo-avatar&quot; src=&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot; mode=&quot;cover&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;text class=&quot;userinfo-nickname&quot;&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt;</span><br><span class="line">    &lt;/block&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p><font size=2>jsä»£ç å¦‚ä¸‹</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    userInfo: &#123;&#125;,</span><br><span class="line">    hasUserInfo: false,</span><br><span class="line">    canIUseGetUserProfile: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad() &#123;</span><br><span class="line">    if (wx.getUserProfile) &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        canIUseGetUserProfile: true</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getUserProfile(e) &#123;</span><br><span class="line">    // æ¨èä½¿ç”¨wx.getUserProfileè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå¼€å‘è€…æ¯æ¬¡é€šè¿‡è¯¥æ¥å£è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯å‡éœ€ç”¨æˆ·ç¡®è®¤</span><br><span class="line">    // å¼€å‘è€…å¦¥å–„ä¿ç®¡ç”¨æˆ·å¿«é€Ÿå¡«å†™çš„å¤´åƒæ˜µç§°ï¼Œé¿å…é‡å¤å¼¹çª—</span><br><span class="line">    wx.getUserProfile(&#123;</span><br><span class="line">      desc: &#x27;ç”¨äºå®Œå–„ä¼šå‘˜èµ„æ–™&#x27;, // å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œåç»­ä¼šå±•ç¤ºåœ¨å¼¹çª—ä¸­ï¼Œè¯·è°¨æ…å¡«å†™</span><br><span class="line">      success: (res) =&gt; &#123;</span><br><span class="line">        console.log(res)</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          userInfo: res.userInfo,</span><br><span class="line">          hasUserInfo: true</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  getUserInfo(e) &#123;</span><br><span class="line">    // ä¸æ¨èä½¿ç”¨getUserInfoè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œé¢„è®¡è‡ª2021å¹´4æœˆ13æ—¥èµ·ï¼ŒgetUserInfoå°†ä¸å†å¼¹å‡ºå¼¹çª—ï¼Œå¹¶ç›´æ¥è¿”å›åŒ¿åçš„ç”¨æˆ·ä¸ªäººä¿¡æ¯</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      userInfo: e.detail.userInfo,</span><br><span class="line">      hasUserInfo: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºç”¨æˆ·å¤´åƒã€æ˜µç§°ç­‰ä¿¡æ¯ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹åˆ—æ–¹å¼è¿›è¡Œå¤„ç†</p><ol><li>å‰ç«¯è°ƒç”¨wx.getUserProfileåï¼Œå°†ç”¨æˆ·ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°</li><li>å‰ç«¯è°ƒç”¨wx.getUserProfileåï¼Œå°†ç”¨æˆ·ä¿¡æ¯å‘é€ç»™åç«¯ï¼Œä¸ç”¨æˆ·ä¿¡æ¯ç»‘å®šåœ¨ä¸€èµ·<br><font size="2">æ³¨ï¼šåœ¨æ­¤å¤„æ¨èæ–¹æ³•2ï¼Œè¿™æ ·ä¸€æ¥ç”¨æˆ·åœ¨pcç«¯æ‰“å¼€å°ç¨‹åºä¹Ÿå¯ä»¥ç›´æ¥ä»åç«¯è·å–å¤´åƒï¼Œè€Œä¸éœ€è¦å†æ¬¡æˆæƒ</font></li></ol><h4 id="åæ§½"><a href="#åæ§½" class="headerlink" title="åæ§½"></a>åæ§½</h4><ul><li>æŒ‰ç…§ç›®å‰å®˜æ–¹çš„æ–‡æ¡£è¯´æ˜å’Œå…¬å‘Šï¼Œwx.getUserProfileå’Œwx.getUserInfoçš„åŒºåˆ«åªåœ¨äºå¼¹æ¡†è§¦å‘çš„é¢‘ç‡ï¼Œå‰è€…è§¦å‘çš„æ—¶å€™æ¯æ¬¡éƒ½å¼¹æ¡†ï¼Œåè€…åªä¼šå¼¹æ¡†ä¸€æ¬¡ï¼Œå®åœ¨æ˜¯ä¸ç†è§£ä¸ºä»€ä¹ˆè¦æ–°å¢ä¸€ä¸ªAPIè€Œä¸æ˜¯å¯¹ç°æœ‰çš„è¿›è¡Œä¿®æ”¹</li><li>å®˜æ–¹è¯´æ˜åœ¨4.13å·åŠä¹‹åæäº¤çš„æ­£å¼ç‰ˆå°ç¨‹åºä¸­ï¼Œå°†æ”¯æŒwx.getUserProfileï¼Œwx.getUserInfoå°†è¿”å›åŒ¿åç”¨æˆ·ä¿¡æ¯ï¼Œä½†æ˜¯ï¼Œåœ¨4.2&#x2F;3å·ï¼Œå¾ˆå¤šçº¿ä¸Šçš„å°ç¨‹åºwx.getUserInfoä¹Ÿè¿”å›äº†åŒ¿åæ¶ˆæ¯ï¼Œå¯¼è‡´ç¤¾åŒºå¾ˆå¤šå¼€å‘è€…åé¦ˆçº¿ä¸Šå°ç¨‹åºæ— æ³•è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä»£ç è§„èŒƒ</title>
      <link href="/post/e75acacf.html"/>
      <url>/post/e75acacf.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚ä½†æ˜¯åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œå¾ˆå¤šä¸è§„èŒƒçš„ä½¿ç”¨ï¼Œä½¿å¾— Gitf åˆ†æ”¯æ··ä¹±ï¼Œä»£ç å†²çªéš¾ä»¥è§£å†³ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹ Git æäº¤è§„èŒƒåšä¸€äº›äº†è§£ã€‚</p><span id="more"></span><h5 id="åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š"><a href="#åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š" class="headerlink" title="åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š"></a>åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š</h5><ul><li>æ‹‰å–æœ€æ–°çš„ develop åˆ†æ”¯åˆ°æœ¬åœ°</li><li>åŸºäºæœ€æ–°çš„ develop åˆ†æ”¯æ–°å»ºä½ è‡ªå·±çš„æœ¬åœ°åˆ†æ”¯</li><li>ä¿®æ”¹ä»£ç åï¼Œè¿›è¡Œ commit å’Œ push</li><li>åˆ‡æ¢åˆ° develop åˆ†æ”¯å¹¶æ‹‰å–æœ€æ–°çš„ develop åˆ†æ”¯åˆ°æœ¬åœ°åˆ†æ”¯</li><li>åˆ‡æ¢ä¼šä½ è‡ªå·±çš„æœ¬åœ°åˆ†æ”¯ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ git rebase develop å°†ä½ çš„åˆ†æ”¯å˜æ›´åˆ°æœ€æ–°çš„ develop åˆ†æ”¯</li><li>æ‰§è¡Œ git push -f å¼ºè¡Œæ¨é€ä½ å˜æ›´åçš„åˆ†æ”¯</li><li>åœ¨ Github ä¸Šæ–°å»º Pull Request</li></ul><h3 id="commitè§„èŒƒ"><a href="#commitè§„èŒƒ" class="headerlink" title="commitè§„èŒƒ"></a>commitè§„èŒƒ</h3><p>Commit è§„èŒƒé‡‡ç”¨å¸¸ç”¨çš„ Angular å›¢é˜Ÿæ‰€ä½¿ç”¨çš„è§„èŒƒï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;&lt;scope&gt;: &lt;subject&gt;</span><br><span class="line">&lt;ç©ºè¡Œ&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ç©ºè¡Œ&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure><h4 id="typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰"><a href="#typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰"></a>typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰</h4><p>type ä»£è¡¨æœ¬æ¬¡commit çš„ç±»å‹ï¼Œæœ‰ä¸”ä»…æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><ul><li><strong>feat</strong> - åŠŸèƒ½æ€§æ›´æ–°</li><li><strong>fix</strong> - bugä¿®å¤</li><li><strong>style</strong> - æ”¹å˜ä»£ç æ ¼å¼ï¼ˆå¦‚åˆ é™¤ç©ºè¡Œã€æ ¼å¼åŒ–ä»£ç ã€å»é™¤ä¸å¿…è¦çš„åˆ†å·ç­‰ç­‰ï¼‰</li><li><strong>refactor</strong> - æ—¢ä¸æ˜¯åŠŸèƒ½æ›´æ–°ä¹Ÿä¸æ˜¯ bug ä¿®å¤çš„æ›´æ”¹ï¼ˆå»ºè®®å¯¹ä»£ç è¿›è¡Œé‡æ„çš„æ—¶å€™ä½¿ç”¨ï¼‰</li><li><strong>perf</strong> - ä»£ç æ”¹å˜æé«˜äº†æ€§èƒ½</li><li><strong>test</strong> - æ·»åŠ æµ‹è¯•ç”¨ä¾‹æˆ–è€…ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹</li><li><strong>build</strong> - ç”±æ‰“åŒ…å·¥å…·é€ æˆçš„æ”¹å˜ï¼ˆå¦‚gulpã€webpackç¼–è¯‘æ–‡ä»¶ï¼‰</li><li><strong>chore</strong> - æ—¢ä¸æ˜¯æºç çš„ä¿®æ”¹ï¼Œä¹Ÿä¸æ˜¯æµ‹è¯•ç”¨ä¾‹çš„ä¿®æ”¹ï¼ˆä¿®æ”¹é¡¹ç›®ç›¸å…³é…ç½®æ—¶å¯ä»¥ä½¿ç”¨ï¼‰</li><li><strong>revert</strong> - æ’¤é”€ä¹‹å‰çš„æäº¤</li></ul><h4 id="scope-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"><a href="#scope-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="scope è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"></a>scope è§„åˆ™ï¼ˆå¿…å¡«ï¼‰</h4><p>scope ä»£è¡¨æœ¬æ¬¡ commit çš„å½±å“èŒƒå›´ï¼Œæš‚å®šè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>æœ¬æ¬¡ commit ä¿®æ”¹çš„ç»„ä»¶</li><li>æœ¬æ¬¡ commit ä¿®æ”¹çš„æ–‡ä»¶</li><li>æœ¬æ¬¡ commit ä¿®æ”¹çš„æ–‡ä»¶å¤¹</li></ul><blockquote><p>æ³¨æ„ï¼š</p><ul><li>é€‰å–æ—¶ä»ä¸Šå¾€ä¸‹åŒ¹é…</li><li>ç»„ä»¶åç§°åº”ä½¿ç”¨å¤§å†™å­—å­—æ¯å¼€å¤´ï¼Œå¤šä¸ªå•è¯æ¯ä¸ªå•è¯éƒ½ä»¥å¤§å†™å¼€å¤´</li><li>æ–‡ä»¶ååº”åŒ…å«å®Œæ•´åç¼€ï¼Œå¦‚ index.jsã€.eslintrc.json</li></ul></blockquote><h4 id="subject-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"><a href="#subject-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="subject è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"></a>subject è§„åˆ™ï¼ˆå¿…å¡«ï¼‰</h4><p>ç”¨ä¸€å¥ç®€çŸ­çš„è¯æè¿°æœ¬æ¬¡ä¿®æ”¹çš„å†…å®¹ï¼Œ<strong>ä¸è¦è¶…è¿‡30ä¸ªæ±‰å­—ï¼Œä»¥åŠ¨è¯å¼€å¤´</strong></p><p>å»ºè®®é€‰ç”¨å¦‚ä¸‹åŠ¨è¯ï¼š</p><ul><li>æ–°å¢ï¼ˆç»„ä»¶ã€å±æ€§ã€äº‹ä»¶ã€APIï¼‰</li><li>åˆ é™¤</li><li>ä¿®æ­£</li><li>ä¿®å¤</li><li>ä¿®æ”¹</li></ul><p>æ­£ç¡®ç¤ºä¾‹ï¼š</p><ul><li>æ–°å¢ Collapse ç»„ä»¶</li><li>æ–°å¢ top å±æ€§</li><li>åˆ é™¤ color å±æ€§</li><li>ä¿®å¤ direction å±æ€§ä¸ç”Ÿæ•ˆçš„é—®é¢˜</li><li>ä¿®æ­£ column å±æ€§æ‹¼å†™</li></ul><blockquote><p>æ³¨æ„ï¼š</p><ul><li>subject åº”è¯¥ä»”ç»†æ–Ÿé…Œï¼Œfix å’Œ feat ç±»å‹çš„ commit çš„ subject å°†ä¼šå‡ºç°åœ¨æ›´æ–°æ—¥å¿—ä¸­ï¼Œ</li><li>æ‰€ä»¥ä¹¦å†™æ—¶åº”è€ƒè™‘è¿™å¥è¯å‡ºç°åœ¨æ›´æ–°æ—¥å¿—ä¸­æ˜¯å¦åˆé€‚</li><li>subject ä¸­ä¸è¦åŒ…å«ç»„ä»¶åæˆ–è€…æ–‡ä»¶åï¼Œå› ä¸º scope ä¸­å·²æœ‰å¯¹åº”åç§°</li></ul></blockquote><h4 id="body-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"><a href="#body-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰" class="headerlink" title="body è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"></a>body è§„åˆ™ï¼ˆé€‰å¡«ï¼‰</h4><p>å¦‚æœ subject æ— æ³•å¯¹æœ¬æ¬¡ commit è¿›è¡Œæ¸…æ¥šçš„é˜é‡Šï¼Œåˆ™åœ¨ body ä¸­è¿›è¡Œè¡¥å……è¯´æ˜ã€‚</p><p>å»ºè®®å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>ä¸ºä»€ä¹ˆè¿›è¡Œæœ¬æ¬¡ä¿®æ”¹</li><li>æœ¬æ¬¡ä¿®æ”¹äº†å“ªäº›å†…å®¹</li><li>ä¿®æ”¹åçš„å½±å“æœ‰å“ªäº›</li></ul><blockquote><p>body éœ€è¦æ³¨æ„æ¢è¡Œé—®é¢˜ï¼Œä¸è¦å†™åœ¨ä¸€è¡Œä¸æ¢è¡Œï¼Œå»ºè®®åœ¨50ä¸ªå­—ä»¥å†…è¿›è¡Œæ–­å¥æ¢è¡Œã€‚</p></blockquote><h4 id="footer-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"><a href="#footer-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰" class="headerlink" title="footer è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"></a>footer è§„åˆ™ï¼ˆé€‰å¡«ï¼‰</h4><p>footer ä¸­åªå¡«å†™ä¸¤ç§å†…å®¹ï¼š</p><ul><li><p>è¿™æ¬¡ commit å’ŒæŸä¸ª issue ç›¸å…³è”ï¼Œæäº¤åèƒ½å…³é—­è¯¥ issueï¼Œåˆ™å¡«å†™ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">close #<span class="number">748</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fix #<span class="number">745</span></span><br></pre></td></tr></table></figure></li><li><p>è¿™æ¬¡commitæœ‰ä¸å…¼å®¹ä¸Šä¸ªç‰ˆæœ¬çš„ä»£ç ï¼Œåˆ™ä»¥ BREAKING CHANGE: å¼€å¤´å¡«å†™ä¸å…¼å®¹ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">BREAKING</span> <span class="attr">CHANGE</span>: <span class="title class_">Message</span>ç»„ä»¶topå±æ€§å•ä½ç”±pxæ”¹ä¸ºrpx</span><br></pre></td></tr></table></figure><h4 id="Commit-ç¤ºä¾‹"><a href="#Commit-ç¤ºä¾‹" class="headerlink" title="Commit ç¤ºä¾‹"></a>Commit ç¤ºä¾‹</h4><p>ä¸€ä¸ªå®Œæ•´é—ºæˆ¿ä¸”æ­£ç¡®çš„ Commit ç¤ºä¾‹å¦‚ä¸‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fix</span>(<span class="title class_">NoticeBar</span>)ï¼šä¿®æ”¹topå±æ€§å•ä½ä¸ºrpx</span><br><span class="line"></span><br><span class="line"><span class="title class_">NoticeBar</span>ç»„ä»¶çš„topå±æ€§å•ä½ä¹‹å‰ä¸ºpxï¼Œä¼šå‡ºç°æ— æ³•è‡ªé€‚åº”çš„é—®é¢˜ã€‚</span><br><span class="line">æ›´æ”¹ä¸ºrpxåå¯å¯¹å±å¹•è¿›è¡Œè‡ªé€‚åº”ã€‚</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">BREAKING</span> <span class="attr">CHANGE</span>: <span class="title class_">Notice</span>-<span class="title class_">Bar</span>ç»„ä»¶topå±æ€§å•ä½ç”±pxæ”¹ä¸ºrpx</span><br><span class="line"></span><br><span class="line"><span class="title class_">Close</span> #<span class="number">745</span></span><br></pre></td></tr></table></figure><p>æ¨èä½¿ç”¨ commit è§„èŒƒä¿¡æ¯ç”Ÿæˆæ’ä»¶</p><blockquote><p>æ¨è commit è§„èŒƒä¿¡æ¯ç”Ÿæˆæ’ä»¶</p><ul><li>WebStorm - Git Commit Template</li><li>Vs Code - Commit Tagger</li></ul></blockquote><h4 id="é”™è¯¯ç¤ºä¾‹"><a href="#é”™è¯¯ç¤ºä¾‹" class="headerlink" title="é”™è¯¯ç¤ºä¾‹"></a>é”™è¯¯ç¤ºä¾‹</h4><ol><li>subject æè¿°ä¸­å‡ºç°ç»„ä»¶åç§° <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">feat</span>(<span class="title class_">Button</span>): <span class="title class_">Button</span> ç»„ä»¶æ–°å¢ size å±æ€§</span><br></pre></td></tr></table></figure> å› typeï¼ˆæ‹¬å·ä¸­çš„å†…å®¹ï¼‰å·²ç»æŒ‡å®šäº†ç»„ä»¶ï¼Œæ‰€ä»¥ subject æè¿°ä¿¡æ¯ä¸­æ— éœ€å†æŒ‡æ˜ç»„ä»¶</li><li>å•è¯æœªæ·»åŠ ç©ºæ ¼ <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">feat</span>(<span class="title class_">Button</span>): æ–°å¢sizeå±æ€§</span><br></pre></td></tr></table></figure></li><li>featã€fix ç±»å‹éœ€è¦æ…é‡ä½¿ç”¨ <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">feat</span>(<span class="title class_">Card</span>): æ›´æ–° validator æ ¡éªŒå™¨æ ¡éªŒè§„åˆ™</span><br></pre></td></tr></table></figure> å› ä¸º feat å’Œ fix ç±»å‹çš„ commit ä¿¡æ¯ä¼šå‡ºç°åœ¨ changelog ä¸­ï¼Œæ‰€ä»¥è¦ä¿è¯è¿™æ¡ä¿¡æ¯æ˜¯é¢å‘ç”¨æˆ·çš„ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œå› ä¸º validator ä»…æ˜¯æˆ‘ä»¬è‡ªå·±å†…éƒ¨ä½¿ç”¨ï¼Œå¹¶ä¸é¢å‘ç”¨æˆ·ï¼Œæ‰€ä»¥ç”¨æˆ·å¹¶ä¸å…³å¿ƒè¿™ä¸ªæ ¡éªŒå™¨çš„æ–°å¢åŠŸèƒ½ã€‚å»ºè®®ä½¿ç”¨ chore ä»£æ›¿æ­¤å¤„çš„ featï¼ˆchore çš„æ„æ€æ˜¯çç¢çš„äº‹åŠ¡ï¼‰</li></ol><h4 id="å…¶ä»–äº‹é¡¹"><a href="#å…¶ä»–äº‹é¡¹" class="headerlink" title="å…¶ä»–äº‹é¡¹"></a>å…¶ä»–äº‹é¡¹</h4><p>ä¸€ä¸ªcommitåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ„ä¹‰çš„commit</p><p>æœ‰æ„ä¹‰çš„å®šä¹‰å¦‚ä¸‹ï¼š </p><ul><li>æ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½æˆ–ç»„ä»¶</li><li>ä¿®å¤äº†ä¸€ä¸ªbug</li><li>è§£å†³äº†ä¸€ä¸ªissue</li><li>é‡æ„äº†æŸä¸ªç»„ä»¶æˆ–æ–‡ä»¶</li><li>æ”¹å–„äº†ç°æœ‰ä»£ç çš„æ„å»ºæµç¨‹æˆ–é£æ ¼</li></ul><p>æ— æ„ä¹‰çš„å®šä¹‰å¦‚ä¸‹ï¼š </p><ul><li>ä¸´æ—¶å·¥ä½œè¿›åº¦ä¿å­˜</li><li>è¯¯æäº¤çš„ commit</li><li>commit ä¿¡æ¯ä¸è§„èŒƒæˆ–ç¼ºå¤±</li><li>subject æ— æ³•å‡†ç¡®æè¿°æ­¤æ¬¡ commit</li></ul><blockquote><p>æ³¨æ„ï¼šä¸€ä¸ª commit çš„æäº¤åº”è¯¥ä¿è¯ä»£ç çš„å¯è¿è¡Œæ€§å’Œå®Œæ•´æ€§ã€‚</p><ul><li>å¯è¿è¡Œæ€§ï¼šcommit æäº¤åï¼Œè¿è¡Œä»£ç ä¸èƒ½æŠ¥é”™</li><li>å®Œæ•´æ€§ï¼šcommit æäº¤åï¼Œå½“å‰ä»£ç ä¸­ä¸èƒ½åŒ…å«ç¼ºå¤±çš„åŠŸèƒ½ï¼ˆå¦‚æŸä¸ªåŠŸèƒ½åšäº†ä¸€åŠå°±æäº¤ï¼‰</li></ul></blockquote></li></ul><!-- #### æ‰©å±•é˜…è¯»+ [è™šæ‹ŸDOMæ¸²æŸ“åˆ°çœŸå®DOMçš„å‘¨æœŸä¸ºå¤šä¹…]('')+ [è¿™ä¸ªæ¸²æŸ“å‘¨æœŸåˆæ˜¯ç”±ä»€ä¹ˆæ¥å†³å®šçš„]('') -->]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰åç«¯è·¯ç”±çš„åŒºåˆ«</title>
      <link href="/post/a96b66e8.html"/>
      <url>/post/a96b66e8.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯è·¯ç”±</h3><p>åœ¨åŒºåˆ«å‰åç«¯è·¯ç”±ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹è·¯ç”±çš„æ¦‚å¿µ</p><blockquote><p>ç®€å•æ¥è¯´ï¼Œè·¯ç”±å°±æ˜¯ URL åˆ°å‡½æ•°çš„æ˜ å°„ï¼ˆè¿™ä¸ªå‡½æ•°æ˜¯å¹¿ä¹‰çš„ï¼Œå¯ä»¥ä½¿å‰ç«¯çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯åç«¯çš„å‡½æ•°ï¼‰ã€‚å¯¹äºé™æ€èµ„æºï¼Œå¯ä»¥è®¤ä¸ºæ˜ å°„å‡½æ•°æ˜¯å¯¹æ–‡ä»¶çš„è¯»å–æ“ä½œã€‚å¯¹äºåŠ¨æ€èµ„æºï¼Œåˆ™æ˜¯å¯¹æ•°æ®åº“æ•°æ®çš„å¤„ç†ã€è¯»å–æ“ä½œã€‚</p></blockquote><span id="more"></span><h3 id="ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±</h3><p>åœ¨æ—©æœŸçš„ web å¼€å‘ä¸­ï¼Œåç«¯è·¯ç”±å ä¸»å¯¼åœ°ä½ã€‚åƒæˆ‘ä»¬å¸¸è§çš„ phpã€jsp é¡µé¢ï¼Œç”¨æˆ·åœ¨åœ°å€æ ä¸­è¾“å…¥ URL å¹¶å›è½¦è®¿é—®çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ä¼šæŠŠå¯¹åº”çš„è·¯ç”±å’Œå‚æ•°ä»¥ GET æ–¹å¼å¯¹åç«¯è¿›è¡Œè¯·æ±‚ã€‚åç«¯å†è¿›è¡Œè·¯ç”±åŒ¹é…çš„æ—¶å€™ï¼Œä¸ä»…ä¼šæ ¹æ® URL æ¥åŒ¹é…ï¼Œä¹Ÿä¼šæŸ¥çœ‹è¯·æ±‚æ–¹å¼æ˜¯å¦åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸï¼Œå°†è¿”å›å¯¹åº”çš„é¡µé¢æ¨¡æ¿æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚å¦‚æœè·¯ç”±æ— æ³•åŒ¹é…çš„å¯¹åº”çš„é¡µé¢æ¨¡æ¿ï¼Œåˆ™ä¼šè¿”å› 404 çŠ¶æ€ç ã€‚</p><h3 id="åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"><a href="#åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"></a>åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹</h3><p>åœ¨åç«¯è·¯ç”±çš„æ—¶ä»£ï¼Œç½‘é¡µä¸­çš„ html ä¸€èˆ¬æ˜¯ç”±åç«¯æœåŠ¡å™¨å°†æ•°æ®è¿›è¡Œæ¨¡æ¿æ¸²æŸ“å†è¿”å›ç»™å‰ç«¯ï¼Œè¿™ç§æ¸²æŸ“æ–¹å¼æˆ‘ä»¬ç§°ä¸ºæœåŠ¡å™¨æ¸²æŸ“ã€‚<br>æœåŠ¡å™¨æ¸²æŸ“çš„ä¼˜åŠ¿åœ¨äºå¯¹ SEO å‹å¥½ï¼Œå› ä¸ºæ•°æ®ç”±åç«¯æ¸²æŸ“è¿”å›ï¼Œæ‰€ä»¥å®‰å…¨æ€§æ›´é«˜ã€‚ä½†éšç€ web åº”ç”¨åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼Œéœ€è¦å¤„ç†æ›´å¤šçš„ä¸šåŠ¡é€»è¾‘ï¼Œå•çº¯æœåŠ¡å™¨æ¸²æŸ“çš„å¼Šç«¯ä¹Ÿæ…¢æ…¢æ˜¾éœ²å‡ºæ¥ï¼šå½“éœ€è¦è¿”å›å¤§é‡æ•°æ®æ—¶ï¼Œé¡µé¢ç™½å±æ—¶é—´è¾ƒé•¿ï¼›ä»£ç ç»´æŠ¤éš¾åº¦å¤§ç­‰ç­‰ï¼Œè¿™æ˜¯åœ¨è¿™ç§ç¯å¢ƒçš„è¦æ±‚ä¸‹ï¼Œå‰ç«¯è·¯ç”±æ…¢æ…¢çš„è¿›å…¥äº†äººä»¬çš„è§†çº¿ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±</h3><p>å‰ç«¯è·¯ç”±åˆè¢«ç§°ä¸ºå®¢æˆ·ç«¯è·¯ç”±ï¼Œå› ä¸ºè·¯ç”±çš„åˆ‡æ¢å˜åŒ–ä¸»è¦å‘ç”Ÿåœ¨æµè§ˆå™¨ç«¯ï¼Œè·¯ç”±çš„æ˜ å°„å‡½æ•°é€šå¸¸æ˜¯å¯¹ DOM è¿›è¡Œæ˜¾éšæ“ä½œï¼Œå½“ç”¨æˆ·è®¿é—®ä¸åŒçš„é¡µé¢è·¯å¾„æ—¶ï¼Œå±•ç¤ºä¸åŒçš„é¡µé¢ç»„ä»¶ï¼Œæ¯”å¦‚å‰ç«¯æµè¡Œæ¡†æ¶ vue.jsï¼Œå½“æˆ‘ä»¬æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒçš„ vue é¡¹ç›®æ—¶ï¼Œä¼šå‘ç°ä»–çš„å…¥å£æ–‡ä»¶ index.html ä¸æˆ‘ä»¬æƒ³è±¡ä¸­çš„å¾ˆä¸ä¸€æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;xxxx.xxx.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æœ‰ä½¿ç”¨ vue å¼€å‘è¿‡é¡¹ç›®çš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“ï¼Œvue çš„å•é¡µé¢æŒ‚è½½åœ¨ app ä¸‹ï¼Œè€Œé¡µé¢çš„æ¸²æŸ“å…¶å®æ˜¯é€šè¿‡ js æ–‡ä»¶æ¸²æŸ“å‡ºæ¥çš„ï¼Œè¿™ç§æ¸²æŸ“æ–¹å¼å³æˆ‘ä»¬å¸¸è¯´çš„å‰ç«¯æ¸²æŸ“ã€‚</p><h3 id="å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"><a href="#å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"></a>å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹</h3><p>å‰ç«¯æ¸²æŸ“æŠŠæ•°æ®çš„æ¸²æŸ“ä»»åŠ¡äº¤ç»™äº†æµè§ˆå™¨ï¼Œå°†å¤§çš„ä»»åŠ¡é¢—ç²’åŒ–ï¼Œè¿™æ ·ä¸€æ¥ç¼“è§£äº†æœåŠ¡å™¨çš„å‹åŠ›ï¼Œä½¿å¾—åç«¯åŒå­¦æ›´ä¸“æ³¨äº api çš„æä¾›å’Œæ•°æ®åº“æ“ä½œã€‚å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºå‡å°‘äº†ä¸åç«¯æœåŠ¡å™¨çš„äº¤äº’ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œé¡µé¢åˆ‡æ¢æ—¶ï¼Œç»™ç”¨æˆ·çš„è§‚æ„Ÿä½“éªŒä¼šæ›´å¥½ã€‚ä½†åŒæ—¶ï¼Œå‰ç«¯æ¸²æŸ“ä¹Ÿå¸¦æ¥äº†ä¸€äº›å¼Šç«¯ã€‚<br>ç”±äºå‰åç«¯æ•°æ®åˆ†ç¦»ï¼Œå‰ç«¯è´Ÿè´£é¡µé¢æ ·å¼å’Œæ•°æ®æ¸²æŸ“ï¼Œåç«¯åªè´Ÿè´£è¿”å›æ•°æ®ï¼Œå¯¼è‡´çˆ¬è™«æ— æ³•çˆ¬å–åˆ°æœ‰æ•ˆçš„æ•°æ®ï¼Œå¯¹ SEO ä¸å‹å¥½ã€‚</p><p><strong>åœ¨ä½¿ç”¨å‰ç«¯è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æ˜¯</strong></p><ul><li>åœ°å€æ è¾“å…¥ URL å¹¶å›è½¦è®¿é—®ï¼Œä¾æ—§ä¼šå‘åç«¯æœåŠ¡å™¨å‘èµ· GET è¯·æ±‚ã€‚å¦‚æœç”±é¡µé¢ä¸­çš„ç‚¹å‡»æˆ–è€…é€šè¿‡å‰ç«¯æ¡†æ¶çš„ api è¿›è¡Œè·¯ç”±è·³è½¬åˆ™ä¸ä¼šå‘åç«¯å‘èµ·è¯·æ±‚</li><li>å‡¡æ˜¯åœ¨æµè§ˆå™¨åœ°å€æ é‡Œå¯¹ URL è¿›è¡Œæ“ä½œéƒ½ä¼šå¯¹åç«¯æœåŠ¡å™¨å‘èµ·è¯·æ±‚</li></ul><h3 id="å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼"><a href="#å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼" class="headerlink" title="å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼"></a>å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼</h3><ul><li>hash æ¨¡å¼</li><li>history æ¨¡å¼</li></ul><p><strong>Hash æ¨¡å¼</strong></p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œhash è·¯ç”±æœ€æ˜æ˜¾çš„ç‰¹å¾å°±æ˜¯è·¯ç”±ä¸­çš„â€œ#â€ç¬¦å·ï¼Œå¾ˆç‰¹åˆ«ï¼Œä½†ä¹Ÿå¾ˆä¸ç¾è§‚ã€‚<br>ä¾‹å¦‚ï¼š<strong>http&#x2F;&#x2F;abc.com&#x2F;#&#x2F;xx</strong>ï¼Œè¯¥è·¯ç”±ä¸­çš„ hash å€¼ä¸ºâ€œ#&#x2F;xxâ€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ hashchange äº‹ä»¶ï¼Œç›‘å¬ hash å€¼çš„å˜åŒ–ã€‚<br>hash æ¨¡å¼åˆ©ç”¨çš„æ˜¯æµè§ˆå™¨ä¸ä¼šå°†#ç¬¦å·åé¢çš„è·¯å¾„åŠå‚æ•°å¯¹æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//localhost/</span></span><br><span class="line"><span class="attr">http</span>:<span class="comment">//localhost/#/user/1</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªè·¯ç”±åƒæœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œéƒ½æ˜¯è¯·æ±‚çš„ http&#x2F;&#x2F;localhost é¡µé¢çš„å†…å®¹ã€‚<br>å‰ç«¯çš„è·¯ç”±ç®¡ç†é€šè¿‡ä¸Šé¢æåˆ°çš„ hashchange äº‹ä»¶å¯¹ hash å€¼çš„å˜åŒ–è¿›è¡Œç›‘å¬ï¼Œè¿›è¡Œæ¸²æŸ“å¯¹åº”çš„é¡µé¢ï¼Œè¿™æ ·è·¯ç”±çš„å¤„ç†ã€åˆ‡æ¢å°±åªæ˜¯ç”±å‰ç«¯æ¥ç»§ç»­é€»è¾‘åˆ¤æ–­äº†</p><p><strong>history æ¨¡å¼</strong></p><p>ç›¸è¾ƒäº Hash æ¨¡å¼ï¼Œhistory æ¨¡å¼çš„è·¯ç”±æœ€æ˜æ˜¾çš„å˜åŒ–å°±æ˜¯å»æ‰äº†å…¶ä¸­çš„#ç¬¦å·ï¼Œè·Ÿæˆ‘ä»¬å¸¸è§çš„ URL è·¯ç”±æ²¡ä»€ä¹ˆä¸¤æ ·äº†ã€‚<br>history æ¨¡å¼çš„è·¯ç”±åˆ‡æ¢ä¸»è¦æ˜¯é€šè¿‡ HTML5 æä¾›çš„ history api å®ç°çš„ã€‚</p><p>ä¸¤ä¸ªæ“ä½œå†å²æ ˆçš„ api æœ‰ history.pushState å’Œ history.replaceState<br><strong>history.pushState();</strong> &#x2F;&#x2F; å‘å†å²è®°å½•ä¸­è¿½åŠ ä¸€æ¡è®°å½•<br><strong>history.replaceState();</strong> &#x2F;&#x2F; æ›¿æ¢å½“å‰é¡µåœ¨å†å²è®°å½•ä¸­çš„ä¿¡æ¯ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒHTML5 è¿˜åœ¨ window å¯¹è±¡ä¸­æä¾›äº† onpopstate äº‹ä»¶æ¥ç›‘å¬å†å²æ ˆçš„æ”¹å˜ï¼Œåªè¦å†å²æ ˆæœ‰ä¿¡æ¯å‘ç”Ÿæ”¹å˜çš„è¯ï¼Œå°±ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;popstate&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨é¡µé¢ä¸­é€šè¿‡ router çš„ api è¿›è¡Œè·¯ç”±è·³è½¬æ—¶ï¼Œè°ƒç”¨çš„é€šå¸¸æ˜¯ history.pushState()è¿™ä¸ª apiï¼Œæ‰€ä»¥åˆæ˜¯å‰ç«¯è¿›è¡Œçš„é€»è¾‘å¤„ç†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨åœ°å€æ ä¸­è¾“å…¥åœ°å€å¹¶è®¿é—®ï¼Œåˆ™ä¾æ—§ä¼šå‘åç«¯æœåŠ¡å™¨å‘èµ· GET è¯·æ±‚ï¼Œå¦‚æœåç«¯æ²¡æœ‰å¯¹å¯¹åº”çš„è·¯ç”±è¿›è¡Œé…ç½®ï¼Œé¡µé¢åˆ™ä¼šè¿”å› 404ï¼Œè¿™ä¹Ÿå°±æ˜¯ç”Ÿäº§ç¯å¢ƒé¡µé¢åˆ·æ–° 404 çš„é—®é¢˜æ‰€åœ¨ã€‚</p><p>å½“ç„¶ï¼Œå…³äº history å’Œ Hash è·¯ç”±è¿˜æœ‰æ›´æ·±çš„å†…å®¹éœ€è¦æ¢è®¨ï¼Œç­‰æœ‰æ—¶é—´å¦å†™ä¸€ç¯‡</p>]]></content>
      
      
      <categories>
          
          <category> æ‹“å±• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå¼•å¯¼ç”¨æˆ·å…³æ³¨å…¬ä¼—å·</title>
      <link href="/post/5c3af429.html"/>
      <url>/post/5c3af429.html</url>
      
        <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åœ¨å°ç¨‹åºä½¿ç”¨ç¯å¢ƒä¸­ï¼Œä¸ºäº†ç»™å…¬ä¼—å·å¼•æµï¼Œæˆ–è€…æ–¹ä¾¿ç»™ç”¨æˆ·æ¨é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬éœ€è¦å¼•å¯¼ç”¨æˆ·å»å…³æ³¨å…¬ä¼—å·ï¼Œç›®å‰æ¥è§¦åˆ°çš„å¤§éƒ¨åˆ†æ–¹æ¡ˆéƒ½æ˜¯ ç”¨æˆ·è§¦å‘å®¢æœæ¶ˆæ¯ - å‘é€æŒ‡å®šå†…å®¹ - æ”¶åˆ°å…¬ä¼—å·äºŒç»´ç  - ç”¨æˆ·é•¿æŒ‰å…¬ä¼—å·äºŒç»´ç è¯†åˆ«å…³æ³¨ï¼Œè¿™ä¹ˆä¸€å¥—æ“ä½œå®åœ¨æ˜¯æœ‰äº›ç¹çï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•æ¥å®ç°è¯¥éœ€æ±‚å‘¢ï¼Ÿ</p><span id="more"></span><ol><li>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æ‰‹æœºå¾®ä¿¡ç«¯æ‰“å¼€å…¬ä¼—å·è¯¦æƒ…é¡µé¢ï¼Œå¹¶é€šè¿‡å³ä¸Šè§’è½¬å‘æŒ‰é’®å°†å…¬ä¼—å·æ¨èç»™ã€Œæ–‡ä»¶ä¼ è¾“åŠ©æ‰‹ã€</li><li>åœ¨PCç«¯ç‚¹å‡»åˆ†äº«çš„å…¬ä¼—å·å¡ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢<br><img src="https://guozhigq.github.io/img/QQ20210528-092457.png" alt="å…¬ä¼—å·å¡ç‰‡"></li><li>ç‚¹å‡»å›¾ä¸­çº¢è‰²æ¡†ä¸­çš„å†…å®¹ï¼Œå¯ä»¥åœ¨ç”µè„‘ç«¯æŸ¥çœ‹å…¬ä¼—å·çš„èµ„æ–™é¡µé¢<br><img src="https://guozhigq.github.io/img/QQ20210528-092225.png" alt="PCç«¯å…¬ä¼—å·èµ„æ–™é¡µé¢"></li><li>ç‚¹å‡»å›¾ä¸­çš„å¤åˆ¶æŒ‰é’®ï¼Œå°±å¾—åˆ°å…¬ä¼—å·èµ„æ–™é¡µé¢çš„é“¾æ¥äº†</li><li>è¿”å›å¼€å‘è€…å·¥å…·ï¼Œæ–°å»ºé¡µé¢ï¼Œå¹¶ä½¿ç”¨ webview æ ‡ç­¾å¼•ç”¨é“¾æ¥<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;web-view src=<span class="string">&quot;https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=xxxxxxxxxxx==&amp;scene=124#wechat_redirect&quot;</span>&gt;&lt;/web-view&gt;</span><br></pre></td></tr></table></figure></li><li>çœŸæœºè°ƒè¯•ï¼Œç‚¹å‡»è¿›å…¥å¦‚ä¸‹ç•Œé¢ å®Œç»“ ~<br><img src="https://guozhigq.github.io/img/QQ20210528-095934.png" alt="æ‰‹æœºç«¯å…³æ³¨"></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå¼€å‘ä¸­çš„å°æŠ€å·§</title>
      <link href="/post/e0b676b5.html"/>
      <url>/post/e0b676b5.html</url>
      
        <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åœ¨å°ç¨‹åºå¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å¾ˆå¤šå¥‡æ€ªçš„ bugï¼Œéœ€è¦è€—è´¹ä¸å°‘çš„æ—¶é—´å’Œç²¾åŠ›æ¥è§£å†³ï¼Œæ‰€ä»¥åœ¨æ­¤å¤„åšä¸€ä¸ªè®°å½•ï¼Œåç»­ä¼šä¸æ–­è¡¥å……ã€‚</p><span id="more"></span><h4 id="é˜»æ­¢äº‹ä»¶å†’æ³¡"><a href="#é˜»æ­¢äº‹ä»¶å†’æ³¡" class="headerlink" title="é˜»æ­¢äº‹ä»¶å†’æ³¡"></a>é˜»æ­¢äº‹ä»¶å†’æ³¡</h4><ol><li><p>å¯¹äºä¸€èˆ¬çš„å­å…ƒç´ çš„è§¦å‘äº‹ä»¶ä½¿ç”¨ catchtap æ–¹æ³•å³å¯</p></li><li><p>å¯¹äº inputã€videoã€[openType]ç±»å‹çš„ buttonï¼Œæˆ‘ä»¬å¯ä»¥åŒæ ·åœ¨æ ‡ç­¾ä¸­æ·»åŠ  catchtap æ–¹æ³•ï¼Œå…¶ä¸­ catchtap å¯¹åº”çš„æ–¹æ³•å†…å®¹ä¸ºç©ºå³å¯ï¼Œå¦‚ä¸‹</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button open-type=<span class="string">&quot;share&quot;</span> catchtap=<span class="string">&quot;xxx&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="title function_">xxx</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="è½¬å‘æ—¶å¤šé€‰å¥½å‹"><a href="#è½¬å‘æ—¶å¤šé€‰å¥½å‹" class="headerlink" title="è½¬å‘æ—¶å¤šé€‰å¥½å‹"></a>è½¬å‘æ—¶å¤šé€‰å¥½å‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">showShareMenu</span>(&#123;</span><br><span class="line">        <span class="attr">withShareTicket</span>: <span class="literal">false</span>, <span class="comment">// å±æ€§å€¼ä¸ºfalseæ—¶ï¼Œå¼€å¯å¥½å‹åˆ†äº«å¤šé€‰åŠŸèƒ½</span></span><br><span class="line">        <span class="attr">menus</span>: [<span class="string">&#x27;shareAppMessage&#x27;</span>, <span class="string">&#x27;shareTimeline&#x27;</span>] <span class="comment">// è°ƒç”¨å¾®ä¿¡å¥½å‹åˆ†äº«ï¼Œæœ‹å‹åœˆåˆ†äº«ï¼ˆæœ‹å‹åœˆåˆ†äº«åŠŸèƒ½iosæš‚ä¸æ”¯æŒ 2021.02.04ï¼‰</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="setData-çš„ä½¿ç”¨äº‹é¡¹"><a href="#setData-çš„ä½¿ç”¨äº‹é¡¹" class="headerlink" title="setData çš„ä½¿ç”¨äº‹é¡¹"></a>setData çš„ä½¿ç”¨äº‹é¡¹</h4><ol><li>å› ä¸ºæ¶‰åŠåˆ°å°ç¨‹åºæ¸²æŸ“å±‚ä¸é€»è¾‘å±‚çš„æ•°æ®äº¤äº’ï¼Œæ‰€ä»¥ setData æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹;</li><li>ç›´æ¥ä¿®æ”¹ Page å®ä¾‹çš„ this.data æ˜¯æ— æ³•æ”¹å˜é¡µé¢çŠ¶æ€çš„;</li><li>å¦‚æœä¸éœ€è¦æ”¹å˜æ¸²æŸ“å±‚æ•°æ®ï¼Œå‡å°‘ä½¿ç”¨ setData;</li><li>ç”±äº setData æ˜¯éœ€è¦ä¸¤ä¸ªçº¿ç¨‹çš„ä¸€äº›é€šä¿¡æ¶ˆè€—ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæ¯æ¬¡è®¾ç½®çš„æ•°æ®ä¸åº”è¶…è¿‡ 1024kB;</li><li>setData çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª callback å›è°ƒï¼Œåœ¨æ­¤æ¬¡ setData å¯¹ç•Œé¢æ¸²æŸ“å®Œæ¯•åè§¦å‘; <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&quot;change text&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">// setDataå¯¹ç•Œé¢æ¸²æŸ“å®Œæ¯•åè§¦å‘</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id="å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º-10-å±‚"><a href="#å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º-10-å±‚" class="headerlink" title="å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º 10 å±‚"></a>å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º 10 å±‚</h4><p>åœ¨ç±»ä¼¼äº <strong>åˆ—è¡¨ -&gt; è¯¦æƒ…</strong> ä¸šåŠ¡å¼€å‘ä¸­æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œåœ¨æ¯æ¬¡ wx.navigateTo()æ—¶ï¼ŒgetCurrentPages()åˆ¤æ–­é¡µé¢æ ˆå±‚çº§æ•°ï¼Œå¦‚æœåˆ°è¾¾ 10 å±‚æ— æ³•æ–°å¢æ—¶ï¼Œä½¿ç”¨ wx.redirecTo()è¿›è¡Œé¡µé¢è·³è½¬ã€‚ï¼ˆå°†å½“å‰é¡µé¢æ¨å‡ºé¡µé¢æ ˆï¼‰</p><h4 id="å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®"><a href="#å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®" class="headerlink" title="å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®"></a>å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®</h4><p>åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ° <strong>A -&gt; B -&gt; A</strong> é¡µé¢å›è·³ä¸”éœ€è¦å¸¦å‚æ•°çš„æƒ…å†µï¼Œå¯¹äºè¿™ç§éœ€æ±‚ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥æ»¡è¶³å‘¢ï¼Ÿ</p><ol><li><p>åœ¨ B é¡µé¢è°ƒç”¨åç«¯æ¥å£ï¼Œåœ¨ A é¡µé¢ onShow æ–¹æ³•ä¸­è·å–æ•°æ®;</p></li><li><p>ä½¿ç”¨ globalData å…¨å±€å‚æ•°ã€‚åœ¨ B é¡µé¢èµ‹å€¼ï¼ŒA é¡µé¢å–å€¼;</p></li><li><p>ä½¿ç”¨ç¼“å­˜ api wx.setStorageSync() wx.getStorageSync()ã€‚åœ¨ By é¡µé¢ setï¼ŒA é¡µé¢ get;</p></li><li><p>ä½¿ç”¨ getCurrentPages()è·å–å°ç¨‹åºé¡µé¢æ ˆï¼Œå¹¶æ‰§è¡Œ setData({})</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> pages = <span class="title function_">getCurrentPages</span>(); <span class="comment">// è·å–å½“å‰é¡µé¢æ ˆã€‚æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºé¦–é¡µï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸ºå½“å‰é¡µé¢ã€‚</span></span><br><span class="line"><span class="keyword">let</span> prevPage = pages[ pages.<span class="property">length</span> - <span class="number">2</span> ];  <span class="comment">// è·å–ä¸Šä¸€é¡µé¢Page() å®ä¾‹</span></span><br><span class="line">prevPage.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;,</span><br><span class="line">    wx.<span class="title function_">navigateBack</span>(&#123;</span><br><span class="line">        <span class="attr">delta</span>: <span class="number">1</span>  <span class="comment">// è¿”å›ä¸Šä¸€çº§é¡µé¢ã€‚</span></span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¸­çš„è™šæ‹ŸDOM</title>
      <link href="/post/1e9fca9b.html"/>
      <url>/post/1e9fca9b.html</url>
      
        <content type="html"><![CDATA[<h4 id="åœ¨äº†è§£è™šæ‹Ÿ-DOM-ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹"><a href="#åœ¨äº†è§£è™šæ‹Ÿ-DOM-ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹" class="headerlink" title="åœ¨äº†è§£è™šæ‹Ÿ DOM ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹"></a>åœ¨äº†è§£è™šæ‹Ÿ DOM ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹</h4><ol><li>è§£æè·å–åˆ°çš„ HTML æ–‡æ¡£ç”Ÿæˆ DOM</li><li>è§£æ CSS æ„æˆå±‚å æ ·å¼è¡¨ç»“æ„ CSSOM</li><li>å°†ä¸¤è€…è¿›è¡Œç»“åˆç”Ÿæˆæ¸²æŸ“æ ‘</li><li>æµè§ˆå™¨æ ¹æ®æ¸²æŸ“æ ‘ä¸Šçš„èŠ‚ç‚¹ä¿¡æ¯ç¡®å®šå…¶åæ ‡å€¼</li><li>è°ƒç”¨æ¯ä¸ªèŠ‚ç‚¹çš„ paint æ–¹æ³•ï¼Œå°†èŠ‚ç‚¹ç»˜åˆ¶åˆ°å±å¹•ä¸Š <span id="more"></span></li></ol><p><img src="https://i.loli.net/2020/12/22/2ZLbfcxYMHQCAn6.png" alt="æµè§ˆå™¨æ¸²æŸ“æµç¨‹"></p><p>å½“æˆ‘ä»¬ä½¿ç”¨åŸç”Ÿ js æˆ–è€… jquery æ“ä½œ DOM æ—¶ï¼Œæ¯å¯¹ DOM è¿›è¡Œä¸€æ¬¡æ“ä½œï¼Œæµè§ˆå™¨å°±ä¼šä»å¤´åˆ°å°¾æ‰§è¡Œä¸€éæµç¨‹ï¼Œå½“æ“ä½œååˆ†é¢‘ç¹æ—¶ï¼Œå¯¹äºæµè§ˆå™¨çš„æ€§èƒ½æ¶ˆè€—ä¾¿ä¼šå˜å¾—éå¸¸ä¸¥é‡ã€‚è™šæ‹Ÿ DOM å°±æ˜¯ä¸ºäº†è§£å†³<strong>æµè§ˆå™¨æ€§èƒ½é—®é¢˜</strong>è€Œè¢«è®¾è®¡å‡ºæ¥çš„</p><h4 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM</h4><p>ç›¸è¾ƒäº DOM å¯¹è±¡ï¼ŒåŸç”Ÿçš„ JavaScript å¯¹è±¡å¤„ç†èµ·æ¥é€Ÿåº¦æ›´å¿«ï¼Œä¹Ÿæ›´ç®€å•ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ JavaScript å¯¹è±¡è¡¨ç¤ºå‡º DOM æ ‘ä¸Šçš„ç»“æ„ã€å±æ€§ä¿¡æ¯ï¼Œæ¯”å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> element = &#123;</span><br><span class="line">    <span class="attr">tagName</span>: <span class="string">&quot;ul&quot;</span>,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;list&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>, <span class="attr">props</span>: &#123; <span class="attr">class</span>: <span class="string">&quot;item&quot;</span> &#125;, <span class="attr">children</span>: [<span class="string">&quot;Item 1&quot;</span>] &#125;,</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>, <span class="attr">props</span>: &#123; <span class="attr">class</span>: <span class="string">&quot;item&quot;</span> &#125;, <span class="attr">children</span>: [<span class="string">&quot;Item 2&quot;</span>] &#125;,</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>, <span class="attr">props</span>: &#123; <span class="attr">class</span>: <span class="string">&quot;item&quot;</span> &#125;, <span class="attr">children</span>: [<span class="string">&quot;Item 3&quot;</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„ HTML ä»£ç ä¸º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>æ—¢ç„¶ Javascript å¯¹è±¡å±æ€§å¯ä»¥ç”¨æ¥æè¿° DOM èŠ‚ç‚¹ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›æ“ä½œå°† Javascript å¯¹è±¡æ˜ å°„åˆ°çœŸå® DOM ä¸Š<br>æ­¤æ—¶ï¼Œæˆ‘ä»¬è¾¹å¯ä»¥å°†è™šæ‹Ÿ DOM ç®€å•ç†è§£ä¸ºä¸€ä¸ª JS å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è‡³å°‘åŒ…å«æœ‰æ ‡ç­¾å( tag)ã€å±æ€§(attrs)å’Œå­å…ƒç´ å¯¹è±¡( children)ä¸‰ä¸ªå±æ€§ã€‚</p><h4 id="è™šæ‹Ÿ-DOM-ä½œç”¨æ˜¯ä»€ä¹ˆ"><a href="#è™šæ‹Ÿ-DOM-ä½œç”¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="è™šæ‹Ÿ DOM ä½œç”¨æ˜¯ä»€ä¹ˆ"></a>è™šæ‹Ÿ DOM ä½œç”¨æ˜¯ä»€ä¹ˆ</h4><p>è™šæ‹Ÿ DOM çš„æœ€ç»ˆç›®çš„æ˜¯å°†è™šæ‹ŸèŠ‚ç‚¹æ¸²æŸ“åˆ°è§†å›¾ä¸Šï¼Œä½†å¦‚æœç›´æ¥è¦†ç›–çš„è¯ï¼Œé‚£è™šæ‹Ÿ DOM çš„å­˜åœ¨ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚ä¸ºäº†é¿å…ä¸å¿…è¦çš„ DOM æ“ä½œï¼Œè™šæ‹Ÿ DOM åœ¨å°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°è§†å›¾çš„è¿‡ç¨‹ä¸­ï¼Œå°†è™šæ‹ŸèŠ‚ç‚¹ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“è§†å›¾æ‰€ä½¿ç”¨çš„æ—§èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œå°†çœŸæ­£éœ€è¦æ›´æ–°å†…å®¹çš„èŠ‚ç‚¹è¿›è¡Œæ˜ å°„ï¼Œé¿å…æ“ä½œå…¶ä»–æ— å…³çš„ DOM</p><h4 id="æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ-DOM-ä¸»è¦åšäº†ä¸¤ä»¶äº‹"><a href="#æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ-DOM-ä¸»è¦åšäº†ä¸¤ä»¶äº‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ DOM ä¸»è¦åšäº†ä¸¤ä»¶äº‹"></a>æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ DOM ä¸»è¦åšäº†ä¸¤ä»¶äº‹</h4><ol><li>é€šè¿‡ Javascript å¯¹è±¡æ„å»ºè™šæ‹ŸèŠ‚ç‚¹</li><li>å°†æœ¬æ¬¡çš„è™šæ‹ŸèŠ‚ç‚¹ä¸ä¸Šæ¬¡çš„è¿›è¡Œå·®å¼‚å¯¹æ¯”ï¼Œå†è¿›è¡Œè§†å›¾æ›´æ–°</li></ol><h4 id="è™šæ‹Ÿ-Dom-çš„ä¼˜åŠ¿"><a href="#è™šæ‹Ÿ-Dom-çš„ä¼˜åŠ¿" class="headerlink" title="è™šæ‹Ÿ Dom çš„ä¼˜åŠ¿"></a>è™šæ‹Ÿ Dom çš„ä¼˜åŠ¿</h4><p>ã€ŒVirtual Dom çš„ä¼˜åŠ¿ã€å…¶å®è¿™é“é¢˜ç›®é¢è¯•å®˜æ›´æƒ³å¬åˆ°çš„ç­”æ¡ˆä¸æ˜¯ä¸Šæ¥å°±è¯´ã€Œç›´æ¥æ“ä½œ&#x2F;é¢‘ç¹æ“ä½œ DOM çš„æ€§èƒ½å·®ã€ï¼Œå¦‚æœ DOM æ“ä½œçš„æ€§èƒ½å¦‚æ­¤ä¸å ªï¼Œé‚£ä¹ˆ jQuery ä¹Ÿä¸è‡³äºæ´»åˆ°ä»Šå¤©ã€‚æ‰€ä»¥é¢è¯•å®˜æ›´æƒ³å¬åˆ° VDOM æƒ³è§£å†³çš„é—®é¢˜ä»¥åŠä¸ºä»€ä¹ˆé¢‘ç¹çš„ DOM æ“ä½œä¼šæ€§èƒ½å·®ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼š</p><ul><li>DOM å¼•æ“ã€JS å¼•æ“ ç›¸äº’ç‹¬ç«‹ï¼Œä½†åˆå·¥ä½œåœ¨åŒä¸€çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰</li><li>JS ä»£ç è°ƒç”¨ DOM API å¿…é¡» æŒ‚èµ· JS å¼•æ“ã€è½¬æ¢ä¼ å…¥å‚æ•°æ•°æ®ã€æ¿€æ´» DOM å¼•æ“ï¼ŒDOM é‡ç»˜åå†è½¬æ¢å¯èƒ½æœ‰çš„è¿”å›å€¼ï¼Œæœ€åæ¿€æ´» JS å¼•æ“å¹¶ç»§ç»­æ‰§è¡Œè‹¥æœ‰é¢‘ç¹çš„ DOM API è°ƒç”¨ï¼Œä¸”æµè§ˆå™¨å‚å•†ä¸åšâ€œæ‰¹é‡å¤„ç†â€ä¼˜åŒ–ï¼Œ</li><li>å¼•æ“é—´åˆ‡æ¢çš„å•ä½ä»£ä»·å°†è¿…é€Ÿç§¯ç´¯è‹¥å…¶ä¸­æœ‰å¼ºåˆ¶é‡ç»˜çš„ DOM API è°ƒç”¨ï¼Œé‡æ–°è®¡ç®—å¸ƒå±€ã€é‡æ–°ç»˜åˆ¶å›¾åƒä¼šå¼•èµ·æ›´å¤§çš„æ€§èƒ½æ¶ˆè€—ã€‚</li></ul><p>å…¶æ¬¡æ˜¯ VDOM å’ŒçœŸå® DOM çš„åŒºåˆ«å’Œä¼˜åŒ–ï¼š</p><ol><li>è™šæ‹Ÿ DOM ä¸ä¼šç«‹é©¬è¿›è¡Œæ’ç‰ˆä¸é‡ç»˜æ“ä½œ</li><li>è™šæ‹Ÿ DOM è¿›è¡Œé¢‘ç¹ä¿®æ”¹ï¼Œç„¶åä¸€æ¬¡æ€§æ¯”è¾ƒå¹¶ä¿®æ”¹çœŸå® DOM ä¸­éœ€è¦æ”¹çš„éƒ¨åˆ†ï¼Œæœ€ååœ¨çœŸå® DOM ä¸­è¿›è¡Œæ’ç‰ˆä¸é‡ç»˜ï¼Œå‡å°‘è¿‡å¤š DOM èŠ‚ç‚¹æ’ç‰ˆä¸é‡ç»˜æŸè€—</li><li>è™šæ‹Ÿ DOM æœ‰æ•ˆé™ä½å¤§é¢ç§¯çœŸå® DOM çš„é‡ç»˜ä¸æ’ç‰ˆï¼Œå› ä¸ºæœ€ç»ˆä¸çœŸå® DOM æ¯”è¾ƒå·®å¼‚ï¼Œå¯ä»¥åªæ¸²æŸ“å±€éƒ¨</li></ol><h4 id="å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®"><a href="#å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®" class="headerlink" title="å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®"></a>å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®</h4><ul><li><a href="''">è™šæ‹Ÿ DOM æ¸²æŸ“åˆ°çœŸå® DOM çš„å‘¨æœŸä¸ºå¤šä¹…</a></li><li><a href="''">è¿™ä¸ªæ¸²æŸ“å‘¨æœŸåˆæ˜¯ç”±ä»€ä¹ˆæ¥å†³å®šçš„</a><!-- [] --><!-- è™šæ‹ŸDOMä¹‹æ‰€ä»¥èƒ½å¤Ÿå‡å°‘å¯¹æµè§ˆå™¨æ€§èƒ½æ¶ˆè€—ï¼Œé™¤äº†ç”¨Jså¯¹è±¡è™šæ‹ŸDOMä¹‹å¤–ï¼Œå…³é”®åœ¨äºé€šè¿‡diffç®—æ³•ï¼Œå¯¹æ¯”è™šæ‹ŸDOMä¹‹é—´çš„å·®å¼‚ï¼Œå°†å˜åŒ–çš„èŠ‚ç‚¹æ•°æ®æ¸²æŸ“åˆ°çœŸå®DOMä¸Š --></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºä½¿ç”¨äº‘å¼€å‘å®ç°èŠå¤©</title>
      <link href="/post/796d8a17.html"/>
      <url>/post/796d8a17.html</url>
      
        <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>ä¹‹å‰åšçš„ä¸¤ä¸ªé¡¹ç›®éƒ½æ¶‰åŠåˆ°å³æ—¶é€šè®¯åŠŸèƒ½ï¼Œè¿‘æœŸå¸®æœ‹å‹å¼€å‘å°ç¨‹åºæ—¶ä¹Ÿæœ‰è¿™ä¸ªéœ€æ±‚ï¼Œå› ä¸ºæ²¡æœ‰åç«¯ï¼Œæ‰€ä»¥å†³å®šä½¿ç”¨äº‘å¼€å‘æ¥å®ç°é€šè®¯åŠŸèƒ½ã€‚ å³æ—¶é€šè®¯çš„å…³é”®ç‚¹åœ¨äºå³æ—¶ï¼Œåœ¨ä¹‹å‰çš„å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡websocketé•¿è¿æ¥æ¥å®ç°ï¼Œäº‘å¼€å‘ä¸­åˆæ€æ ·æ¥å®ç°å‘¢ï¼Ÿ</p><span id="more"></span><h3 id="åœºæ™¯åˆ†æ"><a href="#åœºæ™¯åˆ†æ" class="headerlink" title="åœºæ™¯åˆ†æ"></a>åœºæ™¯åˆ†æ</h3><ol><li>Aç‚¹å‡»Bçš„å¤´åƒå‘èµ·èŠå¤©æ—¶ï¼Œæ ¹æ®åŒæ–¹idç”Ÿæˆå”¯ä¸€çš„èŠå¤©å®¤group_idï¼Œç”¨äºå­˜å‚¨èŠå¤©æ•°æ®ã€‚è‹¥group_idå­˜åœ¨ï¼Œåˆ™è·å–èŠå¤©æ•°æ®</li><li>è€ƒè™‘åˆ°åˆ†åˆ«éœ€è¦å¯¹èŠå¤©åˆ—è¡¨å’ŒèŠå¤©æ•°æ®è¿›è¡Œå­˜å‚¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸¤ä¸ªé›†åˆï¼Œåˆ†åˆ«å‘½åä¸ºmsgListã€msgData</li><li>å‘èµ·èŠå¤©æ—¶ï¼Œéœ€è¦å¾€msgListé›†åˆæ·»åŠ ä¸€æ¡æ•°æ®ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™è¿›è¡Œæ›´æ–°è¦†ç›–ï¼Œç”¨æˆ·æ›´æ–°èŠå¤©æœ€åä¸€å¥å†…å®¹ä¸èŠå¤©ç»“æŸæ—¶é—´ï¼Œç”¨äºå±•ç¤ºèŠå¤©åˆ—è¡¨</li><li>è¿›è¡ŒèŠå¤©è¯¦æƒ…é¡µï¼Œæ ¹æ®group_idè·å–å¯¹åº”èŠå¤©æ•°æ®å¹¶è¿›è¡Œæ•°æ®æ¸²æŸ“</li><li>èŠå¤©çª—å£å†…å®æ—¶ç›‘å¬èŠå¤©æ•°æ®ï¼Œè¿›è¡Œæ•°æ®å¡«å……</li></ol><h3 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h3><h5 id="æ¶ˆæ¯å‘èµ·æ–¹"><a href="#æ¶ˆæ¯å‘èµ·æ–¹" class="headerlink" title="æ¶ˆæ¯å‘èµ·æ–¹"></a>æ¶ˆæ¯å‘èµ·æ–¹</h5><p>å‘èµ·èŠå¤©æ—¶ï¼Œç”Ÿæˆgroup_idå¹¶å¾€ <strong>msgList</strong> é›†åˆä¸­å­˜å‚¨ä¸€æ¡ä¿¡æ¯ï¼Œç”¨ä»¥è®°å½•Aã€BåŒæ–¹èŠå¤©å…³ç³»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// group_idä½¿ç”¨ä¸¤ä¸ªç”¨æˆ·uidä¹‹å’Œï¼Œä¾¿äºå¯¹æ•°æ®è¿›è¡ŒæŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">let</span> group_id = <span class="title class_">Number</span>(uid_a) + <span class="title class_">Number</span>(uid_b)</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„group_idï¼Œå¹¶ä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.where.html">Collection.where</a>ã€<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.get.html">Collection.get</a> æ–¹æ³•ä» <strong>msgList</strong> é›†åˆä¸­è·å–èŠå¤©æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> _db = db.<span class="title function_">collection</span>(<span class="string">&#x27;msgList&#x27;</span>)</span><br><span class="line"><span class="comment">// è·å–èŠå¤©è®°å½•</span></span><br><span class="line">_db</span><br><span class="line">    .<span class="title function_">where</span>(&#123;<span class="attr">groupId</span>: groupId&#125;)</span><br><span class="line">    .<span class="title function_">get</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">talkData</span>: res.<span class="property">data</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>å‘é€æ–‡æœ¬æ¶ˆæ¯ï¼Œå°†æ•°æ®åœ¨æœ¬åœ°æ·»åŠ åˆ°talkDataä¸­ï¼Œå¹¶ä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.add.html">Collection.add()</a> æ–¹æ³•å°†æ•°æ®æ·»åŠ åˆ° <strong>msgData</strong> é›†åˆä¸­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chatData = &#123;</span><br><span class="line">    <span class="attr">toId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ¥æ”¶äººid</span></span><br><span class="line">    <span class="attr">toAvatar</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ¥æ”¶äººå¤´åƒ</span></span><br><span class="line">    <span class="attr">toName</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ¥æ”¶äººæ˜µç§°</span></span><br><span class="line">    <span class="attr">fromId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å‘é€äººid</span></span><br><span class="line">    <span class="attr">fromAvatar</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å‘é€äººå¤´åƒ</span></span><br><span class="line">    <span class="attr">fromName</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å‘é€äººæ˜µç§°</span></span><br><span class="line">    <span class="attr">groupId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// èŠå¤©å®¤id</span></span><br><span class="line">    <span class="attr">msgType</span>: <span class="string">&#x27;text&#x27;</span>, <span class="comment">// æ¶ˆæ¯ç±»å‹</span></span><br><span class="line">    <span class="attr">lastContent</span>: <span class="title class_">InputContent</span>, <span class="comment">// æ¶ˆæ¯å†…å®¹</span></span><br><span class="line">    <span class="attr">sendTime</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="comment">// å½“å‰æ—¶é—´</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è®°å½•èŠå¤©æ•°æ®</span></span><br><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;msgData&#x27;</span>)</span><br><span class="line">    .<span class="title function_">add</span>(&#123;<span class="attr">data</span>: chatData&#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">errMsg</span> == <span class="string">&quot;collection.add:ok&quot;</span>)&#123;</span><br><span class="line">            <span class="comment">// å‘é€æˆåŠŸï¼Œæ•°æ®æ”¾å…¥msgData</span></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// å‘é€å¤±è´¥çš„é€»è¾‘å¤„ç†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h5 id="æ¶ˆæ¯æ¥æ”¶æ–¹"><a href="#æ¶ˆæ¯æ¥æ”¶æ–¹" class="headerlink" title="æ¶ˆæ¯æ¥æ”¶æ–¹"></a>æ¶ˆæ¯æ¥æ”¶æ–¹</h5><p>æ¶ˆæ¯æ¥æ”¶æ—¶ï¼Œå…³é”®åœ¨äºä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.watch.html">Collection.watch</a> æ–¹æ³• <strong>ç›‘å¬é›†åˆä¸­ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ•°æ®çš„æ›´æ–°äº‹ä»¶</strong> ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç»“åˆ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.where.html">Collection.where</a> æ–¹æ³•ä¸€èµ·ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬æ•°æ®å˜åŒ–</span></span><br><span class="line"><span class="keyword">const</span> that = <span class="variable language_">this</span></span><br><span class="line"><span class="keyword">let</span> _db = db.<span class="title function_">collection</span>(<span class="string">&#x27;msgData&#x27;</span>)</span><br><span class="line">_db </span><br><span class="line">    .<span class="title function_">where</span>(&#123;<span class="attr">toId</span>: <span class="string">&#x27;&#x27;</span>&#125;) <span class="comment">// æŸ¥è¯¢æ¡ä»¶ï¼š è¿”å›toId == å¯¹æ–¹idçš„æ•°æ®</span></span><br><span class="line">    .<span class="title function_">watch</span>(&#123;</span><br><span class="line">        <span class="attr">onChange</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> reviceMsg = res.<span class="property">docChanges</span>[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span>(reviceMsg.<span class="property">dataType</span> == <span class="string">&#x27;add&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">let</span> talkData = that.<span class="property">data</span>.<span class="property">talkData</span></span><br><span class="line">                talkData.<span class="title function_">push</span>(reviceMsg.<span class="property">doc</span>) <span class="comment">// å°†å®æ—¶ç›‘å¬åˆ°çš„æ•°æ®æ·»åŠ åˆ°æœ¬åœ°æ•°æ®ä¸­</span></span><br><span class="line">                that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">talkData</span>: talkData</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">onError</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;the watch closed because of error&#x27;</span>, err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
