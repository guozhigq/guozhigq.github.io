<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>$nextTickä¸èµ‹å€¼æ“ä½œ=çš„ä¼˜å…ˆçº§</title>
      <link href="/post/d6fb0369.html"/>
      <url>/post/d6fb0369.html</url>
      
        <content type="html"><![CDATA[<p>å…ˆæœ‰ä¸¤ä¸ªä¾‹å­ï¼š</p><h3 id="ä¾‹å­1"><a href="#ä¾‹å­1" class="headerlink" title="ä¾‹å­1:"></a>ä¾‹å­1:</h3><p>åŸºäº<strong>vue2.x</strong>ç‰ˆæœ¬</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>ç´¯åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">     <span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, </span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// è¾“å‡º ï¼Ÿ</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>).<span class="property">innerHTML</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// a == 2</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = ++;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// è¾“å‡º ï¼Ÿ</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>).<span class="property">innerHTML</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// a == 3</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">a</span> = ++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç åˆ†åˆ«è¾“å‡º1ï¼Œ2ï¼Œä½ çŒœå¯¹äº†å—<br>é¡µé¢åˆå§‹åŒ–æ—¶ï¼Œdomæ˜¾ç¤ºä¸º2ï¼Œè¾“å‡º1<br>ç‚¹å‡»äº‹ä»¶ä¹‹åï¼Œdomæ˜¾ç¤ºä¸º3ï¼Œè¾“å‡ºä¸º2</p><h3 id="ä¾‹å­2"><a href="#ä¾‹å­2" class="headerlink" title="ä¾‹å­2:"></a>ä¾‹å­2:</h3><p>åŸºäº<strong>vue3.x</strong>ç‰ˆæœ¬</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>&#123;&#123; a &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>ç´¯åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; ref, nextTick, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="title function_">ref</span>(<span class="number">1</span>);</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="comment">// è¾“å‡º ï¼Ÿ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;demo&#x27;</span>).<span class="property">innerHTML</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">   <span class="comment">// a == 2</span></span><br><span class="line">   a.<span class="property">value</span> ++;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="comment">// è¾“å‡º ï¼Ÿ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;demo&#x27;</span>).<span class="property">innerHTML</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// a == 3</span></span><br><span class="line">  a.<span class="property">value</span> ++;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç åˆ†åˆ«è¾“å‡º1ï¼Œ2ï¼Œä½ çŒœå¯¹äº†å—<br>é¡µé¢åˆå§‹åŒ–æ—¶ï¼Œdomæ˜¾ç¤ºä¸º2ï¼Œè¾“å‡º2<br>ç‚¹å‡»äº‹ä»¶ä¹‹åï¼Œdomæ˜¾ç¤ºä¸º3ï¼Œè¾“å‡ºä¸º2</p><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹äºåˆå§‹åŒ–å®Œæˆä¹‹åçš„äº‹ä»¶ï¼Œvue 2ã€3ç‰ˆæœ¬çš„è¾“å‡ºä¸æ˜¾ç¤ºæ˜¯ç›¸å¤„çš„ã€‚<br>å¯¹äºåˆå§‹åŒ–æ—¶çš„å¤„ç†ï¼Œvue2 ä¸­<strong>nextTick</strong>ä¼˜å…ˆäº<strong>èµ‹å€¼æ“ä½œ</strong>ï¼Œvue3 ä¸­<strong>èµ‹å€¼æ“ä½œ</strong>ä¼˜å…ˆäº<strong>nextTick</strong></p><p>å…·ä½“åŸå› æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨CSSä¸­åšè¯­æ³•åˆ¤æ–­ï¼š:has</title>
      <link href="/post/e26ee5bb.html"/>
      <url>/post/e26ee5bb.html</url>
      
        <content type="html"><![CDATA[<p>åˆæ˜¯ä¸€ä¸ªcssçš„å°çŸ¥è¯†ç‚¹ :has<br>çœ‹åˆ°<code>has</code>ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯<code>javaScript</code>ä¸­çš„<code>has()</code>æ–¹æ³•</p><p>å›é¡¾ä¸€ä¸‹</p><h3 id="Mapä¸­çš„has"><a href="#Mapä¸­çš„has" class="headerlink" title="Mapä¸­çš„has()"></a><code>Map</code>ä¸­çš„has()</h3><blockquote><p>Map.prototype.has()<br>has() æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå…·æœ‰æŒ‡å®šé”®çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map1.<span class="title function_">set</span>(<span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map1.<span class="title function_">has</span>(<span class="string">&#x27;bar&#x27;</span>));</span><br><span class="line"><span class="comment">// Expected output: true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map1.<span class="title function_">has</span>(<span class="string">&#x27;baz&#x27;</span>));</span><br><span class="line"><span class="comment">// Expected output: false</span></span><br></pre></td></tr></table></figure><h3 id="Setä¸­çš„has"><a href="#Setä¸­çš„has" class="headerlink" title="Setä¸­çš„has()"></a><code>Set</code>ä¸­çš„has()</h3><blockquote><p>Set.prototype.has()<br>has() æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥æŒ‡ç¤ºå¯¹åº”çš„å€¼æ˜¯å¦å­˜åœ¨äº Set å¯¹è±¡ä¸­ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set1 = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set1.<span class="title function_">has</span>(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// Expected output: true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set1.<span class="title function_">has</span>(<span class="number">5</span>));</span><br><span class="line"><span class="comment">// Expected output: true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set1.<span class="title function_">has</span>(<span class="number">6</span>));</span><br><span class="line"><span class="comment">// Expected output: false</span></span><br></pre></td></tr></table></figure><h3 id="CSSä¸­çš„-has"><a href="#CSSä¸­çš„-has" class="headerlink" title="CSSä¸­çš„:has()"></a>CSSä¸­çš„<code>:has()</code></h3><p>è§åæ€ä¹‰ï¼ŒCSSä¸­çš„hasçœ‹æ¥ä¹Ÿæ˜¯åŒæ ·çš„ä½œç”¨äº†ã€‚ </p><blockquote><p>CSS å‡½æ•°å¼ä¼ªç±» :has() è¡¨ç¤ºä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœä½œä¸ºå‚æ•°ä¼ é€’çš„ä»»ä½•ç›¸å¯¹é€‰æ‹©å™¨åœ¨é”šå®šåˆ°è¯¥å…ƒç´ æ—¶ï¼Œè‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´ ã€‚è¿™ä¸ªä¼ªç±»é€šè¿‡æŠŠå¯å®¹é”™ç›¸å¯¹é€‰æ‹©å™¨åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œæä¾›äº†ä¸€ç§é’ˆå¯¹å¼•ç”¨å…ƒç´ é€‰æ‹©çˆ¶å…ƒç´ æˆ–è€…å…ˆå‰çš„å…„å¼Ÿå…ƒç´ çš„æ–¹æ³•ã€‚</p></blockquote><p><Strong>ç®€å•æ¥è¯´ï¼š</Strong><br>å½“<strong>çˆ¶çº§å…ƒç´ </strong>ä¸­æœ‰ç¬¦åˆ <code>:has(xxx)</code> ä¸­xxxæ¡ä»¶<strong>å­å…ƒç´ </strong>æ—¶ï¼Œä¼šç»™<strong>çˆ¶å…ƒç´ </strong>æ·»åŠ ä¸Šå¯¹åº”çš„æ ·å¼ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡<strong>å­çº§</strong>å†³å®š<strong>çˆ¶çº§</strong>çš„æ ·å¼<br>è¿™ä¸æˆ‘ä»¬ä¹‹å‰å¯¹äºCSSçš„è®¤çŸ¥æ˜¯å®Œå…¨ç›¸åçš„ï¼Œå› ä¸ºä¸€èˆ¬CSSçš„è§„èŒƒéƒ½æ˜¯è‡ªé¡¶å‘ä¸‹ï¼Œç”±<strong>çˆ¶çº§</strong>åˆ°<strong>å­çº§</strong>ï¼Œç”±<strong>çˆ¶çº§</strong>å½±å“<strong>å­çº§</strong>ã€‚</p><p>é‚£ä¹ˆçœ‹çœ‹ä»–çš„åŸºæœ¬ä½¿ç”¨å§</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.class</span> <span class="selector-pseudo">:has</span>(xxx)&#123;</span><br><span class="line">    <span class="comment">/* style */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>ä¸¾ä¸ªğŸŒ°ï¼š</strong> åŒ…å«æœ‰<code>img</code>å…ƒç´ çš„<code>.card</code>å…ƒç´ èƒŒæ™¯å˜ä¸ºè“è‰²</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:has</span>(<span class="selector-tag">img</span>)&#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>å†ä¸¾ä¸ªğŸŒ°ï¼š</strong> åŒ…å«æœ‰<code>a</code>å…ƒç´ çš„<code>.card</code>å…ƒç´ ï¼Œåœ¨<code>a</code>å…ƒç´ å¤„äº<code>hover</code>çŠ¶æ€æ—¶ï¼ŒèƒŒæ™¯è‰²å˜ä¸ºè“è‰²</p><blockquote><p>tipsï¼šè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬åœ¨PCç«¯å®ç°ä¸€äº›æ‚¬æµ®ä¸‹æ‹‰èœå•æ—¶æ˜¯ä¸æ˜¯å°±å¾ˆç®€å•äº†å‘¢ï¼Œç”šè‡³ä¸å†éœ€è¦ js</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:has</span>(<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>)&#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å½“ç„¶å…¶ä»–ä¼ªç±»ä¹Ÿæ˜¯å¯ä»¥çš„ */</span></span><br><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:has</span>(<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>)&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="has-çš„å…¶ä»–ç”¨æ³•"><a href="#has-çš„å…¶ä»–ç”¨æ³•" class="headerlink" title=":has()çš„å…¶ä»–ç”¨æ³•"></a><code>:has()</code>çš„å…¶ä»–ç”¨æ³•</h3><h4 id="CSSé€‰æ‹©ç¬¦å·"><a href="#CSSé€‰æ‹©ç¬¦å·" class="headerlink" title="CSSé€‰æ‹©ç¬¦å·"></a>CSSé€‰æ‹©ç¬¦å·</h4><p>æ¯”å¦‚ç›´æ¥å­å…ƒç´ <code>></code>ã€ç›¸é‚»å…„å¼Ÿå…ƒç´ <code>+</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å­å…ƒç´ æ˜¯imgçš„cardå…ƒç´ è¢«åŒ¹é… */</span></span><br><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:has</span>(&gt;<span class="selector-tag">img</span>)&#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç›¸é‚»å…„å¼Ÿå…ƒç´ æ˜¯imgçš„cardå…ƒç´ è¢«åŒ¹é… */</span></span><br><span class="line"><span class="selector-class">.card</span><span class="selector-pseudo">:has</span>( +<span class="selector-tag">img</span>)&#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¤šä¸ªåˆ¤æ–­å…ƒç´ "><a href="#å¤šä¸ªåˆ¤æ–­å…ƒç´ " class="headerlink" title="å¤šä¸ªåˆ¤æ–­å…ƒç´ "></a>å¤šä¸ªåˆ¤æ–­å…ƒç´ </h4><p>å­å…ƒç´ ä¸­æœ‰<code>img</code>å…ƒç´ æˆ–<code>p</code>å…ƒç´ çš„cardå…ƒç´ ï¼Œæ³¨æ„è¿™é‡Œæ˜¯<strong>æˆ–</strong>çš„å…³ç³»ï¼Œå¦‚æœå®ç°<strong>ä¸</strong>çš„å…³ç³»ï¼Œå¯ä»¥è¯•è¯•è¿ç»­ä¸¤ä¸ª<code>:has()</code><br><img src="https://guozhigq.github.io/img/css/has-or.png" alt="hasçš„ä½¿ç”¨"></p><hr><h4 id="è·Ÿå…¶ä»–é€»è¾‘ä¼ªç±»æ··ç”¨"><a href="#è·Ÿå…¶ä»–é€»è¾‘ä¼ªç±»æ··ç”¨" class="headerlink" title="è·Ÿå…¶ä»–é€»è¾‘ä¼ªç±»æ··ç”¨"></a>è·Ÿå…¶ä»–é€»è¾‘ä¼ªç±»æ··ç”¨</h4><ul><li><code>:not()</code> ç”¨æ¥åŒ¹é…ä¸ç¬¦åˆä¸€ç»„é€‰æ‹©å™¨çš„å…ƒç´ </li><li><code>:is()</code> é€‰æ‹©å™¨åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œå¹¶é€‰æ‹©è¯¥åˆ—è¡¨ä¸­ä»»æ„ä¸€ä¸ªé€‰æ‹©å™¨å¯ä»¥é€‰æ‹©çš„å…ƒç´ ã€‚</li></ul><h5 id="not"><a href="#not" class="headerlink" title=":not()"></a><code>:not()</code></h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">section</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:has</span>(<span class="selector-tag">span</span>)) &#123;</span><br><span class="line">  <span class="attribute">border</span>: skyblue solid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">section</span><span class="selector-pseudo">:has</span>(<span class="selector-pseudo">:not</span>(<span class="selector-tag">span</span>)) &#123;</span><br><span class="line">  <span class="attribute">color</span>: deepskyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹ï¼Œè¿™ä¸¤ä¸ªå†™æ³•æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå…¶å®<br>ç¬¬ä¸€ä¸ªè¡¨ç¤ºï¼šæ²¡æœ‰åŒ…å« <code>span</code> å…ƒç´ çš„ <code>section</code> å…ƒç´ <br>ç¬¬äºŒä¸ªè¡¨ç¤ºï¼šåŒ…å«ä¸æ˜¯ <code>span</code> å…ƒç´ çš„ <code>section</code> å…ƒç´ <br><img src="https://guozhigq.github.io/img/css/has-not-1.png" alt="has-not"></p><h5 id="is"><a href="#is" class="headerlink" title=":is()"></a><code>:is()</code></h5><p>è¿™ä¸ªè¿˜ä¸æ˜¯å¾ˆç†è§£ï¼Œæœªå®Œå¾…ç»­ â€¦</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•ä¸€å¥CSSè¿˜åŸé¡µé¢æ ·å¼</title>
      <link href="/post/fb87caf8.html"/>
      <url>/post/fb87caf8.html</url>
      
        <content type="html"><![CDATA[<p>æ ‡é¢˜å¤šå°‘UCéœ‡æƒŠé¢˜çš„å‘³é“äº† å’³å’³ã€‚ã€‚ã€‚</p><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹å…ƒç´ åšä¸€äº›<strong>æ˜¾ç¤º&#x2F;éšè—</strong>åˆ‡æ¢ï¼Œä¾‹å¦‚å¸¸ç”¨çš„ <code>display</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">display</span>: block;</span><br><span class="line">diaplay: none;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œè¦æ±‚å¯¹åˆ—è¡¨æœ€å¤šå±•ç¤º3é¡¹ï¼Œç‚¹å‡»æŒ‰é’®åå…¨éƒ¨å±•ç¤ºã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* éšè— */</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(n+<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å±•ç¤º */</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.style</span><span class="selector-class">.display</span> = &#x27;block&#x27;;</span><br></pre></td></tr></table></figure><p>åˆæ­¥çœ‹æ¥ï¼Œæ²¡ä»€ä¹ˆæ¯›ç—…ï¼Œä½†æ˜¯ã€‚<br><img src="https://guozhigq.github.io/img/css/css-revert.png" alt="css revert"><br>å¾ˆæ˜æ˜¾åé¢ä¸¤é¡¹çš„ <code>li</code> æ ·å¼ä¸¢å¤±äº†ï¼Œå› ä¸º <code>li</code> æ ‡ç­¾é»˜è®¤çš„å±æ€§ä¸º <code>diaplay: list-item</code>ï¼Œæ”¹ä¸º <code>list-item</code> åï¼Œç¡®å®æ­£å¸¸äº†ã€‚<br><img src="https://guozhigq.github.io/img/css/css-revert2.png" alt="css revert2"><br>å¼€å‘ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç‰¹æ„è®°ä½å…ƒç´ æ›´æ”¹ä¹‹å‰çš„<code>diaplay</code>å±æ€§æœªå…å¤ªç´¯äº†ç‚¹ï¼ˆ <code>v-if</code> ã€<code>v-show</code> ä¸åœ¨è®¨è®ºèŒƒå›´å†…ï¼‰ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå±æ€§å¯ä»¥åœ¨åˆ‡æ¢æ—¶å¯¹ <code>diaplay</code> è¿›è¡Œè¿˜åŸå‘¢ï¼Ÿ<br>é‚£å°±æ˜¯æˆ‘ä»¬å°†è¦å­¦ä¹ çš„ <code>revert</code> å±æ€§ã€‚</p><h3 id="revert"><a href="#revert" class="headerlink" title="revert"></a>revert</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-class">.style</span><span class="selector-class">.display</span> = revert;</span><br></pre></td></tr></table></figure><p>revert å…³é”®å­—</p><blockquote><p>  å°†å±æ€§çš„çº§è”å€¼ä»å…¶å½“å‰å€¼æ¢å¤ä¸ºå½“å‰å…ƒç´ revertçš„å½“å‰æ ·å¼åŸç‚¹æœªè¿›è¡Œä»»ä½•æ›´æ”¹æ—¶å±æ€§åº”å…·æœ‰çš„å€¼ã€‚å› æ­¤ï¼Œå¦‚æœè¯¥å±æ€§ä»å…¶çˆ¶çº§ç»§æ‰¿ï¼Œåˆ™å®ƒä¼šå°†å±æ€§é‡ç½®ä¸ºå…¶ç»§æ‰¿å€¼ï¼Œå¦åˆ™é‡ç½®ä¸ºç”±ç”¨æˆ·ä»£ç†çš„æ ·å¼è¡¨ï¼ˆæˆ–ç”¨æˆ·æ ·å¼ï¼Œå¦‚æœå­˜åœ¨ï¼‰å»ºç«‹çš„é»˜è®¤å€¼ã€‚å®ƒå¯ä»¥åº”ç”¨äºä»»ä½•CSSå±æ€§ï¼ŒåŒ…æ‹¬CSSç®€å†™å±æ€§ã€‚</p></blockquote><p>ä¸€å¥è¯æ¦‚æ‹¬å°±æœ‰ï¼Œå°±è¿‘è¿˜åŸï¼Œå¦‚æœè¢«<code>revert</code>çš„å±æ€§æ˜¯ç»§æ‰¿è‡ªçˆ¶çº§ï¼Œåˆ™è¿˜åŸä¸ºçˆ¶çº§ã€‚<br>ä¸¾ä¸ªğŸŒ°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p&quot;</span>&gt;</span>æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.p</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹<code>p</code>æ ‡ç­¾å†…çš„æ–‡æœ¬ä¸ºçº¢è‰²ï¼Œå½“æˆ‘ä»¬æ›´æ”¹<code>color: revert</code>æ—¶ï¼Œ<code>p</code>æ ‡ç­¾å†…çš„æ–‡æœ¬ä¼šå˜æˆè“è‰²ï¼Œå¦‚æœ<code>p</code>ä¸ºæ ¹å…ƒç´ ï¼Œåˆ™æ ‡ç­¾å†…çš„æ–‡æœ¬ä¼šå˜æˆé»‘è‰²ã€‚</p><p>å¦‚æœæƒ³è¦ä¸€æ¬¡æ€§è¿˜åŸå¤šä¸ªå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨<code>all: revert</code><br><img src="https://guozhigq.github.io/img/css/css-revert3.png" alt="css revert3"><br>å¦‚ä¸Šå›¾ï¼Œå¯¹æ–‡æœ¬è®¾ç½®çš„<code>color</code>ã€<code>font-size</code>ã€<code>font-bold</code>æ ·å¼éƒ½è¢«è¿˜åŸä¸ºæµè§ˆå™¨é»˜è®¤çš„äº†ã€‚</p><p>é™¤äº† <code>revert</code>å¤–ï¼Œç±»ä¼¼çš„å…³é”®è¯è¿˜æœ‰ <code>inherit</code> ã€<code>initial</code> ã€<code>unset</code></p><h3 id="inherit"><a href="#inherit" class="headerlink" title="inherit"></a>inherit</h3><p>inherit ä½¿å…ƒç´ çš„å±æ€§ç»§æ‰¿å­çˆ¶çº§ï¼Œå¯ä»¥è¿ç”¨ä¸ä»»æ„å±æ€§ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬all</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attribute">color</span>: inherit;</span><br><span class="line">    <span class="attribute">font-size</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">all</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="initial"><a href="#initial" class="headerlink" title="initial"></a>initial</h3><p>initial è¡¨ç¤ºå°†å…ƒç´ çš„æŸä¸ªå±æ€§æ¢å¤è‡³åˆå§‹å€¼<br>ä¸¾ä¸ªğŸŒ°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p&quot;</span>&gt;</span>æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.p</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.p</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯¹ <code>p</code> æ ‡ç­¾ä½¿ç”¨äº† <code>color: initial;</code> å°† <code>color</code> æ¢å¤è‡³é»˜è®¤å€¼ï¼Œæ­¤æ—¶ï¼Œæ–‡æœ¬é¢œè‰²ä¼šå˜ä¸ºé»‘è‰²ï¼Œä½†æ˜¯å¤§å°è·Ÿå­—é‡ä¿ç•™ï¼Œ<strong>è¿™ä¸€ç‚¹ä¸åŒäº <code>revert</code></strong></p><p>é‚£ä¹ˆå°† <code>initial</code> ä½œç”¨åœ¨å…ƒç´ çš„ <code>all</code> å±æ€§ä¸Šå‘¢ï¼Ÿæˆ‘ä»¬æœŸæœ›å°†å…ƒç´ çš„æ‰€ä»¥å±æ€§è¿˜åŸè‡³<strong>æµè§ˆå™¨é»˜è®¤</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.p</span>&#123;</span><br><span class="line">  <span class="attribute">all</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–‡æœ¬é¢œè‰²å˜æˆäº†é»‘è‰²ï¼Œå­—ä½“å¤§å°è·Ÿå­—é‡ä¹Ÿæ¢å¤äº†é»˜è®¤çŠ¶æ€ï¼Œçœ‹ä¼¼æ»¡è¶³äº†æˆ‘ä»¬çš„è¦æ±‚ï¼Œæ¥ä¸‹æ¥ä½œç”¨åœ¨ <code>button</code> æ ‡ç­¾ä¸Šè¯•ä¸€ä¸‹:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.btn</span>&#123;</span><br><span class="line">  <span class="attribute">all</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æœŸæœ›çš„ç»“æœè·Ÿå®é™…ç»“æœ<br><img src="https://guozhigq.github.io/img/css/css-initial.png" alt="css initial"><br>å¾ˆæ˜æ˜¾ï¼Œä¸ä¸€è‡´ï¼Œ<code>button</code> çš„èƒŒæ™¯è‰²ã€è¾¹æ¡†åŒ…æ‹¬æ–‡æœ¬æ ·å¼éƒ½å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>åœ¨MDNä¸Šçœ‹åˆ°ä»¥ä¸‹æ ‡æ³¨</p><blockquote><p>ä¸åº”å°†åˆå§‹å€¼ä¸æµè§ˆå™¨æ ·å¼è¡¨æŒ‡å®šçš„å€¼æ··æ·†</p></blockquote><p>è¿™ä¸‹æ¸…æ¥šäº† åˆå§‹å€¼ !&#x3D; æµè§ˆå™¨é»˜è®¤å€¼ï¼Œæ‰€ä»¥å¯¹ <code>button</code> ä½¿ç”¨ <code>color: initial;</code> å¹¶æ²¡æœ‰è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œå½“ç„¶ä¸Šé¢çš„ <code>p</code> æ ‡ç­¾å…¶å®ä¹Ÿæ˜¯æœ‰æ‰€åå·®çš„ï¼Œæ‰€ä»¥ï¼Œâš ï¸ä½¿ç”¨ <code>color: initial;</code> è¦æ…é‡</p><h3 id="unset"><a href="#unset" class="headerlink" title="unset"></a>unset</h3><p>å¦‚æœå±æ€§å¯ä»¥ç»§æ‰¿è‡ªçˆ¶çº§ï¼Œå¹¶ä¸”åœ¨çˆ¶çº§ä¸­æœ‰å®šä¹‰ï¼Œè®¾ç½® <code>unset</code> åˆ™å°†è¯¥å±æ€§çš„å€¼è®¾ç½®ä¸ºç»§æ‰¿è‡ªçˆ¶çº§çš„å€¼ï¼Œå¦åˆ™è®¾ç½®ä¸ºåˆå§‹å€¼ã€‚<br>ä¹Ÿå°±æ˜¯å±æ€§æ˜¯å¯ç»§æ‰¿çš„ï¼Œä¸”çˆ¶çº§ä¸­æœ‰å®šä¹‰ ç­‰åŒäº <code>inherit</code> ï¼Œå¦åˆ™ï¼Œç­‰åŒäº <code>initial</code></p><p>åœ¨è¿™é‡Œå°±ä¸å®è·µäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSSæ–°ç‰¹æ€§ï¼š@containerå®¹å™¨æŸ¥è¯¢</title>
      <link href="/post/d8a09431.html"/>
      <url>/post/d8a09431.html</url>
      
        <content type="html"><![CDATA[<p>åˆæ˜¯åœ¨ç½‘ä¸Šæµæµªçš„ä¸€å¤© â€¦<br>ä»Šå¤©å­¦ä¹ cssçš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼š<code>@container</code>å®¹å™¨æŸ¥è¯¢ï¼Œå…¶å®ä¹Ÿä¸æ˜¯å¾ˆæ–°äº†ã€‚ï¼ˆ2022å¹´å„å¤§æµè§ˆå™¨å¼€å§‹æ”¯æŒï¼‰<br><img src="https://guozhigq.github.io/img/css/@container-compatibility.png" alt="@container å…¼å®¹æ€§"></p><p>æåˆ°<strong>æŸ¥è¯¢</strong>ï¼Œå¤§å®¶æ˜¯ä¸æ˜¯é¦–å…ˆä¼šæƒ³åˆ° <code>@media</code>ï¼Œ</p><h3 id="åª’ä½“æŸ¥è¯¢-media"><a href="#åª’ä½“æŸ¥è¯¢-media" class="headerlink" title="åª’ä½“æŸ¥è¯¢ @media"></a>åª’ä½“æŸ¥è¯¢ @media</h3><p>åœ¨ç›®å‰å‰ç«¯å“åº”å¼æ–¹æ¡ˆä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯é€šè¿‡<code>@media</code>æ¥å®ç°ï¼Œæ¯”å¦‚æ ¹æ®å¯è§†çª—å£çš„å®½é«˜åŠ¨æ€æ”¹å˜å…ƒç´ çš„å°ºå¯¸æˆ–å†…å®¹ã€‚</p><p><code>@media</code>çš„ä½¿ç”¨è§„åˆ™ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@media åª’ä½“ç±»å‹ åª’ä½“ç‰¹å¾è¡¨è¾¾å¼&#123;</span><br><span class="line">    <span class="comment">// æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå¯¹åº”æ ·å¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹ï¼Œåœ¨<code>screen</code>æœ€å¤§å®½åº¦ä¸º<code>600px</code>è·Ÿ<code>900px</code>æ—¶ï¼Œdivçš„èƒŒæ™¯è‰²ä¹Ÿå“åº”å¼çš„å‘ç”Ÿäº†å˜åŒ–ã€‚è¿™é‡Œåªæ˜¯ç®€å•ä¸¾ä¸ªä¾‹å­ï¼Œæ›´å¤šä½¿ç”¨ç‰¹æ€§å¯ä»¥åœ¨<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media">MDN</a>ä¸ŠæŸ¥çœ‹</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.div_1</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">900px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.div_1</span> &#123;</span><br><span class="line">      <span class="attribute">background</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>é‚£å½“æˆ‘ä»¬æƒ³å¯¹<code>div</code>çš„å­å…ƒç´ ä¹Ÿè¿›è¡Œå“åº”å¼å¤„ç†å‘¢ï¼Ÿ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.div_1</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">900px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.div_1</span> &#123;</span><br><span class="line">      <span class="attribute">background</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.div_1</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">        <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æŸäº›åœºæ™¯ä¸‹ï¼Œå­å…ƒç´ å¦‚æœä¹Ÿè¦æ ¹æ®æ¡ä»¶è¿›è¡Œå“åº”å¼ï¼Œåˆ™éœ€è¦ç»§æ‰¿çˆ¶å…ƒç´ çš„æ¡ä»¶ï¼Œå¤šå°‘æœ‰ç‚¹ç¹çäº†ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä½¿ç”¨ <code>@container</code> å®ç°å‘¢ï¼Ÿ</p><p>ä¸Šè¿°ä¾‹å­å¯ä»¥åœ¨<a href="https://codepen.io/guozhigq/pen/ZEmeqqJ">codepen</a>ä¸ŠæŸ¥çœ‹</p><h3 id="å®¹å™¨æŸ¥è¯¢-container"><a href="#å®¹å™¨æŸ¥è¯¢-container" class="headerlink" title="å®¹å™¨æŸ¥è¯¢ @container"></a>å®¹å™¨æŸ¥è¯¢ @container</h3><p>ä¸åŒäº<code>@media</code>é’ˆå¯¹äºå„é‡åª’ä½“ç±»å‹çš„æŸ¥è¯¢ï¼Œ<code>@container</code> é’ˆå¯¹çš„æ˜¯å¯¹å®¹å™¨å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç†ã€‚</p><p><code>@media</code> é€‚ç”¨äºå¤–å±‚ï¼Œ<code>@container</code>é€‚ç”¨äºå†…å±‚ï¼Œ<code>@container</code>é¢—ç²’åº¦æ›´ç»†</p><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><p><code>@container</code>çš„ä½¿ç”¨è§„åˆ™ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@container å®¹å™¨æ¡ä»¶&#123;</span><br><span class="line">    <span class="comment">// æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå¯¹åº”æ ·å¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@container</span> (<span class="attribute">width</span> &gt; <span class="number">400px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.5em</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h4><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å…³é”®å­—ï¼š</p><ul><li><code>and</code>ä¸æ¡ä»¶ï¼ˆåŒæ—¶æ»¡è¶³ï¼‰</li><li><code>or</code>æˆ–æ¡ä»¶ï¼ˆæ»¡è¶³å…¶ä¸€å³å¯ï¼‰</li><li><code>not</code>å¦å®šæ¡ä»¶ï¼ˆå–åï¼‰<br>æ³¨æ„ï¼š</code>and</code>æ¯ä¸ªå®¹å™¨æŸ¥è¯¢åªå…è®¸æœ‰ä¸€ä¸ªâ€œ</code>not</code>â€æ¡ä»¶ï¼Œå¹¶ä¸”ä¸èƒ½ä¸<code>or</code>å…³é”®å­—ä¸€èµ·ä½¿ç”¨</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å®¹å™¨å®½åº¦å¤§äºç­‰äº400æ—¶ç”Ÿæ•ˆ*/</span></span><br><span class="line"><span class="keyword">@container</span> <span class="keyword">not</span> (<span class="attribute">width</span> &lt; <span class="number">400px</span>) &#123;</span><br><span class="line">  <span class="comment">/* &lt;stylesheet&gt; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®¹å™¨å®½åº¦ã€é«˜åº¦å‡å¤§äº400æ—¶ç”Ÿæ•ˆ */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">width</span> &gt; <span class="number">400px</span>) <span class="keyword">and</span> (<span class="attribute">height</span> &gt; <span class="number">400px</span>) &#123;</span><br><span class="line">  <span class="comment">/* &lt;stylesheet&gt; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ»¡è¶³å…¶ä¸­ä¸€ä¸ªæ¡ä»¶åŠç”Ÿæ•ˆ éœ€è¦container-type: size */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">width</span> &gt; <span class="number">400px</span>) <span class="keyword">or</span> (<span class="attribute">height</span> &gt; <span class="number">400px</span>) &#123;</span><br><span class="line">  <span class="comment">/* &lt;stylesheet&gt; */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æš‚æ—¶æœªç”Ÿæ•ˆ */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">width</span> &gt; <span class="number">400px</span>) <span class="keyword">not</span> (<span class="attribute">height</span> &gt; <span class="number">400px</span>) &#123;</span><br><span class="line">  <span class="comment">/* &lt;stylesheet&gt; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…·ä½“æ•ˆæœè§:<a href="https://codepen.io/guozhigq/pen/oNQZQVj">https://codepen.io/guozhigq/pen/oNQZQVj</a></p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯èƒ½æœ‰åŒå­¦å‘ç°æˆ‘ä»¬å¯¹äºçˆ¶å…ƒç´ æ·»åŠ äº†<code>container-type: size</code>å±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§åˆèµ·ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</p><h4 id="å…³é”®å±æ€§"><a href="#å…³é”®å±æ€§" class="headerlink" title="å…³é”®å±æ€§"></a>å…³é”®å±æ€§</h4><p><code>container-type</code>å±æ€§å®šä¹‰åœ¨çˆ¶å…ƒç´ ä¸­ï¼Œç”¨æ¥æŒ‡å®šæŸ¥è¯¢çš„èŒƒå›´ï¼ˆæ¡ä»¶ï¼‰<br>ä¸»è¦æœ‰ä»¥ä¸‹çš„å€¼ï¼š</p><ul><li>size<ul><li>ç›‘å¬çˆ¶å…ƒç´ çš„ <strong>å®½</strong>ã€<strong>é«˜</strong> å˜åŒ–ã€‚å®šä¹‰ä¸º<code>size</code>åï¼Œå¯ä»¥ä½¿ç”¨<code>width</code>ã€<code>height</code>çš„åˆ¤æ–­æ¡ä»¶ã€‚<br>å¯ä»¥å°è¯•å°†ä¾‹å­ä¸­çš„<code>container-type: size</code>æ”¹ä¸º<code>container-type: inline-size</code>å°è¯•ï¼Œä½ ä¼šå‘ç°ä¸<code>height</code>ç›¸å…³çš„åˆ¤æ–­ä¼šå¤±æ•ˆ(<code>inline-size</code>ç›‘å¬çˆ¶å…ƒç´ çš„ <strong>å®½</strong> çš„å˜åŒ–)<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span>&#123;</span><br><span class="line">    <span class="comment">/* container-type: size; */</span></span><br><span class="line">    container-type: inline-size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* åˆ¤æ–­æ¡ä»¶ä¸­æ²¡æœ‰ heightï¼Œä»ç„¶æœ‰æ•ˆ */</span></span><br><span class="line"><span class="keyword">@container</span> <span class="keyword">not</span> (<span class="attribute">width</span> &lt; <span class="number">400px</span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ¤æ–­æ¡ä»¶ä¸­æœ‰ heightï¼Œå¤±æ•ˆ */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">width</span> &gt; <span class="number">400px</span>) <span class="keyword">and</span> (<span class="attribute">height</span> &gt; <span class="number">400px</span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ¤æ–­æ¡ä»¶ä¸­ height ä¸æ˜¯å”¯ä¸€æ¡ä»¶ï¼Œä»ç„¶æœ‰æ•ˆ */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">width</span> &gt; <span class="number">400px</span>) <span class="keyword">or</span> (<span class="attribute">height</span> &gt; <span class="number">400px</span>)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* @container (width &gt; 400px) not (height &gt; 400px)&#123;&#125; */</span></span><br></pre></td></tr></table></figure></li></ul></li><li>inline-size<ul><li>ç›‘å¬çˆ¶å…ƒç´ çš„ <strong>å®½</strong> å˜åŒ–ï¼Œåœ¨æ­¤æ¡ä»¶ä¸‹ä¸<code>height</code>ç›¸å…³çš„åˆ¤æ–­ä¸ç”Ÿæ•ˆï¼Œå‚è€ƒä»¥ä¸Šä»£ç </li></ul></li><li>normal <ul><li>ä¸ç›‘å¬çˆ¶å…ƒç´ çš„å°ºå¯¸å˜åŒ–ï¼Œåœ¨æ­¤æ¡ä»¶ä¸‹<code>width</code>ã€<code>height</code>çš„åˆ¤æ–­æ¡ä»¶éƒ½ä¸ç”Ÿæ•ˆï¼Œ</li></ul></li></ul><h4 id="åˆ¤æ–­æ¡ä»¶"><a href="#åˆ¤æ–­æ¡ä»¶" class="headerlink" title="åˆ¤æ–­æ¡ä»¶"></a>åˆ¤æ–­æ¡ä»¶</h4><p>å¦å¤–çš„ï¼Œåˆ¤æ–­æ¡ä»¶é™¤äº†<code>width</code>ã€<code>height</code> ä¹‹å¤–è¿˜æœ‰ï¼š</p><ul><li>aspect-ratio: æ ¹æ®çˆ¶å…ƒç´ çš„æ¯”ä¾‹è¿›è¡Œåˆ¤æ–­  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span>&#123;</span><br><span class="line">    <span class="comment">/* container-type å¿…é¡»è®¾ç½®ä¸ºsize */</span></span><br><span class="line">    container-type: size; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* åˆ¤æ–­å®½é«˜æ¯”å¤§äº2æ—¶ç”Ÿæ•ˆ */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">aspect-ratio</span> &gt; <span class="number">2</span>)&#123;&#125;</span><br><span class="line"><span class="comment">/* ç»“åˆå…¶ä»–åˆ¤æ–­æ¡ä»¶ä¸€èµ·ä½¿ç”¨ */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">aspect-ratio</span> &gt; <span class="number">2</span>) <span class="keyword">and</span> (<span class="attribute">width</span> &gt; <span class="number">400px</span>) <span class="keyword">and</span> (<span class="attribute">height</span> &gt; <span class="number">400px</span>)&#123;&#125;</span><br></pre></td></tr></table></figure></li><li>orientation: æ ¹æ®å±å¹•æ–¹å‘è¿›è¡Œåˆ¤æ–­ï¼ˆlandscapeæ¨ªå± portraitç«–å±ï¼‰<ul><li>åœ¨codepenæµ‹è¯•æ—¶ï¼Œçˆ¶å…ƒç´  width &gt; heightæ—¶landscapeï¼ˆæ¨ªå±ï¼‰ç”Ÿæ•ˆ</li><li>åœ¨codepenæµ‹è¯•æ—¶ï¼Œçˆ¶å…ƒç´  width &lt; heightæ—¶portraitï¼ˆç«–å±ï¼‰ç”Ÿæ•ˆ<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card</span>&#123;</span><br><span class="line">    <span class="comment">/* container-type å¿…é¡»è®¾ç½®ä¸ºsize */</span></span><br><span class="line">    container-type: size; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* åœ¨codepenæµ‹è¯•æ—¶ï¼Œçˆ¶å…ƒç´  width &gt; heightæ—¶landscapeç”Ÿæ•ˆ */</span></span><br><span class="line"><span class="comment">/* åœ¨codepenæµ‹è¯•æ—¶ï¼Œçˆ¶å…ƒç´  width &lt;&gt; heightæ—¶portraitç”Ÿæ•ˆ */</span></span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">orientation</span>: landscape)&#123;&#125;</span><br><span class="line"><span class="keyword">@container</span> (<span class="attribute">orientation</span>: portrait)&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li>inline-size: å…·ä½“å¦‚ä½•ä½¿ç”¨æš‚æ—¶ä¸æ¸…æ¥š</li><li>block-size: å…·ä½“å¦‚ä½•ä½¿ç”¨æš‚æ—¶ä¸æ¸…æ¥š</li></ul><p>ç»¼ä¸Šï¼Œå¯ä»¥çœ‹å‡ºæ¥<code>@container</code>çš„åˆ¤æ–­åŸºäºçˆ¶å…ƒç´ ï¼Œè€Œ<code>@media</code>åˆ™åŸºäºè§†å›¾ï¼Œ<code>@container</code>ä½¿ç”¨æ›´çµæ´»ï¼Œèƒ½å¤Ÿæ»¡è¶³æ›´å¤šçš„ä½¿ç”¨åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨for-ofå¾ªç¯å¯¹è±¡</title>
      <link href="/post/d721cd2a.html"/>
      <url>/post/d721cd2a.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨å¯¹è±¡å’Œæ•°ç»„è¿›è¡Œå¾ªç¯éå†æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨<code>for-in</code>ã€<code>for-of</code>ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>for-of</code>æ˜¯æ— æ³•éå†å¯¹è±¡çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">of</span> obj)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Uncaught TypeError: obj is not iterable</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºå¯¹è±¡å†…éƒ¨æ˜¯æ²¡æœ‰è¿­ä»£å™¨å¯¹è±¡ï¼ˆ<code>iterator</code>ï¼‰çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦æ‰‹åŠ¨è®©å¯¹è±¡å®ç°å¯è¿­ä»£å‘¢ï¼Ÿ</p><blockquote><p>ES6 è§„å®šï¼Œé»˜è®¤çš„ Iterator æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„ Symbol.iterator å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰ Symbol.iterator å±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯â€å¯éå†çš„â€ï¼ˆiterableï¼‰</p></blockquote><p>æˆ‘ä»¬é€šè¿‡å¯¹å¯¹è±¡è®¾ç½®åŸå‹å±æ€§æ¥å®ç°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>[<span class="title class_">Symbol</span>.<span class="property">iterator</span>] = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// é‡è¦</span></span><br><span class="line">    <span class="keyword">let</span> self = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// æ¯æ¬¡éå†æ—¶ï¼Œè°ƒç”¨next()ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="attr">next</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> done = i &gt;= keys.<span class="property">length</span>;</span><br><span class="line">            <span class="keyword">let</span> value = !done ? self[keys[i++]] : <span class="literal">undefined</span>;</span><br><span class="line">            <span class="comment">// è¯¥å¯¹è±¡å†…åŒ…å«ä¸¤ä¸ªå€¼</span></span><br><span class="line">            <span class="comment">// done è¡¨ç¤ºæ˜¯å¦éå†æ˜¯å¦å®Œæˆ</span></span><br><span class="line">            <span class="comment">// value è¡¨ç¤ºå½“å‰å€¼</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">done</span>: done,</span><br><span class="line">                <span class="attr">value</span>: value</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>,<span class="attr">c</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">of</span> obj2)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 2 3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºæ¯æ¬¡è¿­ä»£ï¼Œå…¶å®å°±æ˜¯åœ¨è°ƒç”¨è¿­ä»£å™¨çš„ <code>next()</code> æ–¹æ³•ã€‚å…¶ä¸­ <code>done</code> è¡¨ç¤ºéå†æ˜¯å¦å®Œæˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ”¹å˜doneçš„çŠ¶æ€æ¥ç»“æŸéå†ã€‚<br>æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">... ...</span><br><span class="line">    <span class="attr">next</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// æ‰‹åŠ¨æ§åˆ¶ åªéå†ä¸¤æ¬¡</span></span><br><span class="line">        <span class="keyword">let</span> done = i &gt;= <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// ç›´æ¥ç»“æŸéå†</span></span><br><span class="line">        <span class="keyword">let</span> done = <span class="literal">true</span>;</span><br><span class="line">        ... ...</span><br><span class="line">    &#125;</span><br><span class="line">... ...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨loooo...ngä»»åŠ¡</title>
      <link href="/post/bc650c39.html"/>
      <url>/post/bc650c39.html</url>
      
        <content type="html"><![CDATA[<h2 id="æµè§ˆå™¨é•¿ä»»åŠ¡"><a href="#æµè§ˆå™¨é•¿ä»»åŠ¡" class="headerlink" title="æµè§ˆå™¨é•¿ä»»åŠ¡"></a>æµè§ˆå™¨é•¿ä»»åŠ¡</h2><p>é¦–å…ˆï¼Œåœ¨ä½ çš„æƒ³è±¡ä¸­ï¼Œå¤šé•¿çš„ä»»åŠ¡å‘¢ç®—æ˜¯<strong>é•¿ä»»åŠ¡</strong>å‘¢ï¼Ÿ1000æ¯«ç§’? è¿˜æ˜¯ 500æ¯«ç§’ï¼Œno noï¼Œéƒ½ä¸æ˜¯ï¼Œè¶…è¿‡<strong>50æ¯«ç§’</strong>çš„å°±ç®—<strong>é•¿ä»»åŠ¡</strong>ã€‚</p><p>åœ¨äº†è§£æ›´å¤šå‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ <code>RAIL æ¨¡å‹</code> çš„åŸºæœ¬æ¦‚å¿µã€‚</p><p><strong>RAIL</strong> æ˜¯ä¸€ç§ä»¥<strong>ç”¨æˆ·ä¸ºä¸­å¿ƒ</strong>çš„æ€§èƒ½æ¨¡å‹ï¼Œå®ƒæä¾›äº†ä¸€ç§è€ƒè™‘æ€§èƒ½çš„ç»“æ„ã€‚è¯¥æ¨¡å‹å°†ç”¨æˆ·ä½“éªŒåˆ†è§£åˆ°æŒ‰é”®æ“ä½œï¼ˆä¾‹å¦‚ï¼Œç‚¹å‡»ã€æ»šåŠ¨ã€åŠ è½½ï¼‰ä¸­ï¼Œå¸®åŠ©æ‚¨ä¸ºæ¯ä¸ªæ“ä½œå®šä¹‰æ€§èƒ½ç›®æ ‡ã€‚</p><p>RAIL ä»£è¡¨ Web åº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„å››ä¸ªä¸åŒæ–¹é¢ï¼šå“åº”ã€åŠ¨ç”»ã€ç©ºé—²å’ŒåŠ è½½ã€‚</p><p><img src="https://web-dev.imgix.net/image/admin/uc1IWVOW2wEhIY6z4KjJ.png?auto=format&w=1600" alt="RAIL"></p><p>ä»ç”¨æˆ·è§’åº¦å‡ºå‘ï¼Œå¯¹äºæ„ŸçŸ¥é¡µé¢åŠ è½½æ€§èƒ½åˆ†ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p><ul><li>0 è‡³ 16 æ¯«ç§’<ul><li>ç”¨æˆ·éå¸¸å…³æ³¨è½¨è¿¹è¿åŠ¨ï¼Œä»–ä»¬ä¸å–œæ¬¢ä¸æµç•…çš„åŠ¨ç”»ã€‚å¦‚æœæ¯ç§’æ¸²æŸ“ 60 ä¸ªæ–°å¸§ï¼Œä»–ä»¬å°±è®¤ä¸ºåŠ¨ç”»å¾ˆæµç•…ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€å¸§åªæœ‰ 16 æ¯«ç§’æ—¶é—´ï¼Œè¿™åŒ…æ‹¬æµè§ˆå™¨å°†æ–°å¸§ç»˜åˆ¶åˆ°å±å¹•æ‰€éœ€çš„æ—¶é—´ï¼Œå› è€Œåº”ç”¨çº¦æœ‰ 10 æ¯«ç§’çš„æ—¶é—´æ¥ç”Ÿæˆä¸€ä¸ªå¸§ã€‚</li></ul></li><li>0 åˆ° 100 æ¯«ç§’<ul><li>åœ¨æ­¤æ—¶é—´çª—å£å†…å“åº”ç”¨æˆ·æ“ä½œä¼šè®©ç”¨æˆ·è§‰å¾—ç»“æœæ˜¯å³æ—¶å‘ˆç°çš„ã€‚å¦‚æœæ—¶é—´æ›´é•¿ï¼Œæ“ä½œä¸ç”¨æˆ·ååº”ä¹‹é—´çš„è”ç³»å°±ä¼šä¸­æ–­ã€‚</li></ul></li><li>100 åˆ° 1000 æ¯«ç§’<ul><li>åœ¨æ­¤æ—¶é—´çª—å£å†…ï¼Œç”¨æˆ·ä¼šè§‰å¾—ä»»åŠ¡è¿›å±•åŸºæœ¬ä¸Šæ˜¯è‡ªç„¶è¿ç»­çš„ã€‚å¯¹ Web ä¸Šçš„å¤§å¤šæ•°ç”¨æˆ·æ¥è¯´ï¼ŒåŠ è½½é¡µé¢æˆ–æ›´æ”¹è§†å›¾æ˜¯ä¸€é¡¹ä»»åŠ¡ã€‚</li></ul></li><li>1000 æ¯«ç§’æˆ–æ›´é•¿<ul><li>è¶…è¿‡ 1000 æ¯«ç§’ï¼ˆ1 ç§’ï¼‰ï¼Œç”¨æˆ·çš„æ³¨æ„åŠ›å°±ä¼šä»æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¸Šè½¬ç§»ã€‚</li></ul></li><li>10000 æ¯«ç§’æˆ–æ›´é•¿<ul><li>è¶…è¿‡ 10000 æ¯«ç§’ï¼ˆ10 ç§’ï¼‰ï¼Œç”¨æˆ·ä¼šæ„Ÿåˆ°å¤±æœ›ï¼Œå¹¶ä¸”å¯èƒ½æ”¾å¼ƒä»»åŠ¡ã€‚ä»–ä»¬ä»¥åå¯èƒ½ä¼šå›æ¥ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šå†å›æ¥ã€‚</li></ul></li></ul><h3 id="ä¸ºä»€ä¹ˆæ˜¯50æ¯«ç§’"><a href="#ä¸ºä»€ä¹ˆæ˜¯50æ¯«ç§’" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯50æ¯«ç§’"></a>ä¸ºä»€ä¹ˆæ˜¯50æ¯«ç§’</h3><p>æ ¹æ® <strong>RAIL</strong> ï¼Œè‰¯å¥½çš„ç½‘é¡µæ€§èƒ½éœ€è¦åœ¨ 100 æ¯«ç§’å†…å“åº”ç”¨æˆ·è¾“å…¥ï¼Œè®©ç”¨æˆ·æ„Ÿè§‰äº¤äº’æ˜¯å³æ—¶çš„ã€‚</p><p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¶…è¿‡50æ¯«ç§’å°±ç®—<strong>é•¿ä»»åŠ¡</strong>å‘¢ï¼Ÿè¿™ä¸€ç•Œé™ä¸»è¦æ˜¯æ ¹æ®æµè§ˆå™¨çš„äº‹ä»¶é˜Ÿåˆ—æœºåˆ¶å†³å®šçš„ï¼Œå¦‚æœä»»æ„ä¸€æ¬¡ä»»åŠ¡çš„è€—æ—¶è¶…è¿‡50msï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡ç”¨æˆ·è¾“å…¥å‘ç”Ÿæ—¶ï¼Œæµè§ˆå™¨é¦–å…ˆè¦ç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆå†è¿›è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ºäº†èƒ½å¤Ÿåœ¨100mså†…å“åº”ç”¨æˆ·æ“ä½œï¼Œç•™ç»™è¿™ä¸€æ¬¡æ“ä½œå“åº”çš„æ—¶é—´å°±ä¸åˆ°50æ¯«ç§’äº†ï¼Œæ‰€ä»¥åº”ç”¨å¿…é¡»åœ¨æ¯ 50 æ¯«ç§’å†…å°†æ§åˆ¶è¿”å›ç»™ä¸»çº¿ç¨‹ã€‚</p><p><img src="https://web-dev.imgix.net/image/admin/I7HDZ9qGxe0jAzz6PxNq.png?auto=format&w=1600"></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¢æ¡†éƒ¨åˆ†å³ä¸ºé•¿ä»»åŠ¡</p><p><img src="https://guozhigq.github.io/img/browser/long_task.png" alt="long_task"></p><p>ç‚¹å‡»é•¿ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸‹æ–¹çš„è¯¦æƒ…ä¸­æŸ¥çœ‹å…·ä½“åŸå› <br><img src="https://guozhigq.github.io/img/browser/long_task_detail.png" alt="long_task_detail"></p><h3 id="å¦‚ä½•ä¼˜åŒ–"><a href="#å¦‚ä½•ä¼˜åŒ–" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–"></a>å¦‚ä½•ä¼˜åŒ–</h3><p>é•¿ä»»åŠ¡äº§ç”Ÿçš„åŸå› </p><ul><li>jsæ–‡ä»¶è¿‡å¤§ï¼ŒåŠ è½½ã€æ‰§è¡Œæ…¢</li><li>jsé€»è¾‘è¾ƒå¤šï¼Œç´¯è®¡æ‰§è¡Œæ…¢</li></ul><p>å¯¹åº”çš„è§£å†³æ–¹æ¡ˆ</p><ul><li>jsæ–‡ä»¶æ‹†åˆ†ï¼Œå¯ä»¥ä½¿ç”¨wepackæ’ä»¶ <code>SplitChunksPlugin</code></li><li>ä½¿ç”¨åŠ¨æ€å¯¼å…¥ï¼Œæ¯”å¦‚ <code>import()</code></li><li>å°†ä¸é‡è¦çš„é€»è¾‘æ»åå¤„ç†<ul><li>ä½¿ç”¨<code>setTimeout</code>æˆ–è€…<setRe></li><li>ä½¿ç”¨ <code>window.requestIdleCallback()</code> å°†ä¸é‡è¦çš„ä»»åŠ¡å»¶è¿Ÿåˆ°ç©ºé—²æ—¶å†å¤„ç†</li></ul></li><li>ä¼˜å…ˆçº§é«˜çš„æ–‡ä»¶ï¼Œé¢„åŠ è½½<ul><li>åœ¨<code>webpack</code>ä¸­ï¼Œé€šè¿‡åœ¨ <code>import()</code>ä¸­ä½¿ç”¨magic commentsï¼ˆé­”æ³•æ³¨é‡Šï¼‰æ”¯æŒé¢„åŠ è½½ï¼Œå‚è€ƒé“¾æ¥: <a href="https://webpack.js.org/guides/code-splitting/#prefetchingpreloading-modules">Prefetching&#x2F;Preloading modules</a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(_<span class="comment">/* webpackPreload: true */</span>_ <span class="string">&quot;CriticalChunk&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå°æŠ€å·§</title>
      <link href="/post/b120bc47.html"/>
      <url>/post/b120bc47.html</url>
      
        <content type="html"><![CDATA[<p>Qï¼šæœ¬åœ°åˆ†æ”¯developä¸å°å¿ƒè¢«åˆ äº†ï¼Œæ€ä¹ˆåŠ ï¼ï¼ï¼Ÿ<br>Aï¼šä¸è¦æ…Œï¼Œä½¿ç”¨ <code>git branch new_develop 5fs3424</code> é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œé‚£å€‹ <code>5fs3424</code>  æ˜¯æ€ä¹ˆæ¥çš„ã€‚é€šå¸¸åœ¨åˆ æ‰åˆ†æ”¯çš„æ—¶å€™ï¼Œä¼šæœ‰è¿™æ ·çš„æç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch -D develop</span><br><span class="line">Deleted branch develop (was 5fs3424).</span><br></pre></td></tr></table></figure><p>Qï¼šAåˆ†æ”¯æƒ³è¦åˆå¹¶Båˆ†æ”¯çš„æŸä¸ªcommit ï¼Ÿ<br>Aï¼šåœ¨Aåˆ†æ”¯ä¸Š <code>git cherry-pick 5fs3424</code>ï¼Œ<code>5fs3424</code>ä¸ºBåˆ†æ”¯ä¸Šcommitå€¼ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ¥å¤šä¸ªï½</p><p>Qï¼šæ•²äº†ä¸€åŠä»£ç ï¼Œ è¦åˆ‡å¦ä¸€ä¸ªåˆ†æ”¯æ”¹ç´§æ€¥bugæ€ä¹ˆåŠ ï¼Ÿ<br>Aï¼šå¯ä»¥ä½¿ç”¨ <code>git stash</code> å°†ç›®å‰çš„è¿›åº¦ä¿å­˜ï¼Œç­‰åˆ‡å›åˆ†æ”¯åå†ä½¿ç”¨ <code>git stash pop</code> æ‰¾å›ï¼Œ<code>git stash list</code> å¯ä»¥æŸ¥çœ‹ç›®å‰å·²ä¿å­˜çš„å¤šä¸ªè¿›åº¦ã€‚<br>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>git commit</code> æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œç­‰åˆ‡å›åˆ†æ”¯åå†ä½¿ç”¨ <code>git reset</code> æŠŠ commit æ‹†å¼€æ¥ç»§ç»­åšã€‚</p><p>Q: git swithåˆ‡æ¢åˆ†æ”¯<br>A: ä¸ºäº†é¿å…åœ¨ä½¿ç”¨ <code>git checkout</code>å‘½ä»¤åˆ‡æ¢åˆ†æ”¯è·Ÿæ¢å¤æ–‡ä»¶ç­‰åŠŸèƒ½äº§ç”Ÿæ··æ·†ï¼Œgit 2.23 ç‰ˆæœ¬æ–°å¢äº† <code>switch</code> å‘½ä»¤ï¼Œç”¨äºåˆ‡æ¢åˆ†æ”¯ã€‚<br>å…·ä½“ä½¿ç”¨å¦‚ä¸‹ï¼š</p><ol><li>åˆ‡æ¢åˆ†æ”¯</li></ol><ul><li><code>git switch branch_a</code>è¡¨ç¤ºåˆ‡æ¢åˆ°<code>branch_a</code>åˆ†æ”¯</li></ul><ol start="2"><li>åˆ›å»ºæ–°åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ”¹åˆ†æ”¯ï¼š</li></ol><ul><li><code>git switch -c branch_a</code>è¡¨ç¤ºåˆ›å»ºæ–°çš„<code>branch_a</code>åˆ†æ”¯å¹¶è¿›è¡Œåˆ‡æ¢ï¼Œç­‰åŒäº <code>git checkout -b branch_a</code></li></ul><ol start="3"><li>ä»¥æŸä¸ªcommitåˆ›å»ºåˆ†æ”¯ï¼š</li></ol><ul><li>æ ¹æ®<code>git log</code>è·å–åˆ°æŸä¸ª<code>commitId</code>ï¼Œæ‰§è¡Œ<code>git switch branch_a commitId</code>ï¼Œè¡¨ç¤ºåŸºäº<code>commitId</code>åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯<code>branch_a</code></li></ul><ol start="4"><li>ä»¥æŸä¸ªtagåˆ›å»ºåˆ†æ”¯ï¼š</li></ol><ul><li><code>git switch branch_a tag</code> ä¸<strong>ä»¥æŸä¸ªcommit åˆ›å»ºåˆ†æ”¯</strong>å¤§è‡´ç›¸åŒï¼Œåªä¸è¿‡<code>commitId</code>éœ€è¦æ”¹ä¸ºæŸä¸ª<code>tag</code></li></ul><ol start="5"><li>åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯ï¼š <code>git switch -</code></li></ol><ul><li>å½“æˆ‘ä»¬åœ¨<code>branch_a</code>åˆ†æ”¯ä½¿ç”¨<code>git switch branch_b</code>åˆ‡æ¢åˆ°<code>branch_b</code>åˆ†æ”¯åï¼Œä½¿ç”¨<code>git switch -</code>å³å¯å†æ¬¡åˆ‡æ¢å›<code>branch_a</code>åˆ†æ”¯ï¼Œåˆ°äº†<code>branch_a</code>åˆ†æ”¯ä½¿ç”¨<code>git switch -</code>åˆ‡æ¢å›<code>branch_b</code>ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´æ¥å›åˆ‡æ¢</li></ul></br>]]></content>
      
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŠèŠäº‹ä»¶å¾ªç¯æœºåˆ¶</title>
      <link href="/post/8f637f35.html"/>
      <url>/post/8f637f35.html</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦è®¨è®ºçš„æ˜¯JavaSciptçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼ˆevent loopï¼‰ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯æœºåˆ¶</li><li>äº‹ä»¶å¾ªç¯æœºåˆ¶çš„è¡¨ç°</li><li>æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯</li><li>nodejsçš„äº‹ä»¶å¾ªç¯ï¼ˆå¾…è¡¥å……ï¼‰</li></ol><h2 id="ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯æœºåˆ¶"><a href="#ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯æœºåˆ¶" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯æœºåˆ¶"></a>ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯æœºåˆ¶</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œ<code>JavaScript</code> æ˜¯å•çº¿ç¨‹çš„ï¼ˆåŸå› åœ¨æ­¤å¤„ä¸åšè¿‡å¤šèµ˜è¿°ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„äº‹ä»¶éƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè¿™ä¸ªçº¿ç¨‹è´Ÿè´£å¤„ç†ï¼š</p><ul><li>ç”¨æˆ·äº¤äº’äº‹ä»¶</li><li>DOMå…ƒç´ æ›´æ–°ã€ç»˜åˆ¶</li><li>æ‰§è¡Œjsä»£ç </li><li>â€¦</li></ul><p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œjs ä¼šç”Ÿæˆä¸€ä¸ªä¸è¿™ä¸ªæ–¹æ³•å¯¹åº”çš„æ‰§è¡Œç¯å¢ƒï¼ˆ<code>context</code>ï¼‰ï¼Œåˆå«æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚<br>è¿™ä¸ªæ‰§è¡Œç¯å¢ƒä¸­å­˜åœ¨ç€è¿™ä¸ªæ–¹æ³•çš„ç§æœ‰ä½œç”¨åŸŸï¼Œä¸Šå±‚ä½œç”¨åŸŸçš„æŒ‡å‘ï¼Œæ–¹æ³•çš„å‚æ•°ï¼Œè¿™ä¸ªä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡ä»¥åŠè¿™ä¸ªä½œç”¨åŸŸçš„thiså¯¹è±¡ã€‚ å½“ä¸€ç³»åˆ—è¿™æ ·çš„æ–¹æ³•è¢«ä¾æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œjs ä¼šå°†ä»–ä»¬æ”¾å…¥ <strong>æ‰§è¡Œæ ˆ</strong> ä¸­ä¾æ¬¡æ‰§è¡Œï¼ˆæ’é˜Ÿï¼‰ã€‚</p><p>å¦‚æœæŸä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œåé¢çš„ä»»åŠ¡åˆ™ä¼šä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œä»»åŠ¡æ‰§è¡Œæ•ˆç‡ä½ä¸”ç”¨æˆ·ä½“éªŒä¹Ÿä¸å¥½ï¼Œæ‰€ä»¥æœ‰äº†<code>å¼‚æ­¥ä»»åŠ¡</code> &amp; <code>äº‹ä»¶å¾ªç¯æœºåˆ¶</code>ã€‚</p><p>åœ¨ js ä¸­ï¼Œå¸¸ç”¨çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼æœ‰<strong>å›è°ƒå‡½æ•°</strong>ã€<strong>Promise</strong> å’Œ <strong>async&#x2F;await</strong> ç­‰ã€‚è¿™äº›æ–¹å¼éƒ½å¯ä»¥è®© js ä»£ç å¼‚æ­¥æ‰§è¡Œï¼Œä»è€Œé¿å…é•¿æ—¶é—´é˜»å¡ UI çº¿ç¨‹ã€‚è€Œå¼‚æ­¥ä»»åŠ¡çš„å…³é”®å°±åœ¨äºä»»åŠ¡é˜Ÿåˆ—ï¼Œå½“å¼‚æ­¥ä»»åŠ¡å¼€å§‹æ‰§è¡Œçš„ï¼Œä¼šæ”¾å…¥è¿™ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œå®Œæˆä¹‹åï¼Œå†ä»ä»»åŠ¡é˜Ÿåˆ—å¼¹å‡ºï¼Œè¿™ä¸ªä¸‹é¢è¯¦ç»†è¯´æ˜ã€‚</p><h2 id="äº‹ä»¶å¾ªç¯æœºåˆ¶çš„è¡¨ç°"><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶çš„è¡¨ç°" class="headerlink" title="äº‹ä»¶å¾ªç¯æœºåˆ¶çš„è¡¨ç°"></a>äº‹ä»¶å¾ªç¯æœºåˆ¶çš„è¡¨ç°</h2><p>jsä¸­ä»»åŠ¡ä¸»è¦åˆ†ä¸ºï¼š</p><ul><li>åŒæ­¥ä»»åŠ¡ï¼šé©¬ä¸Šå¯ä»¥æ‹¿åˆ°ç»“æœï¼Œè€—æ—¶è¾ƒçŸ­</li><li>å¼‚æ­¥ä»»åŠ¡ï¼šä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å¯ä»¥æ‹¿åˆ°ç»“æœï¼Œæ—¶é—´æœªçŸ¥</li></ul><p>å½“ <strong>æ‰§è¡Œæ ˆ</strong> ä¸­å‡ºç°äº†å¼‚æ­¥ä»»åŠ¡æ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸çœ‹è®©å¼‚æ­¥ä»»åŠ¡å¦å¤–æ’é˜Ÿå‘¢ï¼Œè¿™æ ·ä¹Ÿä¸å½±å“åŒæ­¥ä»»åŠ¡çš„æ‰§è¡Œæ•ˆç‡ï¼Œæ˜¯çš„ï¼Œäºæ˜¯jsä¸­æœ‰äº†äº‹ä»¶é˜Ÿåˆ—ï¼ˆTask Queueï¼‰çš„æ¦‚å¿µï¼š<br>jså¼•æ“é‡åˆ°ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åå¹¶ä¸ä¼šä¸€ç›´ç­‰å¾…å…¶è¿”å›ç»“æœï¼Œè€Œæ˜¯ä¼šå°†è¿™ä¸ªä»»åŠ¡æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–ä»»åŠ¡ã€‚å½“ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡è¿”å›ç»“æœåï¼Œjsä¼šå°†è¿™ä¸ªä»»åŠ¡åŠ å…¥å¦å¤–ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>äº‹ä»¶é˜Ÿåˆ—</strong>ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œéœ€è¦ç­‰åˆ°<strong>æ‰§è¡Œæ ˆ</strong>ä¸­çš„åŒæ­¥ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆä¹‹åï¼Œä¸»çº¿ç¨‹<strong>è½®è®­</strong>æŸ¥çœ‹äº‹ä»¶é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œæ˜¯çš„<strong>è½®è®­</strong>ï¼Œå› ä¸ºä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šæœ‰æ–°çš„ åŒæ­¥ä»»åŠ¡&#x2F;å¼‚æ­¥ä»»åŠ¡ æ’è¿›æ‰§è¡Œæ ˆï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹ä¼šä¸€ç›´åœ¨<strong>æ‰§è¡Œæ ˆ</strong>è·Ÿ<strong>ä»»åŠ¡é˜Ÿåˆ—</strong>ä¸­è½®è®­ï¼Œå…¶å®è¿™å¤§æ¦‚å°±æ˜¯<strong>äº‹ä»¶å¾ªç¯</strong>çš„æœºåˆ¶äº†ï¼Œæ•´ä½“æµç¨‹å¤§æ¦‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p>å¦‚æœåœ¨å¼‚æ­¥ä»»åŠ¡å®Œæˆæˆ–æ”¾å…¥æ‰§è¡Œæ ˆæ‰§è¡Œï¼Œæœ‰æ–°çš„åŒæ­¥ä»»åŠ¡äº§ç”Ÿï¼Œåˆ™ä¼šå¯¼è‡´å¼‚æ­¥ä»»åŠ¡å»¶è¿Ÿæ‰§è¡Œã€‚æ¯”å¦‚å¯èƒ½ä¼šå¯¼è‡´ <code>setTimeout</code> ä¸å‡†</p><p><img src="https://guozhigq.github.io/img/event_loop.png" alt="event loop"></p><p>ä½†æ˜¯ï¼Œè¿˜æ²¡å®Œã€‚ã€‚ã€‚<br>å¼‚æ­¥ä»»åŠ¡åˆ†ä¸ºå¾ˆå¤šç§ä¸”æ‰§è¡Œä¼˜å…ˆçº§ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¯¹äºå¼‚æ­¥ä»»åŠ¡åˆåšäº†ç»†åˆ†ï¼šå®ä»»åŠ¡ã€å¾®ä»»åŠ¡</p><p>å®ä»»åŠ¡åŒ…æ‹¬æœ‰</p><ul><li>Httpè¯·æ±‚ã€</li><li>setTimeout</li><li>setInterval</li><li>requestAnimationFrame</li></ul><p>å¾®ä»»åŠ¡åŒ…æ‹¬æœ‰ï¼š</p><ul><li>promise.then</li><li>promise.catch</li><li>promise.finally</li><li>MutationObserver</li></ul><p>å¾®ä»»åŠ¡ä¸€å®šä¼˜å…ˆäºå®ä»»åŠ¡<br>å¾®ä»»åŠ¡æ˜¯çº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ï¼Œé€Ÿåº¦å¿«ï¼Œä¸éœ€è¦è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢<br>å®ä»»åŠ¡æ˜¯è¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢ï¼Œé€Ÿåº¦æ…¢ï¼Œæ¯æ¬¡æ‰§è¡Œéœ€è¦åˆ‡æ¢ä¸Šä¸‹æ–‡</p><p>ä¸Šé¢æåˆ°è¿‡ï¼Œå¼‚æ­¥ä»»åŠ¡è¿”å›ç»“æœåä¼šè¢«æ”¾å…¥<strong>äº‹ä»¶é˜Ÿåˆ—</strong>ä¸­ã€‚ç„¶è€Œï¼Œä¸ºäº†ç»†åˆ†<strong>å®ä»»åŠ¡</strong>è·Ÿ<strong>å¾®ä»»åŠ¡</strong>çš„æ‰§è¡Œé¡ºåºï¼Œä¼šæ ¹æ®ä»»åŠ¡ç±»å‹å°†ä»»åŠ¡æ”¾å…¥å¯¹åº”çš„å®ä»»åŠ¡é˜Ÿåˆ—æˆ–å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚<br>å½“åœ¨<strong>æ‰§è¡Œæ ˆ</strong>ä¸ºç©ºçš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹ä¼šæŸ¥çœ‹<strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>æ˜¯å¦æœ‰äº‹ä»¶å­˜åœ¨ã€‚</p><ul><li>ä¸å­˜åœ¨ï¼Œä¼šåœ¨<strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ä¸­å–å‡ºä¸€ä¸ªä»»åŠ¡æ”¾å…¥<strong>æ‰§è¡Œæ ˆ</strong></li><li>å­˜åœ¨ï¼Œæ‰§è¡Œ<strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ä¸­çš„ä»»åŠ¡ï¼Œç›´è‡³ä¸ºç©ºï¼Œç„¶ååœ¨<strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ä¸­å–å‡ºä¸€ä¸ªä»»åŠ¡æ”¾å…¥<strong>æ‰§è¡Œæ ˆ</strong><br>ç­‰å¾…<strong>æ‰§è¡Œæ ˆ</strong>çš„ä»»åŠ¡å®Œæˆ&#x2F;æ¸…ç©ºåï¼Œå†ä¾æ¬¡æ£€æŸ¥ <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ã€<strong>å®ä»»åŠ¡é˜Ÿåˆ—</strong>ç­‰ç­‰<br>ä»¥ä¸Šå°±æ˜¯<code>JavaScript</code>çš„äº‹ä»¶å¾ªç¯æœºåˆ¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// setTimeoutè®¾ç½®ä¸º0æ—¶ä¹Ÿå±äºå®ä»»åŠ¡</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    ... ...</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šåœ¨æ¯ä¸ªå¾ªç¯çš„æœ«å°¾ï¼Œä¼šè¿›è¡Œä¸€æ¬¡domçš„æ›´æ–°æ¸²æŸ“ï¼Œvueä¸­$nextTickä¸æ­¤æœ‰å¼‚æ›²åŒå·¥ä¹‹å¤„ï¼Œæˆ–è€…è¯´æ˜¯å€Ÿé‰´äº†è¿™é‡Œ</p><h2 id="æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯"><a href="#æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯" class="headerlink" title="æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯"></a>æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯</h2><ul><li>ä½¿ç”¨ <code>setTimeout</code>å¯¹ä¸é‡è¦çš„äº‹ä»¶ï¼ŒåŒæ­¥ä»»åŠ¡å¼‚æ­¥åŒ–ï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡</li><li>$nextTickçš„å®ç°ï¼š$nextTickå†…éƒ¨å®ç°ä¼˜å…ˆçº§ï¼šå¾®ä»»åŠ¡setImmediateã€å¾®ä»»åŠ¡MessageChannelã€å®ä»»åŠ¡setTimeoutã€Promise.then</li><li>å¾…è¡¥å……</li></ul><h2 id="nodejsäº‹ä»¶å¾ªç¯"><a href="#nodejsäº‹ä»¶å¾ªç¯" class="headerlink" title="nodejsäº‹ä»¶å¾ªç¯"></a>nodejsäº‹ä»¶å¾ªç¯</h2><p>å¾…è¡¥å……</p>]]></content>
      
      
      <categories>
          
          <category> åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ¨¡å—åŒ–</title>
      <link href="/post/2b2f44ba.html"/>
      <url>/post/2b2f44ba.html</url>
      
        <content type="html"><![CDATA[<p>è‡ªä» JavaScript è¯ç”Ÿä»¥æ¥ï¼Œäººä»¬ä¸€ç›´å°†å®ƒä½œä¸ºä¸€ç§ç½‘é¡µè„šæœ¬è¯­è¨€ï¼Œä¸€èˆ¬åªç”¨ä½œè¡¨å•æ ¡éªŒè·Ÿé¡µé¢ç‰¹æ•ˆï¼Œç”±äºè¢«ä»“ä¿ƒçš„åˆ›é€ å‡ºæ¥ï¼Œæ‰€ä»¥å®ƒè‡ªèº«çš„å„ç§é™·é˜±å’Œç¼ºç‚¹ä¹Ÿè¢«ç¼–ç¨‹äººå‘˜æ‰€è¯Ÿç—…ã€‚éšç€ Web2.0 çš„æµè¡Œï¼Œå„ç§å‰ç«¯åº“å’Œæ¡†æ¶è¢«å¼€å‘å‡ºæ¥ï¼Œéšåéšç€æ›´å¤šçš„ç”¨æˆ·éœ€æ±‚åœ¨å‰ç«¯è¢«å®ç°ï¼ŒJavaScript ä¹Ÿä»è¡¨å•æ ¡éªŒè·ƒè¿åˆ°åº”ç”¨å¼€å‘çš„çº§åˆ«ä¸Šã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®ƒå¤§è‡´ç»å†äº†å·¥å…·ç±»åº“ã€ç»„ä»¶åº“ã€å‰ç«¯æ¡†æ¶ã€å‰ç«¯åº”ç”¨çš„å˜è¿ã€‚</p><span id="more"></span><p>éšç€ä¸šåŠ¡å‘å±•ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„ç»„ç»‡ä¸šåŠ¡é€»è¾‘ï¼ŒJavaScript æœ‰äº†<strong>æ¨¡å—åŒ–</strong>çš„éœ€æ±‚ã€‚</p><p>ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬åœ¨ JavaScript ä¸­é€šè¿‡ <strong>script</strong> æ ‡ç­¾å¼•å…¥ä»£ç çš„æ–¹å¼æ¥å®ç°æ¨¡å—åŒ–ï¼Œä½†è¿™æ ·å¾€å¾€ç¼ºä¹ç»„ç»‡èƒ½åŠ›è·Ÿçº¦æŸèƒ½åŠ›ï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€éœ€è¦äººä¸ºçš„å¯¹ä»£ç è¿›è¡Œçº¦æŸï¼Œé¿å…å˜é‡ã€å‡½æ•°å†²çªç­‰é—®é¢˜ã€‚</p><br/><h2 id="æ¨¡å—åŒ–çš„ç†è§£"><a href="#æ¨¡å—åŒ–çš„ç†è§£" class="headerlink" title="æ¨¡å—åŒ–çš„ç†è§£"></a>æ¨¡å—åŒ–çš„ç†è§£</h2><h3 id="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"><a href="#ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"></a>ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–</h3><ul><li>å°†ä»£ç æŒ‰ç…§åŠŸèƒ½è¿›è¡Œå°è£…ï¼Œéµå¾ªå•ä¸€èŒè´£ã€‚</li><li>æ¨¡å—å†…éƒ¨æ•°æ®ç§æœ‰, é€šè¿‡å‘å¤–æš´éœ²çš„å˜é‡ã€æ–¹æ³•ä¸å¤–éƒ¨é€šä¿¡ã€‚</li></ul><h3 id="æ¨¡å—åŒ–çš„å¥½å¤„"><a href="#æ¨¡å—åŒ–çš„å¥½å¤„" class="headerlink" title="æ¨¡å—åŒ–çš„å¥½å¤„"></a>æ¨¡å—åŒ–çš„å¥½å¤„</h3><ul><li>é¿å…å‘½åå†²çª(å‡å°‘å‘½åç©ºé—´æ±¡æŸ“)</li><li>æ›´å¥½çš„åˆ†ç¦», æŒ‰éœ€åŠ è½½</li><li>æ›´é«˜å¤ç”¨æ€§</li><li>é«˜å¯ç»´æŠ¤æ€§</li></ul><h3 id="æ¨¡å—åŒ–æ–¹æ¡ˆ"><a href="#æ¨¡å—åŒ–æ–¹æ¡ˆ" class="headerlink" title="æ¨¡å—åŒ–æ–¹æ¡ˆ"></a>æ¨¡å—åŒ–æ–¹æ¡ˆ</h3><ul><li>å…¨å±€ function æ¨¡å¼ï¼Œæ ¹æ®åŠŸèƒ½å°†æ¨¡å—å°è£…æˆä¸åŒçš„å…¨å±€å‡½æ•°ã€‚<br>å¼Šç«¯ï¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼Œå®¹æ˜“é€ æˆå‘½åå†²çªï¼Œæ¨¡å—ä¹‹é—´çš„å…³ç³»æ¨¡ç³Š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">funtion <span class="title function_">defaultValue</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> value = <span class="title function_">defaultValue</span>();</span><br><span class="line"><span class="keyword">const</span> a = <span class="title function_">sum</span>(value.<span class="property">a</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li>nameSpace æ¨¡å¼ï¼Œå¯¹å¯¹è±¡è¿›è¡Œå°è£…ã€‚å‡å°‘å…¨å±€å˜é‡ï¼Œè§£å†³å‘½åå†²çªã€‚<br>å¼Šç«¯ï¼šæ•°æ®ä¸å®‰å…¨ï¼Œå¤–éƒ¨å¯ä»¥ç›´æ¥å¯¹æ¨¡å—å†…çš„æ•°æ®è¿›è¡Œä¿®æ”¹  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">__commonFuc</span> = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="title function_">defaultValue</span>(<span class="params"></span>)&#123;</span><br><span class="line">        xxx</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">sum</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable language_">module</span> = <span class="variable language_">window</span>.<span class="property">__commonFuc</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="variable language_">module</span>.<span class="title function_">defaultValue</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">module</span>.<span class="property">x</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">x</span> = <span class="number">2</span> <span class="comment">// æ¨¡å—å†…çš„æ•°æ®è¢«ä¿®æ”¹</span></span><br></pre></td></tr></table></figure></li><li>IIFE ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œæ•°æ®æ˜¯ç§æœ‰çš„, å¤–éƒ¨åªèƒ½é€šè¿‡æš´éœ²çš„æ–¹æ³•æ“ä½œã€‚é€šè¿‡é—­åŒ…å®ç°<br>å¼Šç«¯ï¼šæ— æ³•å¤„ç†æ¨¡å—ç›¸äº’ä¾èµ–çš„åœºæ™¯<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"><span class="variable language_">window</span></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">api</span>(<span class="params"></span>)&#123;</span><br><span class="line">    xxx</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">setX</span>(<span class="params">v</span>)&#123;</span><br><span class="line">    x = v</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getX</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">__Module</span> = &#123;</span><br><span class="line">    x,</span><br><span class="line">    setX,</span><br><span class="line">    getX,</span><br><span class="line">    api,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="variable language_">window</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> m = <span class="variable language_">window</span>.<span class="property">__Module</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹å‡½æ•°ä½œç”¨åŸŸå†…å˜é‡çš„å€¼</span></span><br><span class="line">m.<span class="title function_">setX</span>(<span class="number">10</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m.<span class="title function_">getX</span>()) <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œæ”¹çš„æ˜¯å¯¹è±¡å±æ€§çš„å€¼,ä¸æ˜¯ä¿®æ”¹çš„æ¨¡å—å†…éƒ¨çš„data</span></span><br><span class="line">m.<span class="property">x</span> = <span class="number">2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m.<span class="title function_">getX</span>()) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></li></ul><br/><h2 id="æ¨¡å—åŒ–è§„èŒƒ"><a href="#æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="æ¨¡å—åŒ–è§„èŒƒ"></a>æ¨¡å—åŒ–è§„èŒƒ</h2><h3 id="CommonJs"><a href="#CommonJs" class="headerlink" title="CommonJs"></a>CommonJs</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>CommonJs è§„èŒƒä¸»è¦ç”¨äº Node.jsï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œæ¯ä¸ªæ–‡ä»¶ä¸­çš„å˜é‡ã€å‡½æ•°ã€ç±»éƒ½æ˜¯ç§æœ‰çš„ã€‚</p><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>å¯¼å‡ºçš„æ˜¯å€¼çš„æ‹·è´</li><li>æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œç‹¬ç«‹ä½œç”¨åŸŸï¼Œä¸æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li><li>æ ¹æ®å¯¼å…¥çš„é¡ºåºåŠ è½½</li><li>æ”¯æŒç¼“å­˜ï¼Œæ¨¡å—å¯ä»¥å¤šæ¬¡åŠ è½½ï¼Œä½†åªä¼šåœ¨é¦–æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡</li></ul><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><ul><li><p>å¯¼å‡ºï¼šä½¿ç”¨ <font color=#2F74DC>module.export</font> å¯¼å‡ºï¼Œä¹Ÿå¯ä»¥ç®€å†™ä¸º <font color=#2F74DC>exports</font>ã€‚CommonJS è§„èŒƒè§„å®šï¼Œæ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œmodule å˜é‡ä»£è¡¨å½“å‰æ¨¡å—ã€‚è¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„ exports å±æ€§ï¼ˆå³ module.exportsï¼‰æ˜¯å¯¹å¤–çš„æ¥å£ã€‚åŠ è½½æŸä¸ªæ¨¡å—ï¼Œå…¶å®æ˜¯åŠ è½½è¯¥æ¨¡å—çš„ <strong>module.exports</strong>å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module.export å¯¼å‡º</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">export</span> = &#123;</span><br><span class="line">    <span class="attr">add</span>: add,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// exports å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span>.<span class="property">add</span> = <span class="keyword">function</span>(<span class="params">a, b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å¯¼å…¥ï¼šä½¿ç”¨ <font color=#2F74DC>require</font> åŒæ­¥åŠ è½½æ¨¡å—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥</span></span><br><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">&quot;./math&quot;</span>);</span><br><span class="line">math.<span class="title function_">add</span>(<span class="number">2</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure></li><li><p>æ¨¡å—é‡å‘½å</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æ–°çš„æ±‚å’Œæ–¹æ³• newAdd</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">add</span>: newAdd &#125; = <span class="built_in">require</span>(<span class="string">&quot;./math&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul><h4 id="åŠ è½½æœºåˆ¶"><a href="#åŠ è½½æœºåˆ¶" class="headerlink" title="åŠ è½½æœºåˆ¶"></a>åŠ è½½æœºåˆ¶</h4><p>  CommonJS æ¨¡å—çš„åŠ è½½æœºåˆ¶æ˜¯ï¼Œè¾“å…¥çš„æ˜¯è¢«è¾“å‡ºçš„å€¼çš„æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚è¿™éƒ¨åˆ†è·Ÿ ES6 æ¨¡å—åŒ–æœ‰æ‰€ä¸åŒã€‚åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œæ—¶åŒæ­¥åŠ è½½ï¼Œåœ¨æµè§ˆå™¨ç«¯æå‰ç¼–è¯‘æ‰“åŒ…å¤„ç†æ–¹å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">incCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    counter++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">counter</span>: counter,</span><br><span class="line">    <span class="attr">incCounter</span>: incCounter,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="built_in">require</span>(<span class="string">&quot;./lib&quot;</span>).<span class="property">counter</span>;</span><br><span class="line"><span class="keyword">var</span> incCounter = <span class="built_in">require</span>(<span class="string">&quot;./lib&quot;</span>).<span class="property">incCounter</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter); <span class="comment">// 3</span></span><br><span class="line"><span class="title function_">incCounter</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œ <strong>incCounter</strong> å‰åï¼Œlib.js ä¸­çš„ <strong>counter</strong> å§‹ç»ˆä¸º 3ï¼Œå¯ä»¥å¾—çŸ¥ CommonJS è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ã€‚</p><br/><h3 id="ES6-æ¨¡å—åŒ–"><a href="#ES6-æ¨¡å—åŒ–" class="headerlink" title="ES6 æ¨¡å—åŒ–"></a>ES6 æ¨¡å—åŒ–</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ES6 åœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œæ—¨åœ¨æˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚å…¶æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼šexport å’Œ importã€‚export å‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œimport å‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚</p><h4 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>æµè§ˆå™¨ç¯å¢ƒé»˜è®¤æ”¯æŒ</li><li>è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨</li><li>åŠ¨æ€å¼•ç”¨ï¼Œä¸ä¼šç¼“å­˜å€¼</li><li>é™æ€åŒ–ï¼Œç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥è¾“å‡ºçš„å˜é‡ï¼Œå¯ä»¥ tree shaking</li></ul><h4 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><ul><li>å¯¼å‡ºï¼šä½¿ç”¨ <font color=#2F74DC>export</font> å¯¼å‡º</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math.js</span></span><br><span class="line"><span class="keyword">var</span> total = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> add = <span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123; add, total &#125;;</span><br></pre></td></tr></table></figure><ul><li>å¯¼å…¥ï¼šä½¿ç”¨ <font color=#2F74DC>import</font> å¯¼å…¥</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add, total &#125; <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>æ¨¡å—é‡å‘½å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> newAdd <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span>;</span><br></pre></td></tr></table></figure><h4 id="åŠ è½½æœºåˆ¶-1"><a href="#åŠ è½½æœºåˆ¶-1" class="headerlink" title="åŠ è½½æœºåˆ¶"></a>åŠ è½½æœºåˆ¶</h4><p>æ¨¡å—åŠ è½½æ–¹å¼å–å†³äºæ‰€å¤„çš„ç¯å¢ƒï¼ŒNode.js ç¯å¢ƒä¸­åŒæ­¥åŠ è½½ï¼Œæµè§ˆå™¨ç«¯å¼‚æ­¥åŠ è½½</p><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p><code>ES Module</code> ä»åŠ è½½å…¥å£æ¨¡å—åˆ°æ‰€æœ‰æ¨¡å—å®ä¾‹çš„æ‰§è¡Œä¸»è¦ç»å†äº†ä¸‰æ­¥ï¼šæ„å»ºã€å®ä¾‹åŒ–å’Œè¿è¡Œã€‚<br>åœ¨æ„å»ºæ—¶ï¼Œæ ¹æ® <code>import</code> åˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œè¿™ç‚¹ä¸åŒäº <code>CommonJS</code>ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿è¡Œæ—¶åŠ è½½ä¼šä¸»çº¿ç¨‹é•¿æœŸè¢«å ç”¨ï¼Œ<code>ES Module</code> åœ¨æ„å»ºè¿‡ç¨‹ä¸ä¼šå®ä¾‹åŒ–å’Œæ‰§è¡Œä»»ä½•çš„jsä»£ç ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ <strong>é™æ€è§£æ</strong> è¿‡ç¨‹ã€‚</p><p>ä½†æ˜¯ä½†æ˜¯ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬å‘ç°ä»¥<code>CommonJs</code>æ¨¡å¼å¼•å…¥çš„æ’ä»¶ä¹Ÿå¯ä»¥è·‘åœ¨æµè§ˆå™¨ä¸­ï¼Œè¿™æ˜¯ä¸ºä»€å‘¢ï¼Ÿ</p><p>æ¦‚æ‹¬çš„æ¥è¯´ï¼Œ<code>webpack</code>ä¼šæ ¹æ®webpack.config.jså…¥å£æ–‡ä»¶è¯†åˆ«æ¨¡å—ä¾èµ–ï¼Œç»Ÿä¸€å¯¹æ¨¡å—è¿›è¡Œåˆ†æï¼Œé€šè¿‡è½¬æ¢ã€ç¼–è¯‘ï¼Œæ‰“åŒ…æˆæœ€ç»ˆçš„æ–‡ä»¶ã€‚æœ€ç»ˆæ–‡ä»¶ä¸­çš„æ¨¡å—å®ç°æ˜¯åŸºäºwebpackè‡ªå·±å®ç°çš„ <code>webpack_require</code>ï¼ˆes5ä»£ç ï¼‰ï¼Œæ‰€ä»¥æ‰“åŒ…åçš„æ–‡ä»¶å¯ä»¥è·‘åœ¨æµè§ˆå™¨ä¸Šã€‚å³ <strong>webpackä¼šå¯¹å„ç§æ¨¡å—è¿›è¡Œè¯­æ³•åˆ†æï¼Œå¹¶åšè½¬æ¢ç¼–è¯‘</strong></p><p>æ¥çœ‹çœ‹<code>webpack</code>å¯¹æ­¤åšäº†äº›ä»€ä¹ˆï¼š</p><ul><li><p>ç®€å•çš„å¯¹webpackè¿›è¡Œé…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ªEsModuleæ ¼å¼çš„æ¨¡å—å¹¶å¯¼å…¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// src/add</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; name &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;hello world,&#x27;</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> name + a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/main.js</span></span><br><span class="line"><span class="keyword">import</span> add <span class="keyword">from</span> <span class="string">&#x27;./add&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ±‚å’Œ&#x27;</span>, <span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>æ‰“åŒ…å®Œæˆåçš„<code>bundle.js</code>æ–‡ä»¶è¾“å‡ºå¦‚ä¸‹:</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// modulesæ˜¯å­˜æ”¾æ‰€æœ‰æ¨¡å—çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å­˜å‚¨&#123; æ¨¡å—è·¯å¾„: æ¨¡å—å¯¼å‡ºä»£ç å‡½æ•° &#125;</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">modules</span>) &#123;</span><br><span class="line"><span class="comment">// æ¨¡å—ç¼“å­˜ä½œç”¨ï¼Œå·²åŠ è½½çš„æ¨¡å—å¯ä»¥ä¸ç”¨å†é‡æ–°è¯»å–ï¼Œæå‡æ€§èƒ½</span></span><br><span class="line"><span class="keyword">var</span> installedModules = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é”®å‡½æ•°ï¼ŒåŠ è½½æ¨¡å—ä»£ç </span></span><br><span class="line"><span class="comment">// å½¢å¼æœ‰ç‚¹åƒNodeçš„CommonJSæ¨¡å—ï¼Œä½†è¿™é‡Œæ˜¯å¯è·‘åœ¨æµè§ˆå™¨ä¸Šçš„es5ä»£ç </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">__webpack_require__</span>(<span class="params">moduleId</span>) &#123;</span><br><span class="line">  <span class="comment">// ç¼“å­˜ä¸­å­˜åœ¨åˆ™ç›´æ¥å¯¼å‡º</span></span><br><span class="line">  <span class="keyword">if</span>(installedModules[moduleId]) &#123;</span><br><span class="line">    <span class="keyword">return</span> installedModules[moduleId].<span class="property">exports</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¦åˆ™æ–°å»º</span></span><br><span class="line">  <span class="keyword">var</span> <span class="variable language_">module</span> = installedModules[moduleId] = &#123;</span><br><span class="line">    <span class="attr">i</span>: moduleId,</span><br><span class="line">    <span class="attr">l</span>: <span class="literal">false</span>, <span class="comment">// æ ‡è®°æ˜¯å¦å·²ç»åŠ è½½</span></span><br><span class="line">    <span class="attr">exports</span>: &#123;&#125; <span class="comment">// åˆå§‹æ¨¡å—ä¸ºç©º</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŠŠè¦åŠ è½½çš„æ¨¡å—å†…å®¹ï¼ŒæŒ‚è½½åˆ°module.exportsä¸Š</span></span><br><span class="line">  modules[moduleId].<span class="title function_">call</span>(<span class="variable language_">module</span>.<span class="property">exports</span>, <span class="variable language_">module</span>, <span class="variable language_">module</span>.<span class="property">exports</span>, __webpack_require__);</span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">l</span> = <span class="literal">true</span>; <span class="comment">// æ ‡è®°ä¸ºå·²åŠ è½½</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›åŠ è½½çš„æ¨¡å—ï¼Œè°ƒç”¨æ–¹ç›´æ¥è°ƒç”¨å³å¯</span></span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">module</span>.<span class="property">exports</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// __webpack_require__å¯¹è±¡ä¸‹çš„rå‡½æ•°</span></span><br><span class="line"><span class="comment">// åœ¨module.exportsä¸Šå®šä¹‰__esModuleä¸ºtrueï¼Œè¡¨æ˜æ˜¯ä¸€ä¸ªæ¨¡å—å¯¹è±¡</span></span><br><span class="line">__webpack_require__.<span class="property">r</span> = <span class="keyword">function</span>(<span class="params"><span class="built_in">exports</span></span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="built_in">exports</span>, <span class="string">&#x27;__esModule&#x27;</span>, &#123; <span class="attr">value</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨å…¥å£æ¨¡å—main.js</span></span><br><span class="line"><span class="keyword">return</span> <span class="title function_">__webpack_require__</span>(__webpack_require__.<span class="property">s</span> = <span class="string">&quot;./src/main.js&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">(&#123;</span><br><span class="line">  <span class="comment">// addæ¨¡å—</span></span><br><span class="line">  <span class="string">&quot;./src/add.js&quot;</span>: (<span class="keyword">function</span>(<span class="params"><span class="variable language_">module</span>, __webpack_exports__, __webpack_require__</span>) &#123;</span><br><span class="line">    <span class="comment">// åœ¨module.exportsä¸Šå®šä¹‰__esModuleä¸ºtrue</span></span><br><span class="line">    __webpack_require__.<span class="title function_">r</span>(__webpack_exports__);</span><br><span class="line">    <span class="comment">// ç›´æ¥æŠŠaddæ¨¡å—å†…å®¹ï¼Œèµ‹ç»™module.exports.defaultå¯¹è±¡ä¸Š</span></span><br><span class="line">    __webpack_exports__[<span class="string">&quot;default&quot;</span>] = (<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123; name &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;hello world,&#x27;</span>&#125;</span><br><span class="line">      <span class="keyword">return</span> name + a + b</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¥å£æ¨¡å—</span></span><br><span class="line">  <span class="string">&quot;./src/main.js&quot;</span>: (<span class="keyword">function</span>(<span class="params"><span class="variable language_">module</span>, __webpack_exports__, __webpack_require__</span>) &#123;</span><br><span class="line">    __webpack_require__.<span class="title function_">r</span>(__webpack_exports__)</span><br><span class="line">    <span class="comment">// æ‹¿åˆ°addæ¨¡å—çš„å®šä¹‰</span></span><br><span class="line">    <span class="comment">// _add__WEBPACK_IMPORTED_MODULE_0__ = module.exportsï¼Œæœ‰ç‚¹ç±»ä¼¼require</span></span><br><span class="line">    <span class="keyword">var</span> _add__WEBPACK_IMPORTED_MODULE_0__ = <span class="title function_">__webpack_require__</span>(<span class="string">&quot;./src/add.js&quot;</span>);</span><br><span class="line">    <span class="comment">// addæ¨¡å—å†…å®¹: _add__WEBPACK_IMPORTED_MODULE_0__[&quot;default&quot;]</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(_add__WEBPACK_IMPORTED_MODULE_0__[<span class="string">&quot;default&quot;</span>], <span class="title class_">Object</span>(_add__WEBPACK_IMPORTED_MODULE_0__[<span class="string">&quot;default&quot;</span>])(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæ‰“åŒ…åçš„ä»£ç ç›´æ¥è·‘åœ¨æµè§ˆå™¨ä¸­ï¼Œæ˜¯å› ä¸ºwebpacké€šè¿‡__webpack_require__ å‡½æ•°æ¨¡æ‹Ÿäº†æ¨¡å—çš„åŠ è½½ï¼Œå¹¶ä½¿ç”¨<code>module.exports</code> å¯¼å‡ºã€‚</p><h3 id="import"><a href="#import" class="headerlink" title="import()"></a>import()</h3><p><code>import()</code>å‡½æ•°åœ¨ ES2020 å¢åŠ çš„å¯ä»¥å¼‚æ­¥åŠ¨æ€åŠ è½½æ¨¡å—çš„æœºåˆ¶ï¼Œ<code>import()</code>å‡½æ•°ä¸æ‰€åŠ è½½çš„æ¨¡å—æ²¡æœ‰é™æ€è¿æ¥å…³ç³»ï¼Œæ‰€ä»¥ä¸èƒ½è¿›è¡Œé™æ€è§£æï¼Œä¹Ÿä¸èƒ½è¿›è¡Œtree shakingï¼Œè¿™ç‚¹ä¹Ÿæ˜¯ä¸importè¯­å¥ä¸ç›¸åŒä¹‹ä¸€ã€‚<br><code>import()</code>çš„è¿”å›å€¼æ˜¯promiseå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>.then</code>å’Œ<code>.catch</code>æ–¹æ³•è¿›è¡Œæ¥æ”¶æ•°æ®å¤„ç†ï¼Œ<code>import()</code>åŠ è½½æ¨¡å—æˆåŠŸä»¥åï¼Œè¿™ä¸ªæ¨¡å—ä¼šä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä½œ <code>then</code> æ–¹æ³•çš„å‚æ•°ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡è§£æ„èµ‹å€¼çš„è¯­æ³•ï¼Œè·å–è¾“å‡ºæ¥å£ã€‚<br>å…è®¸æ¨¡å—è·¯å¾„åŠ¨æ€ç”Ÿæˆ<br><code>import()</code> å¯ä»¥æ”¾åœ¨ä»»ä½•åœ°æ–¹ï¼Œå› ä¸ºå®ƒæ˜¯è¿è¡Œæ—¶æ‰§è¡Œçš„ï¼Œä»€ä¹ˆæ—¶å€™æ‰§è¡Œåˆ°å®ƒï¼Œå°±ä»€ä¹ˆæ—¶å€™è¿›è¡ŒæŒ‡å®šæ¨¡å—çš„åŠ è½½ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨æ¡ä»¶è¯­å¥å’Œå‡½æ•°ä¸­è¿›è¡ŒåŠ¨æ€çš„åŠ è½½ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&#x27;./xxx/aaa&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">msg</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//åŠ è½½å†…å®¹  ä¸ä¼šæŠ¥é”™</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//error codo</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®€å•ä½¿ç”¨ï¼š</p><ul><li><p>å®šä¹‰ä¸€ä¸ªéœ€è¦æŒ‰éœ€åŠ è½½çš„æ¨¡å— a.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆ‘æ˜¯æ¨¡å— a&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¼•å…¥æ¨¡å— a</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./a&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; <span class="keyword">default</span>: a &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ‹“å±• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github Action è‡ªåŠ¨æ„å»º Flutter Android Apk</title>
      <link href="/post/25ae93b9.html"/>
      <url>/post/25ae93b9.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è¿™æ®µæ—¶é—´ç”¨ Flutter åšäº†ä¸€ä¸ªå¼€æºçš„é¡¹ç›® <a href="https://github.com/guozhigq/flutter_v2ex">VVEX</a>, å› ä¸ºéœ€è¦æ‰“åŒ… apkï¼Œåœ¨æ­¤ä¹‹å‰ä¸€ç›´æ˜¯æ‰‹åŠ¨ flutter build apkï¼Œå†æŠŠæ–‡ä»¶ä¸Šä¼ åˆ° releaseï¼Œæ¯æ¬¡å‘å¸ƒæ–°ç‰ˆæœ¬ç¡®å®æœ‰ç‚¹ç¹çã€‚è¶ç€æœ‰ç©ºæ¥ä½¿ç”¨ Github Action åšä¸ªæŒç»­åŒ–é›†æˆï¼Œè‡ªåŠ¨æ‰“åŒ… apkã€‚</p><p><strong>æœ€åå®Œæˆçš„è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬å¦‚ä¸‹ï¼š</strong></p><p><strong>æ›´æ–°ï¼š</strong> 5æœˆè°·æ­Œå‘å¸ƒäº†Flutter stable 3.10.0 ç‰ˆæœ¬ï¼Œå¯èƒ½ä¼šå‡ºç°æ’ä»¶ä¸å…¼å®¹æƒ…å†µï¼Œéœ€è¦å°† yml æ–‡ä»¶ä¸­flutterå¯¹åº” <code>channel</code> æ”¹ä¸º <code>any</code>ï¼Œ<code>flutter-version</code>éœ€è¦æŒ‡å®šä¸ºæŸä¸€ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿æ‰“åŒ…ç¯å¢ƒæ­£å¸¸ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œéƒ¨åˆ† step çš„ name éƒ½ä½¿ç”¨äº†ä¸­æ–‡å‘½å</p><span id="more"></span><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">build_apk</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># actionäº‹ä»¶è§¦å‘</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">    <span class="attr">push:</span></span><br><span class="line">        <span class="comment"># push tagæ—¶è§¦å‘</span></span><br><span class="line">        <span class="attr">tag:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">v*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥æœ‰å¤šä¸ªjobs</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">    <span class="attr">build_apk:</span></span><br><span class="line">        <span class="comment"># è¿è¡Œç¯å¢ƒ ubuntu-latest window-latest mac-latest</span></span><br><span class="line">        <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ¯ä¸ªjobsä¸­å¯ä»¥æœ‰å¤šä¸ªsteps</span></span><br><span class="line">        <span class="attr">steps:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ä»£ç è¿å‡º</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">æ„å»ºJavaç¯å¢ƒ</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">actions/setup-java@v3</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">distribution:</span> <span class="string">&quot;zulu&quot;</span></span><br><span class="line">                  <span class="attr">java-version:</span> <span class="string">&quot;17&quot;</span></span><br><span class="line">                  <span class="attr">token:</span> <span class="string">$&#123;&#123;secrets.GIT_TOKEN&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">æ£€æŸ¥ç¼“å­˜</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">              <span class="attr">id:</span> <span class="string">cache-flutter</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">path:</span> <span class="string">/root/flutter-sdk</span> <span class="comment"># Flutter SDK çš„è·¯å¾„</span></span><br><span class="line">                  <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-flutter-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/pubspec.lock&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å®‰è£…Flutter</span></span><br><span class="line">              <span class="attr">if:</span> <span class="string">steps.cache-flutter.outputs.cache-hit</span> <span class="type">!=</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">subosito/flutter-action@v2</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">flutter-version:</span> <span class="number">3.7</span><span class="number">.7</span></span><br><span class="line">                  <span class="attr">channel:</span> <span class="string">any</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ä¸‹è½½é¡¹ç›®ä¾èµ–</span></span><br><span class="line">              <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">pub</span> <span class="string">get</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">è§£ç ç”Ÿæˆ</span> <span class="string">jks</span></span><br><span class="line">              <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$KEYSTORE_BASE64</span> <span class="string">|</span> <span class="string">base64</span> <span class="string">-di</span> <span class="string">&gt;</span> <span class="string">android/app/vvex.jks</span></span><br><span class="line">              <span class="attr">env:</span></span><br><span class="line">                  <span class="attr">KEYSTORE_BASE64:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_BASE64</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span></span><br><span class="line">              <span class="comment"># å¯¹åº” android/app/build.gradle signingConfigsä¸­çš„é…ç½®é¡¹</span></span><br><span class="line">              <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span> <span class="string">--release</span> <span class="string">--split-per-abi</span></span><br><span class="line">              <span class="attr">env:</span></span><br><span class="line">                  <span class="attr">KEYSTORE_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">                  <span class="attr">KEY_ALIAS:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_ALIAS</span> <span class="string">&#125;&#125;</span></span><br><span class="line">                  <span class="attr">KEY_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_PASSWORD&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å‘å¸ƒ</span></span><br><span class="line">              <span class="attr">uses:</span> <span class="string">ncipollo/release-action@v1</span></span><br><span class="line">              <span class="attr">with:</span></span><br><span class="line">                  <span class="attr">artifacts:</span> <span class="string">&quot;build/app/outputs/flutter-apk/app-*.apk&quot;</span></span><br><span class="line">                  <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GIT_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">                  <span class="attr">allowUpdates:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š"><a href="#åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š" class="headerlink" title="åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š"></a>åœ¨æ­¤å¤„æœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼š</h3><ul><li>æ— ç­¾åæ‰“åŒ…</li><li>å¸¦ç­¾åæ‰“åŒ…</li></ul></br><h4 id="æ— ç­¾åæ‰“åŒ…"><a href="#æ— ç­¾åæ‰“åŒ…" class="headerlink" title="æ— ç­¾åæ‰“åŒ…"></a>æ— ç­¾åæ‰“åŒ…</h4><p>åœ¨ä½¿ç”¨ GitHub å®Œæˆè‡ªåŠ¨åŒ–æ„å»ºä¹‹å‰ï¼Œä¸€ç›´ä½¿ç”¨çš„æ˜¯æ— ç­¾åæ‰“åŒ…ï¼Œå¾ˆç®€å•ï¼Œä¸éœ€è¦é¢å¤–é…ç½®ä»€ä¹ˆ<br>æ— ç­¾åæ‰“åŒ…çš„è„šæœ¬éœ€è¦å»æ‰ä¸Šé¢çš„è¿™éƒ¨åˆ†å†…å®¹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">è§£ç ç”Ÿæˆ</span> <span class="string">jks</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">echo</span> <span class="string">$KEYSTORE_BASE64</span> <span class="string">|</span> <span class="string">base64</span> <span class="string">-di</span> <span class="string">&gt;</span> <span class="string">android/app/vvex.jks</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">      <span class="attr">KEYSTORE_BASE64:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_BASE64</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span> <span class="string">--release</span> <span class="string">--split-per-abi</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">        <span class="attr">KEYSTORE_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEYSTORE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">KEY_ALIAS:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_ALIAS</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">KEY_PASSWORD:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.KEY_PASSWORD&#125;&#125;</span></span><br></pre></td></tr></table></figure></br><p>ä»¥ä¸‹éƒ¨åˆ†éœ€è¦ä¿ç•™</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span></span><br><span class="line">   <span class="attr">run:</span> <span class="string">flutter</span> <span class="string">build</span> <span class="string">apk</span> <span class="string">--release</span> <span class="string">--split-per-abi</span></span><br></pre></td></tr></table></figure></br><h4 id="å¸¦ç­¾åæ‰“åŒ…"><a href="#å¸¦ç­¾åæ‰“åŒ…" class="headerlink" title="å¸¦ç­¾åæ‰“åŒ…"></a>å¸¦ç­¾åæ‰“åŒ…</h4><p><strong>ç­¾åæ–‡ä»¶ xxx.js è·Ÿ xxx.properties æ–‡ä»¶ä¸è¦æäº¤è‡³å…¬å…±ä»“åº“</strong><br>ä¸»è¦åˆ†ä¸‹é¢å‡ æ­¥</p><ul><li>ç”Ÿæˆç­¾å jks æ–‡ä»¶ï¼šæ¯”å¦‚ <strong>vvex.jks</strong></li><li>åˆ›å»º <strong>key.properties</strong> æ–‡ä»¶</li><li>ä¿®æ”¹ <strong>build.gradle</strong> æ–‡ä»¶</li><li>Github é…ç½® <strong>action secrets</strong></li></ul></br><h5 id="ç”Ÿæˆç­¾åæ–‡ä»¶"><a href="#ç”Ÿæˆç­¾åæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆç­¾åæ–‡ä»¶"></a>ç”Ÿæˆç­¾åæ–‡ä»¶</h5><p>æ­¤å¤„åŠä»¥ä¸‹ä»¥ VVEX ä¸¾ä¾‹ Mac ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç§»åŠ¨è‡³æ¡Œé¢</span></span><br><span class="line"><span class="built_in">cd</span> desktop</span><br><span class="line"><span class="comment"># åˆ›å»º jksæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">mkdir</span> jks</span><br><span class="line"><span class="built_in">cd</span> jks</span><br><span class="line"><span class="comment"># ç”Ÿæˆjks</span></span><br><span class="line">keytool -genkeypair -<span class="built_in">alias</span> vvex -keyalg RSA -keysize 2048 -keypass password -keystore vvex.jks -storepass password -validity 10000</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li><strong>-alias vvex</strong> æ­¤å¤„çš„ <strong>vvex</strong> å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ä¸ºä»»æ„</li><li><strong>-keystore vvex.jks</strong> æ­¤å¤„çš„ <strong>vvex</strong> å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ä¸ºä»»ï¼Œå»ºè®®ä¸åˆ«åç›¸åŒ</li><li>å»ºè®®ä»¥ä¸Š vvex ä¸ºç›¸åŒå†…å®¹</li><li><strong>-keypass password</strong> æ­¤å¤„çš„ <strong>password</strong> è®¾ç½®å¯†é’¥å¯†ç </li><li><strong>-storepass password</strong> æ­¤å¤„çš„ <strong>password</strong> è®¾ç½®å¯†é’¥åº“å¯†ç </li><li>å»ºè®®ä»¥ä¸Š password ä¸ºç›¸åŒå†…å®¹</li></ul><p>vvex.jks æ–‡ä»¶ç”Ÿæˆå®Œæˆåï¼Œå¤åˆ¶è‡³ android&#x2F;app ç›®å½•ä¸‹</p><p>è‡³æ­¤ï¼Œç¬¬ä¸€æ­¥å®Œæˆ</p></br><h5 id="åˆ›å»º-key-properties-æ–‡ä»¶"><a href="#åˆ›å»º-key-properties-æ–‡ä»¶" class="headerlink" title="åˆ›å»º key.properties æ–‡ä»¶"></a>åˆ›å»º key.properties æ–‡ä»¶</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># -storepass password å¤„çš„password</span></span><br><span class="line">storePassword = password</span><br><span class="line"><span class="comment"># -keypass password å¤„çš„password</span></span><br><span class="line">keyPassword = password</span><br><span class="line"><span class="comment"># åˆ«å</span></span><br><span class="line">keyAlias = vvex</span><br><span class="line"><span class="comment"># æ­¤å¤„æ³¨æ„ ç›´æ¥å†™xxxx.jkså°±å¯ä»¥ï¼Œä¸éœ€è¦å†™å…¶ä»–è·¯å¾„</span></span><br><span class="line">storeFile = vvex.jks</span><br></pre></td></tr></table></figure><p>key.properties æ–‡ä»¶ç”Ÿæˆå®Œæˆåï¼Œå¤åˆ¶è‡³ android ç›®å½•ä¸‹</p><p>è‡³æ­¤ï¼Œç¬¬ä¸€æ­¥å®Œæˆ</p></br><h5 id="ä¿®æ”¹-build-gradle-æ–‡ä»¶"><a href="#ä¿®æ”¹-build-gradle-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ build.gradle æ–‡ä»¶"></a>ä¿®æ”¹ build.gradle æ–‡ä»¶</h5><p><strong>android&#x2F;app</strong> ç›®å½•ä¸‹çš„ <strong>build.gradle</strong> æ–‡ä»¶å¢åŠ ä»¥ä¸‹å†…å®¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  å¼•ç”¨ key.properties æ–‡ä»¶</span></span><br><span class="line">def keystorePropertiesFile = rootProject.<span class="title function_">file</span>(<span class="string">&#x27;key.properties&#x27;</span>)</span><br><span class="line">def keystoreProperties = <span class="keyword">new</span> <span class="title class_">Properties</span>()</span><br><span class="line"><span class="keyword">if</span> (keystorePropertiesFile.<span class="title function_">exists</span>()) &#123;</span><br><span class="line">    keystoreProperties.<span class="title function_">load</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(keystorePropertiesFile))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">def _storeFile = <span class="title function_">file</span>(<span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEYSTORE&quot;</span>) ?: keystoreProperties[<span class="string">&quot;storeFile&quot;</span>] ?: <span class="string">&quot;vvex.jks&quot;</span>)</span><br><span class="line">def _storePassword = <span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEYSTORE_PASSWORD&quot;</span>) ?: keystoreProperties[<span class="string">&quot;storePassword&quot;</span>]</span><br><span class="line">def _keyAlias = <span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEY_ALIAS&quot;</span>) ?: keystoreProperties[<span class="string">&quot;keyAlias&quot;</span>]</span><br><span class="line">def _keyPassword = <span class="title class_">System</span>.<span class="title function_">getenv</span>(<span class="string">&quot;KEY_PASSWORD&quot;</span>) ?: keystoreProperties[<span class="string">&quot;keyPassword&quot;</span>]</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  signingConfigs &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ ç­¾åé…ç½®</span></span><br><span class="line">    release &#123;</span><br><span class="line">        <span class="comment">// é…ç½®å¯†é’¥åº“æ–‡ä»¶çš„ä½ç½®ã€åˆ«åã€å¯†ç ç­‰ä¿¡æ¯</span></span><br><span class="line">        storeFile _storeFile</span><br><span class="line">        storePassword _storePassword</span><br><span class="line">        keyAlias _keyAlias</span><br><span class="line">        keyPassword _keyPassword</span><br><span class="line">        v1SigningEnabled <span class="literal">true</span></span><br><span class="line">        v2SigningEnabled <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  buildTypes &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">      signingConfig signingConfigs.<span class="property">release</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ å¤§å†™å­—ç¬¦ <strong>KEYSTORE_PASSWORD</strong>ã€<strong>KEY_ALIAS</strong>ã€<strong>KEY_PASSWORD</strong> åœ¨ github è®¾ç½®<strong>secrets</strong>æ—¶ä¼šç”¨åˆ°</p><h5 id="Github-é…ç½®-action-secrets"><a href="#Github-é…ç½®-action-secrets" class="headerlink" title="Github é…ç½® action secrets"></a>Github é…ç½® action secrets</h5><ul><li>æ‰“å¼€è¿œç¨‹ä»“åº“çš„è®¾ç½®é¡µé¢ï¼ˆç”¨æˆ·ååŠä»“åº“åè®°å¾—æ›¿æ¢ä¸ºè‡ªå·±çš„ï¼‰<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/guozhigq/flutter_test/settings/secrets/actions</span><br></pre></td></tr></table></figure></li><li>ç‚¹å‡»å³ä¸Šæ–¹ ã€New repository secretã€‘</li><li>ä¾æ¬¡åˆ›å»º Actions secrets</li></ul><table><thead><tr><th>name</th><th>Secret</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>KEYSTORE_BASE64</td><td>base64</td><td>vvex.jks base64 ç¼–ç </td></tr><tr><td>KEY_ALIAS</td><td>vvex</td><td><strong>-alias vvex</strong>å¤„çš„ vvex</td></tr><tr><td>KEY_PASSWORD</td><td>password</td><td><strong>-keypass password</strong>å¤„çš„ password</td></tr><tr><td>KEYSTORE_PASSWORD</td><td>password</td><td><strong>-storepass password</strong>å¤„çš„ password</td></tr><tr><td>KEY_PROPERTIES</td><td>base64</td><td>key.properties base64 ç¼–ç </td></tr><tr><td>GIT_TOKEN</td><td>å­—ç¬¦ä¸²</td><td>github è®¾ç½®ä¸­ç”Ÿæˆ</td></tr></tbody></table></br><p><strong>å¦‚ä½•å¯¹ vvex.jksã€key.properties è¿›è¡Œ base64 ç¼–ç </strong><br>æ–¹ä¾¿èµ·è§ï¼Œå°† key.properties å¤åˆ¶åˆ° desktop&#x2F;jks æ–‡ä»¶å¤¹ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªåŠ¨ç”Ÿæˆbase64å¹¶å¤åˆ¶åˆ°äº†ç²˜è´´æ¿ï¼Œç›´æ¥åˆ°githubå¤åˆ¶å³å¯</span></span><br><span class="line"><span class="built_in">base64</span> vvex.jks | pbcopy</span><br><span class="line"><span class="built_in">base64</span> key.properties | pbcopy</span><br></pre></td></tr></table></figure></br><p>å¦‚ä½•ç”Ÿæˆ <strong>GIT_TOKEN</strong><br><a href="https://github.com/settings/tokens">æ‰“å¼€ tokens è®¾ç½®é¡µé¢</a></p>]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åºŠåŠ è½½å¤±è´¥ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆ</title>
      <link href="/post/6bb61c1a.html"/>
      <url>/post/6bb61c1a.html</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹  fluuterï¼Œæ‰€ä»¥å¼€å‘äº†ä¸€æ¬¾åº”ç”¨ï¼Œèµ·åä¸ºï¼š<a href="https://github.com/guozhigq/flutter_v2ex">VVEX</a>ï¼Œæ•°æ®éƒ½æ˜¯é€šè¿‡æ¨¡æ‹Ÿè¯·æ±‚ï¼Œè§£æ html ç»“æ„æ‹¿åˆ°çš„ã€‚</p><p>ä»Šå¤©åœ¨æ‰‹æœºä¸Šæµè§ˆä¸»é¢˜æ—¶ï¼Œå‘ç°åœ¨è¯¦æƒ…é¡µä¼šå‡ºç°åŠ è½½æ—¶ç™½å±çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾ã€‚å¾ˆæ˜æ˜¾å¯ä»¥åˆ¤æ–­æ˜¯å›¾ç‰‡åŠ è½½å¼‚å¸¸å¯¼è‡´çš„é—®é¢˜ã€‚æ‰“å¼€ç¼–è¾‘å™¨ ğŸ”¨ ï¼Œå¤ç°ä¸€ä¸‹é—®é¢˜ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬å›¾ç‰‡èµ„æºå‡ºäº†ç‚¹æœ‰é—®é¢˜</p><span id="more"></span><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">flutter: https:<span class="comment">//tutu.to/ttt_tvI99C.png</span></span><br><span class="line">flutter: Exception: Invalid image data</span><br><span class="line">flutter: Exception: Invalid image data</span><br><span class="line">... ...</span><br><span class="line">...      inherit: <span class="keyword">false</span></span><br><span class="line">...      color: Color(<span class="number">0xff191c1b</span>)</span><br><span class="line">...      family: NotoSansSC</span><br><span class="line">...      size: <span class="number">14.0</span></span><br><span class="line">...      weight: <span class="number">400</span></span><br><span class="line">...      letterSpacing: <span class="number">0.3</span></span><br><span class="line">...      baseline: alphabetic</span><br><span class="line">...      height: <span class="number">1.4</span>x</span><br><span class="line">...      leadingDistribution: even</span><br><span class="line">...      decoration: Color(<span class="number">0xff191c1b</span>) TextDecoration.none</span><br><span class="line">...      <span class="string">&quot;load image failed, click to reload&quot;</span></span><br><span class="line">====================================================================================================</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å°è¯•åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå‘ç°é‡å®šå‘åˆ°äº† <a href="https://tutu.to/show/ttt_tvI99C-png">https://tutu.to/show/ttt_tvI99C-png</a>ï¼Œè¿™å°±å€¼å¾—æ€€ç–‘äº†ï¼Œæ˜¯ä¸æ˜¯åœ¨ app ä¸­ä½¿ç”¨ http get è·å–å›¾ç‰‡èµ„æºæ—¶ï¼Œå‘ç”Ÿäº†é‡å®šå‘ç›´æ¥è¿”å›äº† html ç»“æ„ï¼Œå¹¶éæœ‰æ•ˆçš„ bytes æ•°æ®ï¼Œå¯¼è‡´å›¾ç‰‡åŠ è½½å¤±è´¥å‘¢ï¼Ÿ</p><hr/>æˆ‘ä»¬å…ˆå°è¯•åœ¨postmanä¸­æ¨¡æ‹Ÿè¯·æ±‚ï¼Œå›¾ç‰‡æ²¡æœ‰æ­£å¸¸æ˜¾ç¤ºï¼Œè¿”å›äº†htmlç»“æ„<p>åŒæ ·çš„ï¼Œæˆ‘ä»¬åœ¨ app ä¸­ç›´æ¥ä½¿ç”¨ http è¯·æ±‚å›¾ç‰‡ï¼Œè·Ÿ postman è¿”å›äº†åŒæ ·çš„ html ç»“æ„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[log] <span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span> <span class="attr">class</span>=<span class="string">&quot;relative min-full&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;strict-origin-when-cross-origin&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;csrf-token&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">content</span>=<span class="string">&quot;Qc2IhKwxEALVm7hdNXnLl8uaSBkpStYXnTlSvkOI&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>loading<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;0.1;url=show/ttt_tvI99C-png&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">            <span class="attr">defer</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">&quot;https://s.urstudio.cn/pixel/YIavbDTc6LktjXg2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">referrerpolicy</span>=<span class="string">&quot;origin&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><hr/><p>äºæ˜¯æˆ‘åœ¨æµè§ˆå™¨ä¸­è®¿é—®åŸä¸»é¢˜ï¼Œå‘ç°å›¾ç‰‡å¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œé€šè¿‡æŸ¥çœ‹ Domï¼Œå‘ç° <a href="https://tutu.to/ttt_tvI99C.png">å›¾ç‰‡é“¾æ¥</a> ä¹Ÿç›¸åŒï¼Œå¦å¤–åœ¨ image æ ‡ç­¾ä¸Šæœ‰é¢å¤–ä¸¤ä¸ªå±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">referrerpolicy = <span class="string">&quot;no-referrer&quot;</span>;</span><br><span class="line">rel = <span class="string">&quot;noreferrer&quot;</span>;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œè·Ÿè¿™ä¸¤ä¸ªå±æ€§æœ‰å…³å—ï¼Ÿ</p><h5 id="referrerpolicy"><a href="#referrerpolicy" class="headerlink" title="referrerpolicy"></a>referrerpolicy</h5><blockquote><p>è¿™ä¸ªå±æ€§å®šä¹‰äº†<img> å…ƒç´ åœ¨è·å–èµ„æºæ—¶çš„å¼•ç”¨æ–¹å¼ã€‚<br>å±æ€§æœ‰ï¼š</p></blockquote><ul><li>no-referrerï¼šè¡¨ç¤º HTTP å¤´éƒ¨ä¿¡æ¯å°†ä¸ä¼šå‘é€ referrer</li><li>originï¼š referrer åªåŒ…å«ç­–ç•¥ã€ä¸»æœºåã€ç«¯å£ç­‰é¡µé¢æºçš„ä¿¡æ¯</li><li>unsafe-urlï¼š è¿™æ„å‘³ç€å¼•ç”¨è€…å°†åŒ…æ‹¬æºç«™å’Œè·¯å¾„ï¼ˆä½†ä¸åŒ…æ‹¬ç‰‡æ®µã€å¯†ç æˆ–ç”¨æˆ·åï¼‰ã€‚è¿™ç§æƒ…å†µæ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šæ³„æ¼è·¯å¾„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å·²è¢«ä½¿ç”¨ TLS éšè—åˆ°ç¬¬ä¸‰æ–¹ã€‚</li></ul><h5 id="rel"><a href="#rel" class="headerlink" title="rel"></a>rel</h5><p>å¦å¤– <code>Referer</code>å•ç‹¬è®²</p><blockquote><p>Referer è¯·æ±‚å¤´åŒ…å«äº†å½“å‰è¯·æ±‚é¡µé¢çš„æ¥æºé¡µé¢çš„åœ°å€ï¼Œå³è¡¨ç¤ºå½“å‰é¡µé¢æ˜¯é€šè¿‡æ­¤æ¥æºé¡µé¢é‡Œçš„é“¾æ¥è¿›å…¥çš„ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ Referer è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œå¯èƒ½ä¼šä»¥æ­¤è¿›è¡Œç»Ÿè®¡åˆ†æã€æ—¥å¿—è®°å½•ä»¥åŠç¼“å­˜ä¼˜åŒ–ç­‰ã€‚</p></blockquote><p>mark æ­¤å¤„ï¼Œæˆ‘ä»¬å…ˆç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><p>æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œå‘ç°å›¾ç‰‡èµ„æºçš„è¯·æ±‚å“åº”ä¸­å¹¶æ²¡æœ‰è¿”å›ç±»ä¼¼äº redirect é‡å®šå‘çš„å†…å®¹</p><p>å¤åˆ¶ cURL åˆ° postman æ¨¡æ‹Ÿè¯·æ±‚ï¼Œå›¾ç‰‡å¯ä»¥æ­£å¸¸è¿”å›ï¼Œæ‰¾åˆ°è¯·æ±‚å¤´ä¸­å…³é”®å­—æ®µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;sec-fetch-dest&#x27;</span> : image</span><br></pre></td></tr></table></figure><p>å…³äº<code>Sec-Fetch-Dest</code>åœ¨MDNä¸Šçš„è¯´æ˜</p><blockquote><p>Sec-Fetch-Dest Fetch å…ƒæ•°æ®è¯·æ±‚æ ‡å¤´æŒ‡ç¤ºè¯·æ±‚çš„ç›®æ ‡ï¼Œå³æ•°æ®çš„æ¥æºä»¥åŠå¦‚ä½•ä½¿ç”¨è¿™äº›è·å–åˆ°çš„æ•°æ®ã€‚<br>è¿™å…è®¸æœåŠ¡å™¨æ ¹æ®è¯·æ±‚æ˜¯å¦é‡‡ç”¨äº†é€‚å½“çš„ä½¿ç”¨æ–¹å¼æ¥ç¡®å®šæ˜¯å¦ä¸ºè¯·æ±‚æä¾›æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰ audio ç›®æ ‡çš„è¯·æ±‚åº”è¯·æ±‚éŸ³é¢‘æ•°æ®ï¼Œè€Œä¸æ˜¯å…¶ä»–ç±»å‹çš„èµ„æºï¼ˆä¾‹å¦‚ï¼ŒåŒ…å«æ•æ„Ÿç”¨æˆ·ä¿¡æ¯çš„æ–‡æ¡£ï¼‰ã€‚</p></blockquote><p>åœ¨æ­¤å¤„æˆ‘ä»¬ä½¿ç”¨æŒ‡å®š sec-fetch-dest çš„ç±»å‹ä¸ºimageï¼ŒæˆåŠŸè§£å†³ã€‚<br></br><br>é‚£ä¹ˆ <code>Sec-Fetch-Dest</code> åˆæ˜¯ä»€ä¹ˆä¸œä¸œå‘¢ï¼Ÿ<br>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç½‘ç»œè¯·æ±‚çš„å…ƒæ•°æ®æè¿°ï¼ŒæœåŠ¡ç«¯æ ¹æ®è¿™äº›è¡¥å……æ•°æ®è¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶å“åº”ï¼Œæ¢å¥è¯è¯´ï¼ŒæœåŠ¡ç«¯å¯ä»¥ç²¾ç¡®åˆ¤æ–­è¯·æ±‚çš„åˆæ³•æ€§ï¼Œæœç»éæ³•è¯·æ±‚å’Œæ”»å‡»ï¼Œæé«˜webæœåŠ¡çš„å®‰å…¨æ€§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç–‘éš¾æ‚ç—‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>360Â°çœ‹è½¦å®ç°æ–¹æ¡ˆ</title>
      <link href="/post/7a597f7.html"/>
      <url>/post/7a597f7.html</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œæœ‰360Â°çœ‹è½¦çš„éœ€æ±‚ï¼Œå³å·¦å³å·¦å³æ»‘åŠ¨é¼ æ ‡å®ç°æ­£ã€ä¾§ã€åæ–¹ï¼Œå¤šè§†è§’çœ‹è½¦ï¼Œå¢åŠ æ„å‘ç”¨æˆ·å¯¹äºè½¦è¾†å¤–è§‚çš„äº†è§£ï¼Œæé«˜è´­ä¹°æ„å‘ï¼ˆæ¯•ç«Ÿæ¯”ä¸‰å¼ è½®æ’­å›¾æ›´ç”ŸåŠ¨ä¸æ˜¯ï¼‰ã€‚</p><p>ç»è¿‡è°ƒç ”ï¼Œå‘ç°å¸‚é¢ä¸Šç±»ä¼¼åœºæ™¯çš„å®ç°éƒ½æ˜¯36å¼ å›¾ï¼Œæ¯10Â°åˆ‡æ¢ä¸€å¼ ï¼Œè¾¾åˆ°360Â°çš„æ•ˆæœï¼Œ<code>36 = 360 /10</code>ï¼ŒåŒæ—¶ä¹Ÿå‘ç°ï¼Œç›®å‰å¸‚é¢ä¸Šå¼€æºæ¡†æ¶ä¸é€‚ç”¨äºä¸šåŠ¡éœ€æ±‚ï¼Œä¸»è¦è¿˜æ˜¯å¯å®šåˆ¶åº¦å¤ªä½ï¼Œæ‰€ä»¥å†³å®šè‡ªå·±å®ç°ï¼ˆå¥½åƒä¹Ÿæ²¡å…¶ä»–åŠæ³•äº†ï¼‰ã€‚</p><p>ä¸‹é¢å°†ä»å‡ æ–¹é¢å®ç°</p><ul><li>å¦‚ä½•å±•ç¤º</li><li>å¦‚ä½•å®ç°</li><li>å¦‚ä½•ä¼˜åŒ–</li></ul><h3 id="å¦‚ä½•å±•ç¤º"><a href="#å¦‚ä½•å±•ç¤º" class="headerlink" title="å¦‚ä½•å±•ç¤º"></a>å¦‚ä½•å±•ç¤º</h3><p>è¦è¾¾åˆ°360Â°çœ‹è½¦çš„æ•ˆæœï¼Œéœ€è¦å°†36å¼ å›¾ç‰‡å åŠ åœ¨ä¸€èµ·ï¼Œå¸ƒå±€å°±ä½¿ç”¨å¦‚ä¸‹ï¼Œçˆ¶ç›’å­ <code>position: relative</code>ï¼Œå­å…ƒç´  <code>img</code> å…±36å¼ ï¼Œä½¿ç”¨ <code>position: absolute</code> å±‚å ï¼Œæ»‘åŠ¨çš„æ—¶å€™é€šè¿‡åˆ‡æ¢å›¾ç‰‡çš„ <strong>æ˜¾ç¤º&#x2F;éšè—</strong> å®Œæˆæ•ˆæœã€‚å½“ç„¶ç›¸å…³çš„è§¦å‘äº‹ä»¶æ˜¯åœ¨çˆ¶ç›’å­ä¸Šå®Œæˆçš„ã€‚</p><p>è¿™é‡Œå¯¹äºå›¾ç‰‡çš„éšè—ä½¿ç”¨ <code>visibility: hidden</code>ï¼Œè‡³äºä¸ºä»€ä¹ˆä¸ä½¿ç”¨ <code>display:none</code> ? æ˜¯å› ä¸º <code>display:none</code> çš„å…ƒç´ <strong>æ˜¾ç¤º&#x2F;éšè—</strong>æ—¶ä¼šè§¦å‘<strong>å›æµ</strong>ã€<strong>é‡ç»˜</strong>ï¼Œå¯¹äºæ€§èƒ½ä¼šæœ‰å½±å“ï¼Œè€Œ <code>visibility: hidden</code> åªä¼šè§¦å‘é‡ç»˜ï¼Œæ€§èƒ½æ–¹é¢åè€…å±¡èƒœä¸€ç­¹ã€‚</p><p>å¦å¤–ï¼Œè®°å¾—ç»™ <code>img</code> åŠ ä¸Š<code>draggable="false"</code> å±æ€§ï¼Œå¦åˆ™å›¾ç‰‡è¢«å‡ºè§†å›¾å¤–ï¼Œå°±ä¸ç¾è§‚äº†ã€‚å½“ç„¶åœ¨è¿™é‡Œç†è®ºä¸Šæ˜¯ä¸ä¼šå‘ç”Ÿè¢«æ‹–åŠ¨çš„æƒ…å†µçš„ã€‚</p><p>åŸºæœ¬å¸ƒå±€å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span></span><br><span class="line">    ... ä¸€å…±36å¼ </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•å®ç°"><a href="#å¦‚ä½•å®ç°" class="headerlink" title="å¦‚ä½•å®ç°"></a>å¦‚ä½•å®ç°</h3><p>å› ä¸º<a href="https://www.niutr.com/">å“ç‰Œå®˜ç½‘</a>æ˜¯è‡ªé€‚åº”çš„ï¼Œéœ€è¦å¯¹PCã€PADã€mobéƒ½åšé€‚é…ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨<code>mouse</code>ã€<code>touch</code> æ¥å®ç°å…·ä½“çš„æ“ä½œï¼ˆæ»‘åŠ¨ï¼‰é€»è¾‘ã€‚</p><p>é¼ æ ‡ç›¸å…³äº‹ä»¶</p><ul><li>mouseup</li><li>mousemove</li><li>mousedown</li><li>mouseleave</li></ul><p>è§¦æ‘¸ç›¸å…³äº‹ä»¶</p><ul><li>touchstart</li><li>touchmove</li><li>touchend</li></ul><p><strong>ç®€å•è¯´ä¸€ä¸‹æ€è·¯ï¼š</strong></p><ol><li><p>å¼€å§‹ç§»åŠ¨ï¼šåœ¨é¼ æ ‡æŒ‰ä¸‹æˆ–è€…å¼€å§‹è§¦æ‘¸æ—¶</p><ul><li>è®°å½•åˆå§‹çš„ <code>pageX</code>ï¼Œ</li><li>è®°å½•å½“å‰çš„å›¾ç‰‡ç´¢å¼• <code>index</code></li><li>æ ‡è®°å¼€å§‹ <code>clicked = true</code></li></ul></li><li><p>ç§»åŠ¨ä¸­ï¼šåœ¨é¼ æ ‡æˆ–è€…è§¦æ‘¸å¼€å§‹ç§»åŠ¨æ—¶</p><ul><li>è®¡ç®—å½“å‰ <code>pageX</code> ä¸ä¸Šä¸€æ¬¡æˆ–è€…åˆå§‹çš„<code>pageX</code> çš„å·®å€¼</li><li>å·®å€¼å¤§äº0ï¼Œå›¾ç‰‡ç´¢å¼• <code>index</code> è‡ªå¢1</li><li>å·®å€¼å°äº0ï¼Œå›¾ç‰‡ç´¢å¼• <code>index</code> è‡ªå‡1</li><li>è‡ªå¢&#x2F;è‡ªå‡åï¼Œå¯¹äºå½“å‰å›¾ç‰‡ç§»é™¤ <code>visibility: hidden</code> å±æ€§ï¼Œä¸Šä¸€å¼ &#x2F;ä¸‹ä¸€å¼ å›¾ç‰‡å¢åŠ  <code>visibility: hidden</code> å±æ€§</li><li><code>index</code> å¤§äºå›¾ç‰‡æ€»æ•°æ—¶ï¼Œé‡ç½®ä¸º0ï¼Œ<code>index</code> å°äº1æ—¶ï¼Œé‡ç½®ä¸ºå›¾ç‰‡æ€»æ•°ï¼Œä»¥æ­¤æ¥å®Œæˆå¾ªç¯çš„æ•ˆæœ</li></ul></li><li><p>ç§»åŠ¨å®Œæˆï¼šåœ¨é¼ æ ‡æŠ¬èµ·æˆ–è€…åœæ­¢è§¦æ‘¸æ—¶, æ ‡è®° <code>clicked = false</code></p></li></ol><p><strong>å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¼ æ ‡æŒ‰ä¸‹ è§¦æ‘¸å¼€å§‹</span></span><br><span class="line"><span class="title function_">onMousedown</span>(<span class="params">type, e</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pageX = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&quot;touch&quot;</span>) &#123;</span><br><span class="line">        pageX = e.<span class="property">changedTouches</span>[<span class="number">0</span>].<span class="property">pageX</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        pageX = e.<span class="property">pageX</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®°å½•åˆå§‹å€¼</span></span><br><span class="line">    currPos = pageX</span><br><span class="line">    <span class="comment">// è®°å½•æŒ‰ä¸‹çŠ¶æ€</span></span><br><span class="line">    clicked = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¼ æ ‡ç§»åŠ¨ èŠ‚æµ</span></span><br><span class="line"><span class="attr">onMouseMove</span>: <span class="title function_">throttle</span>(<span class="keyword">function</span>(<span class="params">type, e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(clicked)&#123;</span><br><span class="line">        <span class="keyword">let</span> pageX = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (type === <span class="string">&quot;touch&quot;</span>) &#123;</span><br><span class="line">            pageX = e.<span class="property">changedTouches</span>[<span class="number">0</span>].<span class="property">pageX</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            pageX = e.<span class="property">pageX</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (currPos - pageX &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            currImg++;</span><br><span class="line">            <span class="keyword">if</span> (currImg &gt; imageTotal) &#123;</span><br><span class="line">                currImg = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            currImg--;</span><br><span class="line">            <span class="keyword">if</span> (currImg &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                currImg = imageTotal;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        currPos = pageX;</span><br><span class="line">        vrImgs[lastImg].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;notseen&#x27;</span>);</span><br><span class="line">        vrImgs[currImg].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;notseen&#x27;</span>);</span><br><span class="line">        lastImg = currImg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¼ æ ‡æŠ¬èµ· ç»“æŸè§¦æ‘¸</span></span><br><span class="line"><span class="title function_">onMouseup</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// å–æ¶ˆæŒ‰ä¸‹çŠ¶æ€</span></span><br><span class="line">    clicked = <span class="literal">false</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>å½“æŠŠä»£ç å®Œæˆå¹¶å®ç°æ—¶ï¼Œä½ ä¼šå‘ç°ç¨å¾®æ‹–åŠ¨å‡ åƒç´ ï¼Œå›¾ç‰‡å°±æ˜¯ç–¯ç‹‚åˆ‡æ¢ï¼Œäºæ˜¯æˆ‘ä»¬å¯¹æ•æ„Ÿåº¦åšä¸€äº›ä¼˜åŒ–ã€‚<br>ä½¿ç”¨ä¸€ä¸ªç•Œé™å€¼ï¼Œè¶…è¿‡æˆ–å°äºè¿™ä¸ªå€¼æ‰è§¦å‘å›¾ç‰‡çš„æ˜¾ç¤º&#x2F;éšè—ï¼Œå½“ç„¶è¿™ä¸ªç•Œé™å¯ä»¥è§†ä¸šåŠ¡éœ€æ±‚è€Œå®šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onMouseMove</span>: <span class="title function_">throttle</span>(<span class="keyword">function</span>(<span class="params">type, e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(clicked)&#123;</span><br><span class="line">        <span class="keyword">let</span> pageX = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (type === <span class="string">&quot;touch&quot;</span>) &#123;</span><br><span class="line">            pageX = e.<span class="property">changedTouches</span>[<span class="number">0</span>].<span class="property">pageX</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            pageX = e.<span class="property">pageX</span></span><br><span class="line">        &#125;</span><br><span class="line">        widthStep = <span class="number">4</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">abs</span>(currPos - pageX) &gt;= widthStep) &#123;</span><br><span class="line">            <span class="keyword">if</span> (currPos - pageX &gt;= widthStep) &#123;</span><br><span class="line">                currImg++;</span><br><span class="line">                <span class="keyword">if</span> (currImg &gt; imageTotal) &#123;</span><br><span class="line">                    currImg = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                currImg--;</span><br><span class="line">                <span class="keyword">if</span> (currImg &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                    currImg = imageTotal;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            currPos = pageX;</span><br><span class="line">            vrImgs[lastImg].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;notseen&#x27;</span>);</span><br><span class="line">            vrImgs[currImg].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;notseen&#x27;</span>);</span><br><span class="line">            lastImg = currImg;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,<span class="number">0</span>),</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œ360Â°çœ‹è½¦å°±åŸºæœ¬å®Œæˆäº†ã€‚</p><h3 id="å¦‚ä½•ä¼˜åŒ–"><a href="#å¦‚ä½•ä¼˜åŒ–" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–"></a>å¦‚ä½•ä¼˜åŒ–</h3><p>ä½†æ˜¯ï¼Œç­‰ç­‰ã€‚36å¼ å›¾ï¼Œå¦‚æœç”¨æˆ·åœ¨å›¾ç‰‡è¿˜æ²¡æœ‰å…¨éƒ¨åŠ è½½å®Œçš„æƒ…å†µä¸‹æ‹–åŠ¨ï¼Œå²‚ä¸æ˜¯ä¸å°´å°¬ğŸ˜…ï¼Œç©ºç™½ä¸€ç‰‡ï¼Œç¥é©¬éƒ½æ²¡æœ‰ã€‚<br>é‚£å°±ç›‘å¬å›¾ç‰‡åŠ è½½ï¼ŒåŠ ä¸ªloadingæˆ–è€…è¿›åº¦æ¡å§ï¼Œè¿›åº¦æ¡æ›´ç›´è§‚ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨imageçš„onLoadæ¥å®ç°</p><blockquote><p>onload äº‹ä»¶åœ¨å›¾ç‰‡åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">image.<span class="property">onLoad</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ¯æ¬¡åŠ è½½å®Œ countè‡ªå¢1</span></span><br><span class="line">    count ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–æ‰€æœ‰éœ€è¦åŠ è½½çš„å›¾ç‰‡ç¤ºä¾‹ï¼Œç´¯è®¡ <code>count</code> &#x3D;&#x3D; <code>len</code>åˆ™è¡¨ç¤ºåŠ è½½å®Œæˆ<br>æ­¤å¤„ä½¿ç”¨ <code>Promise</code> è¿›è¡ŒåŒ…è£…ï¼Œæ¥å®ç°å›¾ç‰‡åŠ è½½å®Œçš„ç›‘å¬ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>watch</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;png&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> len = img.<span class="property">length</span></span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span> ; i &lt; len ; i++)&#123;</span><br><span class="line">    img[i].<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        count ++ </span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å°†æ¯ä¸ª <code>onLoad</code> æ‰‹åŠ¨è½¬æ¢ä¸º <code>Promise</code>ï¼Œå¤šä¸ª <code>Promise</code> æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶åˆ©ç”¨ <code>Promise.all()</code> ä¿è¯æ‰€æœ‰çš„å›¾ç‰‡åŠ è½½å®Œæˆåæ‰§è¡Œåç»­é€»è¾‘</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">imgComplate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> _self = <span class="variable language_">this</span></span><br><span class="line">    <span class="comment">// å›¾ç‰‡åŠ è½½ä¸­</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">imgLoad</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;png&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> len = img.<span class="property">length</span></span><br><span class="line">    <span class="keyword">const</span> promiseAll = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span> ; i &lt; len ; i++)&#123;</span><br><span class="line">        promiseAll[i] = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">            img[i].<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                _self.<span class="property">loadedCount</span> ++ </span><br><span class="line">                <span class="keyword">const</span> progress = ((_self.<span class="property">loadedCount</span> / <span class="number">35</span>) * <span class="number">100</span>).<span class="title function_">toFixed</span>(<span class="number">0</span>)</span><br><span class="line">                _self.<span class="property">loadWidth</span> =  (progress &gt; <span class="number">100</span> ? <span class="number">100</span> : progress) + <span class="string">&#x27;%&#x27;</span></span><br><span class="line">                <span class="title function_">resolve</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ©ç”¨ Promise.all ä¿è¯æ‰€æœ‰çš„å›¾ç‰‡åŠ è½½å®Œæˆåæ‰§è¡Œåç»­é€»è¾‘</span></span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">all</span>(promiseAll).<span class="title function_">then</span>(<span class="function">(<span class="params">img</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// å›¾ç‰‡åŠ è½½å®Œæˆ</span></span><br><span class="line">        _self.<span class="property">imgLoad</span> = <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¤§åŠŸå‘Šæˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™å®ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cookieç›¸å…³</title>
      <link href="/post/c1214502.html"/>
      <url>/post/c1214502.html</url>
      
        <content type="html"><![CDATA[<p>ç”±äºHTTPæœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡ç«¯æ— æ³•åŒºåˆ†è°æ˜¯è°ï¼Œæ‰€ä»¥æœ‰äº†cookieçš„æ¦‚å¿µã€‚cookieçš„ä½œç”¨ä¹‹ä¸€ä¹Ÿå°±æ˜¯åŒºåˆ†ç”¨æˆ·ï¼Œå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚</p><h3 id="cookieæ¥å»"><a href="#cookieæ¥å»" class="headerlink" title="cookieæ¥å»"></a>cookieæ¥å»</h3><p>cookieç”±æœåŠ¡ç«¯åœ¨å“åº”å¤´ä¸­é€šè¿‡set-cookieä¸‹å‘ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°åï¼Œä¼šè‡ªåŠ¨å°†cookieä¸­çš„å­—æ®µä¿å­˜èµ·æ¥ï¼Œä¸‹æ¬¡å†å‘èµ·è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦cookie</p><h3 id="cookieçš„å±æ€§"><a href="#cookieçš„å±æ€§" class="headerlink" title="cookieçš„å±æ€§"></a>cookieçš„å±æ€§</h3><ul><li>Domainï¼šcookieçš„ä½œç”¨åŸŸï¼Œé»˜è®¤ <code>/</code>ä»AåŸŸåå¾—åˆ°çš„cookieæ•°å€¼åªæœ‰åœ¨è¯·æ±‚AåŸŸåç›¸å…³åœ°å€&#x2F;æ¥å£æ—¶æ‰ä¼šæºå¸¦ã€‚æœªè®¾ç½®æ—¶ï¼Œä¸document.domainæˆ–è€…location.hostnameç›¸ç­‰ã€‚</li><li>pathï¼šå¯ä»¥å…±äº« Cookie çš„å­ç›®å½•ï¼Œé»˜è®¤ <code>/</code> æ ¹ç›®å½•ã€‚</li><li>Expires&#x2F;Max-Ageï¼šæœ‰æ•ˆæœŸï¼Œä¸è®¾ç½®åˆ™å…³é—­æµè§ˆå™¨æ—¶è‡ªåŠ¨æ¸…ç©ºcookieï¼ŒExpiresç»å¯¹æ—¶é—´ï¼ŒMax-Ageç›¸å¯¹æ—¶é—´ï¼ˆç§’ï¼‰ã€‚Max-Ageä¼˜å…ˆçº§è¾ƒé«˜ã€‚</li><li>HttpOnlyï¼šä¸ºtrueæ—¶ï¼Œä¸å¯è¢«JavaScriptè·å–åˆ°ã€‚</li><li>sameSiteï¼šé™åˆ¶ç¬¬ä¸‰æ–¹cookieçš„å‘é€åœºæ™¯<ul><li>Strictï¼šä¸¥æ ¼æ¨¡å¼ï¼Œå®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹cookieï¼Œè·¨ç«™ç‚¹æ—¶ï¼Œä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šå‘é€ Cookieã€‚</li><li>Laxï¼šé»˜è®¤å€¼ã€‚é™¤äº†<code><a href="..."></a></code>ã€<code><link rel="prerender" href="..."/></code>ã€<code><form method="GET" action="..."></code> å‡ä¸å‘é€ç¬¬ä¸‰æ–¹cookieã€‚</li><li>Noneï¼šè·¨ç«™éƒ½å‘é€ã€‚</li></ul></li></ul><p><strong>è·¨åŸŸæºå¸¦cookieéœ€æ±‚æ»¡è¶³ä»¥ä¸‹æ¡ä»¶</strong></p><ul><li>å®¢æˆ·ç«¯è¯·æ±‚å¤´æºå¸¦ <code>withCredentials = true<code></li><li>æœåŠ¡ç«¯è®¾ç½®<ul><li>Access-Control-Allow-Origin: <strong>ç‰¹å®šåŸŸå</strong></li><li>Access-Control-Allow-Credentials: true</li><li>samesite: none</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘é¡µæ€§èƒ½æŒ‡æ ‡</title>
      <link href="/post/6b0ce54d.html"/>
      <url>/post/6b0ce54d.html</url>
      
        <content type="html"><![CDATA[<p>å‡ ä¸ªå…³é”®è¯ï¼š<br>FCPã€LCPã€TTIã€FIDã€TBT</p><h3 id="ä»€ä¹ˆæ˜¯FCP"><a href="#ä»€ä¹ˆæ˜¯FCP" class="headerlink" title="ä»€ä¹ˆæ˜¯FCP"></a>ä»€ä¹ˆæ˜¯FCP</h3><p>é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (FCP) æŒ‡æ ‡æµ‹é‡é¡µé¢ä»å¼€å§‹åŠ è½½åˆ°é¡µé¢å†…å®¹çš„ä»»ä½•éƒ¨åˆ†åœ¨å±å¹•ä¸Šå®Œæˆæ¸²æŸ“çš„æ—¶é—´ã€‚å¯¹äºè¯¥æŒ‡æ ‡ï¼Œâ€å†…å®¹â€æŒ‡çš„æ˜¯æ–‡æœ¬ã€å›¾åƒï¼ˆåŒ…æ‹¬èƒŒæ™¯å›¾åƒï¼‰ã€<code>svg</code>å…ƒç´ æˆ–éç™½è‰²çš„<code>canvas</code>å…ƒç´ ã€‚ï¼ˆç™½å±æ—¶é•¿ï¼‰</p><h4 id="FCPæ—¶é•¿çš„å®šä¹‰"><a href="#FCPæ—¶é•¿çš„å®šä¹‰" class="headerlink" title="FCPæ—¶é•¿çš„å®šä¹‰"></a>FCPæ—¶é•¿çš„å®šä¹‰</h4><p>è¦åœ¨ JavaScript ä¸­æµ‹é‡ FCPï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç»˜åˆ¶è®¡æ—¶ APIã€‚ä»¥ä¸‹ç¤ºä¾‹è¯´æ˜äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªPerformanceObserveræ¥ä¾¦å¬åç§°ä¸ºfirst-contentful-paintçš„paintæ¡ç›®å¹¶è®°å½•åœ¨æ§åˆ¶å°ä¸­ã€‚</p><p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://github.com/GoogleChrome/web-vitals">web-vitals</a> æ¥å®Œæˆè¿™ä¸€æ­¥éª¤</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">entryList</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> entryList.<span class="title function_">getEntriesByName</span>(<span class="string">&#x27;first-contentful-paint&#x27;</span>)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;FCP candidate:&#x27;</span>, entry.<span class="property">startTime</span>, entry);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).<span class="title function_">observe</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;paint&#x27;</span>, <span class="attr">buffered</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure><h4 id="å¦‚ä½•ä¼˜åŒ–FCP"><a href="#å¦‚ä½•ä¼˜åŒ–FCP" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–FCP"></a>å¦‚ä½•ä¼˜åŒ–FCP</h4><ul><li>å‡å°‘é˜»å¡æ¸²æŸ“çš„èµ„æº</li><li>å‡å°‘CSSã€ä¼˜åŒ–CSSé€‰æ‹©å™¨</li><li>é¿å…é¡µé¢é‡å®šå‘</li><li>é¢„åŠ è½½å…³é”®è¯·æ±‚</li><li>å‡å°‘DOMåµŒå¥—</li><li>åˆç†ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜</li><li>èµ„æºé¢„åŠ è½½ link rel&#x3D;â€preloadâ€  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span> <span class="attr">as</span>=<span class="string">&quot;style&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;ui.js&quot;</span> <span class="attr">as</span>=<span class="string">&quot;script&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li><li>DNSé¢„è§£æ   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://example.com&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="ä»€ä¹ˆæ˜¯LCP"><a href="#ä»€ä¹ˆæ˜¯LCP" class="headerlink" title="ä»€ä¹ˆæ˜¯LCP"></a>ä»€ä¹ˆæ˜¯LCP</h3><p>æœ€å¤§å†…å®¹ç»˜åˆ¶ï¼Œå¯è§†åŒºåŸŸä¸­æœ€å¤§å†…å®¹å…ƒç´ å˜æ¸²æŸ“åˆ°é¡µé¢ä¸Šæ‰€éœ€çš„æ—¶é—´ç‚¹ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯FID"><a href="#ä»€ä¹ˆæ˜¯FID" class="headerlink" title="ä»€ä¹ˆæ˜¯FID"></a>ä»€ä¹ˆæ˜¯FID</h3><p>FID æµ‹é‡ä»ç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸é¡µé¢äº¤äº’ï¼ˆä¾‹å¦‚å½“ä»–ä»¬å•å‡»é“¾æ¥ã€ç‚¹æŒ‰æŒ‰é’®æˆ–ä½¿ç”¨ç”± JavaScript é©±åŠ¨çš„è‡ªå®šä¹‰æ§ä»¶ï¼‰ç›´åˆ°æµè§ˆå™¨å¯¹äº¤äº’ä½œå‡ºå“åº”ï¼Œå¹¶å®é™…èƒ½å¤Ÿå¼€å§‹å¤„ç†äº‹ä»¶å¤„ç†ç¨‹åºæ‰€ç»è¿‡çš„æ—¶é—´ã€‚<br>ä¸€èˆ¬å»ºè®®FIDçš„æ—¶é•¿ä¸º100msä»¥å†…<br><img src="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/eXyvkqRHQZ5iG38Axh1Z.svg" alt="brower cache"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå‘ç”Ÿè¾“å…¥å»¶è¿Ÿï¼ˆåˆç§°è¾“å…¥å»¶æ—¶ï¼‰æ˜¯å› ä¸ºæµè§ˆå™¨çš„ä¸»çº¿ç¨‹æ­£å¿™ç€æ‰§è¡Œå…¶ä»–å·¥ä½œï¼Œæ‰€ä»¥ï¼ˆè¿˜ï¼‰ä¸èƒ½å“åº”ç”¨æˆ·ã€‚å¯èƒ½å¯¼è‡´è¿™ç§æƒ…å†µå‘ç”Ÿçš„ä¸€ç§å¸¸è§åŸå› æ˜¯æµè§ˆå™¨æ­£å¿™äºè§£æå’Œæ‰§è¡Œç”±æ‚¨çš„åº”ç”¨ç¨‹åºåŠ è½½çš„å¤§å‹ JavaScript æ–‡ä»¶ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¸èƒ½è¿è¡Œä»»ä½•äº‹ä»¶ä¾¦å¬å™¨ï¼Œå› ä¸ºæ­£åœ¨åŠ è½½çš„ JavaScript å¯èƒ½ä¼šè®©æµè§ˆå™¨å»æ‰§è¡Œå…¶ä»–å·¥ä½œã€‚</p><h4 id="FIDæ—¶é•¿çš„å®šä¹‰"><a href="#FIDæ—¶é•¿çš„å®šä¹‰" class="headerlink" title="FIDæ—¶é•¿çš„å®šä¹‰"></a>FIDæ—¶é•¿çš„å®šä¹‰</h4><p>FID æµ‹é‡æ¥æ”¶åˆ°è¾“å…¥äº‹ä»¶çš„æ—¶é—´ç‚¹ä¸ä¸»çº¿ç¨‹ä¸‹ä¸€æ¬¡ç©ºé—²çš„æ—¶é—´ç‚¹ä¹‹é—´çš„å·®å€¼ã€‚è¿™å°±æ„å‘³ç€<strong>å³ä½¿åœ¨å°šæœªæ³¨å†Œäº‹ä»¶ä¾¦å¬å™¨çš„æƒ…å†µä¸‹</strong>ï¼ŒFID ä¹Ÿä¼šå¾—åˆ°æµ‹é‡ã€‚è¿™æ˜¯å› ä¸ºè®¸å¤šç”¨æˆ·äº¤äº’çš„æ‰§è¡Œå¹¶ä¸éœ€è¦äº‹ä»¶ä¾¦å¬å™¨ï¼Œä½†ä¸€å®šéœ€è¦ä¸»çº¿ç¨‹å¤„äºç©ºé—²æœŸã€‚</p><h4 id="å¦‚ä½•ä¼˜åŒ–FID"><a href="#å¦‚ä½•ä¼˜åŒ–FID" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–FID"></a>å¦‚ä½•ä¼˜åŒ–FID</h4><ul><li>å‡å°‘ç¬¬ä¸‰æ–¹ä»£ç çš„å½±å“</li><li>å‡å°‘ JavaScriptçš„æ‰§è¡Œæ—¶é—´</li><li>æœ€å°åŒ–ä¸»çº¿ç¨‹å·¥ä½œ</li><li>å‡å°‘è¯·æ±‚æ•°ï¼Œé™ä½è¯·æ±‚èµ„æºå¤§å°</li></ul><h3 id="ä»€ä¹ˆæ˜¯TBT"><a href="#ä»€ä¹ˆæ˜¯TBT" class="headerlink" title="ä»€ä¹ˆæ˜¯TBT"></a>ä»€ä¹ˆæ˜¯TBT</h3><p>æ€»é˜»å¡æ—¶é—´TBT æ˜¯æŒ‡FCPæ ¹TTIçš„æ—¶é—´æ€»å’Œï¼Œè¿™æœŸé—´ï¼Œä¸»çº¿ç¨‹è¢«é˜»å¡çš„æ—¶é—´è¿‡é•¿ï¼Œæ— æ³•ä½œå‡ºè¾“å…¥å“åº”ã€‚</p><p>æ¯å½“å‡ºç°é•¿ä»»åŠ¡ï¼ˆåœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œè¶…è¿‡ 50 æ¯«ç§’çš„ä»»åŠ¡ï¼‰æ—¶ï¼Œä¸»çº¿ç¨‹éƒ½è¢«è§†ä½œâ€é˜»å¡çŠ¶æ€â€ã€‚æˆ‘ä»¬è¯´ä¸»çº¿ç¨‹å¤„äºâ€é˜»å¡çŠ¶æ€â€æ˜¯å› ä¸ºæµè§ˆå™¨æ— æ³•ä¸­æ–­æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ã€‚å› æ­¤ï¼Œå¦‚æœç”¨æˆ·åœ¨æŸä¸ªé•¿ä»»åŠ¡è¿è¡ŒæœŸé—´ä¸é¡µé¢è¿›è¡Œäº¤äº’ï¼Œé‚£ä¹ˆæµè§ˆå™¨å¿…é¡»ç­‰åˆ°ä»»åŠ¡å®Œæˆåæ‰èƒ½ä½œå‡ºå“åº”ã€‚</p><p>å¦‚æœä»»åŠ¡æ—¶é•¿è¶³å¤Ÿé•¿ï¼ˆä¾‹å¦‚è¶…è¿‡ 50 æ¯«ç§’ï¼‰ï¼Œé‚£ä¹ˆç”¨æˆ·å¾ˆå¯èƒ½ä¼šæ³¨æ„åˆ°å»¶è¿Ÿï¼Œå¹¶è®¤ä¸ºé¡µé¢ç¼“æ…¢æˆ–å¡é¡¿ã€‚</p><h4 id="TBTæ—¶é•¿çš„å®šä¹‰"><a href="#TBTæ—¶é•¿çš„å®šä¹‰" class="headerlink" title="TBTæ—¶é•¿çš„å®šä¹‰"></a>TBTæ—¶é•¿çš„å®šä¹‰</h4><p>æˆ‘ä»¬å°†è¿è¡Œè¶…è¿‡59msçš„ä»»åŠ¡ç§°ä¹‹ä¸ºé•¿ä»»åŠ¡ï¼Œå°†å¤šä¸ªé•¿ä»»åŠ¡è¶…è¿‡ 50ms çš„éƒ¨åˆ†ç§°ä¹‹ä¸ºTBT</p><h4 id="å¦‚ä½•ä¼˜åŒ–TBT"><a href="#å¦‚ä½•ä¼˜åŒ–TBT" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–TBT"></a>å¦‚ä½•ä¼˜åŒ–TBT</h4><p>å¤§è‡´æ¥è¯´ï¼ŒTBTä¸FIDçš„ä¼˜åŒ–æ–¹å‘åŸºæœ¬ç›¸åŒï¼Œå› ä¸ºæŸç§æ„ä¹‰ä¸Šï¼Œä¸¤è€…çš„æŒ‡æ ‡éƒ½å–å†³äºé•¿ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹ä¸Šè€—è´¹çš„èµ„æºå¤§å°ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨ç¼“å­˜</title>
      <link href="/post/be7c79f7.html"/>
      <url>/post/be7c79f7.html</url>
      
        <content type="html"><![CDATA[<p>æµè§ˆå™¨ç¼“å­˜ä¸»è¦åˆ†ä¸ºå¼ºç¼“å­˜ã€åå•†ç¼“å­˜ã€å¯å‘å¼ç¼“å­˜ï¼Œä¸‹é¢è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</p><p>å½“æˆ‘ä»¬é¦–æ¬¡å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œç”±äºæœ¬åœ°æ²¡æœ‰ç¼“å­˜ç»“æœåŠæ ‡è¯†ï¼Œæ‰€ä»¥ç›´æ¥å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”æŠ¥æ–‡çš„HTTPå¤´ä¸­å¢åŠ ç¼“å­˜æ ‡è¯†ï¼Œå®¢æˆ·ç«¯å³æµè§ˆå™¨ä¼šæ ¹æ®ç¼“å­˜æ ‡è¯†æ¥å†³å®šæ˜¯å¦ç¼“å­˜ç»“æœï¼Œéœ€è¦ç¼“å­˜åˆ™å°†è¯·æ±‚ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ã€‚</p><p>åœ¨æ¯æ¬¡åœ¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­å…ˆæ£€æŸ¥æ˜¯å¦æœ‰è¯·æ±‚ç»“æœä»¥åŠç¼“å­˜æ ‡è¯†<br>æ ¹æ®æœ‰æ— è¯·æ±‚ç»“æœåŠç¼“å­˜æ ‡è¯†ï¼Œåšä»¥ä¸‹åˆ¤æ–­ï¼š</p><ol><li>æ— ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œèµ°å¼ºåˆ¶ç¼“å­˜å¤±è´¥ï¼Œç›´æ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚</li><li>æœ‰ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†<ol><li>ç¼“å­˜æ ‡è¯†åœ¨æœ‰é™æœŸå†…ï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥è¿”å›ç¼“å­˜ç»“æœï¼Œæ­¤æ—¶ç½‘ç»œè¯·æ±‚æ˜¾ç¤ºç°è‰²çš„200</li><li>ç¼“å­˜æ ‡è¯†å·²å¤±æ•ˆï¼Œåˆ™èµ°åå•†ç¼“å­˜</li></ol></li></ol><h2 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h2><p>ä¾èµ–å­—æ®µï¼š Expiresã€Cache-Control<br><code>Cache-Control</code> ä¼˜å…ˆäº <code>Expires</code></p><h4 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h4><p>æ¥æºï¼šä¸Šä¸€æ¬¡å“åº”è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨åœ¨å“åº”å¤´ä¸­è¿”å›çš„å­—æ®µï¼Œè¿‡æœŸæ—¶é—´ï¼Œå³èµ„æºçš„æœ‰æ•ˆæœŸï¼Œæ˜¯ç»å¯¹æ—¶é—´ã€‚<br>ä½¿ç”¨ï¼šæµè§ˆå™¨åœ¨ä¸‹æ¬¡å‘èµ·åŒä¸€è¯·æ±‚æ—¶ï¼Œä¼šé€šè¿‡Expriesæ¥åˆ¤æ–­è¯¥è¯·æ±‚åœ¨æœ¬åœ°çš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæœ‰æ•ˆåˆ™ç›´æ¥è¯»å–ï¼Œå¦åˆ™è¿›è¡Œåç»­é€»è¾‘<br>å¼Šç«¯ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯æ—¶é—´ä¸ä¸€è‡´ï¼Œå¯¼è‡´å‘½ä¸­ä¸å‡†ç¡®</p><h4 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h4><p>æ¥æºï¼šæ¥æºï¼šä¸Šä¸€æ¬¡å“åº”è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨åœ¨å“åº”å¤´ä¸­è¿”å›çš„å­—æ®µã€‚<br>å¸¸è§å±æ€§ï¼š</p><ul><li>max-ageï¼šèµ„æºæœ‰æ•ˆæœŸï¼Œä¸ºç›¸å¯¹æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚æ¯”å¦‚ <code>max-age = 3600</code> è¡¨ç¤ºèµ„æºå°†åœ¨1å°æ—¶åè¿‡æœŸï¼Œæµè§ˆå™¨åœ¨è¯¥æ—¶é—´æ®µå†…ç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œä¸å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚</li><li>no-cacheï¼šå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜èµ„æºï¼Œæ¯æ¬¡ä½¿ç”¨ç¼“å­˜èµ„æºå‰éƒ½å¿…é¡»é‡æ–°éªŒè¯å…¶æœ‰æ•ˆæ€§ã€‚è¿™æ„å‘³ç€æ¯æ¬¡éƒ½ä¼šå‘èµ· HTTP è¯·æ±‚ï¼Œä½†å½“ç¼“å­˜å†…å®¹ä»æœ‰æ•ˆæ—¶å¯ä»¥è·³è¿‡ HTTP å“åº”ä½“çš„ä¸‹è½½ã€‚</li><li>no-storeï¼šå…³é—­ç¼“å­˜ï¼Œå³æ¯æ¬¡è¯·æ±‚éƒ½ä¸è¿›è¡Œç¼“å­˜æ˜¯å¦æœ‰æ•ˆçš„åˆ¤æ–­ï¼Œç›´æ¥å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ã€‚</li><li>publicï¼šè¡¨æ˜å“åº”å¯ä»¥è¢«ä»»ä½•å¯¹è±¡ï¼ˆåŒ…æ‹¬ï¼šå‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼Œä»£ç†æœåŠ¡å™¨ï¼Œç­‰ç­‰ï¼‰ç¼“å­˜ï¼Œå³ä½¿æ˜¯é€šå¸¸ä¸å¯ç¼“å­˜çš„å†…å®¹ã€‚ï¼ˆä¾‹å¦‚ï¼š1.è¯¥å“åº”æ²¡æœ‰max-ageæŒ‡ä»¤æˆ–Expiresæ¶ˆæ¯å¤´ï¼›2. è¯¥å“åº”å¯¹åº”çš„è¯·æ±‚æ–¹æ³•æ˜¯ POST ã€‚ï¼‰</li><li>privateï¼šè¡¨æ˜å“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸èƒ½ä½œä¸ºå…±äº«ç¼“å­˜</li><li>must-revalidateï¼šä¸€æ—¦èµ„æºè¿‡æœŸï¼ˆæ¯”å¦‚å·²ç»è¶…è¿‡max-ageï¼‰ï¼Œåœ¨æˆåŠŸå‘åŸå§‹æœåŠ¡å™¨éªŒè¯ä¹‹å‰ï¼Œç¼“å­˜ä¸èƒ½ç”¨è¯¥èµ„æºå“åº”åç»­è¯·æ±‚ã€‚</li><li>max-age&#x3D;0, must-revalidateï¼šåŒno-cache</li></ul><h2 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h2><p>å¦‚æœæœ¬åœ°æ²¡æœ‰ç¼“å­˜å’Œç¼“å­˜å¤±æ•ˆï¼Œåˆ™èµ°åå•†ç¼“å­˜çš„é€»è¾‘ï¼Œåå•†ç¼“å­˜å¿…å®šä¼šå‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ã€‚</p><p>ä¾èµ–å­—æ®µï¼šLast-Modified å’Œ If-Modified-Sinceã€ETag å’Œ If-None-Match ï¼ˆæˆå¯¹å‡ºç°ï¼‰ï¼ŒæœåŠ¡ç«¯å“åº”å­—æ®µä¸å®¢æˆ·ç«¯è¯·æ±‚å­—æ®µç›¸å¯¹åº”</p><h4 id="Last-Modified-å’Œ-If-Modified-Since"><a href="#Last-Modified-å’Œ-If-Modified-Since" class="headerlink" title="Last-Modified å’Œ If-Modified-Since"></a>Last-Modified å’Œ If-Modified-Since</h4><blockquote><p>Last-Modified æœåŠ¡ç«¯å“åº”æ—¶è¿”å›<br>If-Modified-Since å®¢æˆ·ç«¯è¯·æ±‚æ—¶æºå¸¦</p></blockquote><p>æœåŠ¡ç«¯åœ¨å“åº”å¤´ä¸­è¿”å› <code>Last-Modified</code> å­—æ®µæ¥è¡¨ç¤ºèµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ <code>If-Modified-Since</code> å­—æ®µï¼ˆå€¼ä¸ºä¸Šæ¬¡è·å–èµ„æºæ—¶æœåŠ¡å™¨è¿”å› <code>Last-Modified</code>ï¼‰ã€‚æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå°† <code>If-Modified-Since</code> ä¸æœåŠ¡ç«¯èµ„æºæœ€åä¿®æ”¹æ—¶é—´è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœèµ„æºæœªè¢«ä¿®æ”¹ï¼Œå“åº” <code>304 Not Modified</code>ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚å¦åˆ™ï¼Œå“åº” <code>200 OK</code>ï¼Œè¿”å›æœ€æ–°çš„èµ„æºä»¥åŠ<code>Last-Modified</code>ã€‚</p><h4 id="ETag-å’Œ-If-None-Match"><a href="#ETag-å’Œ-If-None-Match" class="headerlink" title="ETag å’Œ If-None-Match"></a>ETag å’Œ If-None-Match</h4><blockquote><p>ETag æœåŠ¡ç«¯å“åº”æ—¶è¿”å›<br>If-None-Match å®¢æˆ·ç«¯è¯·æ±‚æ—¶æºå¸¦</p></blockquote><p>ETagæ˜¯èµ„æºçš„å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥æ˜¯èµ„æºçš„å“ˆå¸Œå€¼ã€ç‰ˆæœ¬å·ç­‰ï¼Œéšç€èµ„æºå†…å®¹ç”Ÿæˆã€‚</p><p>æœåŠ¡ç«¯åœ¨å“åº”å¤´ä¸­è¿”å› <code>ETag</code> å­—æ®µè¡¨ç¤ºèµ„æºçš„å”¯ä¸€æ€§ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²ã€‚å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ <code>If-None-Match</code> å­—æ®µï¼ˆå€¼ä¸ºä¸Šæ¬¡è·å–èµ„æºæ—¶æœåŠ¡ç«¯è¿”å› <code>ETag</code>ï¼‰ã€‚æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå°† <code>If-None-Match</code> ä¸æœåŠ¡ç«¯èµ„æºæœ€æ–°èµ„æºçš„æ ‡è¯†è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœæ ‡è¯†ç¬¦ç›¸åŒï¼Œå“åº” <code>304 Not Modified</code>ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚å¦åˆ™ï¼Œå“åº”<code>200 OK</code>ï¼Œè¿”å›æœ€æ–°çš„èµ„æºä»¥åŠ<code>ETag</code>ã€‚</p><p><img src="https://guozhigq.github.io/img/brower_cache.png" alt="brower cache"></p><h2 id="å¯å‘å¼ç¼“å­˜"><a href="#å¯å‘å¼ç¼“å­˜" class="headerlink" title="å¯å‘å¼ç¼“å­˜"></a>å¯å‘å¼ç¼“å­˜</h2><p>å¯å‘å¼ç¼“å­˜æ˜¯æµè§ˆå™¨è‡ªå·±çš„ä¸€ç§ç¼“å­˜ç­–ç•¥ï¼Œå½“æœåŠ¡ç«¯æ²¡æœ‰è¿”å›ç¼“å­˜æ ‡è¯†ï¼Œæˆ–è€…æ¯æ¬¡è¿”å›ç›¸åŒå€¼çš„ç¼“å­˜æ ‡è¯†æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªå·±è®¡ç®—ç¼“å­˜æœ‰æ•ˆæœŸï¼Œåœ¨è¯¥æœ‰æ•ˆæœŸå†…ï¼Œä½¿ç”¨ç±»ä¼¼å¼ºç¼“å­˜çš„ç¼“å­˜ç­–ç•¥ï¼Œç›´æ¥ä»æœ¬åœ°è¯»å–ç¼“å­˜ã€‚å…·ä½“è®¡ç®—è§„åˆ™ä¸ºï¼š(new Date() - Last-modified-since) * 10%</p><h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><ul><li>å¼ºç¼“å­˜ä¸ä¼šå‘èµ·è¯·æ±‚ï¼›åå•†ç¼“å­˜è‡³å°‘å‘èµ·ä¸€æ¬¡è¯·æ±‚</li><li>ğŸ¯å‘½ä¸­å¼ºç¼“å­˜ï¼ŒHttpçŠ¶æ€ç ä¸º<code>ç°è‰²çš„200</code>ï¼›ğŸ¯å‘½ä¸­åå•†ç¼“å­˜ï¼ŒHttpçŠ¶æ€ç ä¸º<code>304</code></li></ul><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><p>å¾ˆæ˜æ˜¾ï¼Œæµè§ˆå™¨ä¹‹æ‰€ä»¥è®¾ç½®ç¼“å­˜è‚¯å®šæ˜¯æœ‰ä¸€äº›ä½œç”¨çš„ï¼Œé‚£ä¹ˆéƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯å‘¢ï¼Ÿ</p><ul><li>å‡å°‘é¡µé¢åŠ è½½æ—¶é—´<br>å½“æˆ‘ä»¬æ¯æ¬¡è¿›å…¥é¡µé¢æ—¶ï¼Œéƒ½éœ€è¦ä»æœåŠ¡ç«¯è·å–cssæˆ–jsæ–‡ä»¶ï¼Œç„¶åè¿›è¡ŒåŠ è½½ã€æ¸²æŸ“ç­‰ç­‰ä¼šè€—è´¹ä¸€å®šçš„æ—¶é—´ï¼Œå¦‚æœèƒ½å¤ŸæŠŠå…¬å…±éƒ¨åˆ†æˆ–è€…æ²¡æœ‰æ›´æ–°çš„éƒ¨åˆ†ç¼“å­˜åˆ°æœ¬åœ°ï¼Œå°±å¯ä»¥çœå»è¯·æ±‚è€—æ—¶</li><li>èµ„æºé¢„åŠ è½½ï¼šåœ¨è¿›å…¥æŸé¡µé¢æ—¶ï¼Œå¯¹äºä½“ç§¯è¾ƒå¤§çš„ç½‘ç»œèµ„æºæå‰åŠ è½½&amp;ç¼“å­˜</li><li>å¾…è¡¥å……â€¦</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æµè§ˆå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºHTTP</title>
      <link href="/post/843bb9f9.html"/>
      <url>/post/843bb9f9.html</url>
      
        <content type="html"><![CDATA[<p>HTTP åˆç§°è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè‡ªä»1991å¹´å‘å¸ƒåˆå§‹ç‰ˆæœ¬0.9ï¼Œç°å¦‚ä»Šå·²ç»åˆ°äº†HTTP 3.0ã€‚åœ¨è¿™é‡Œåšä¸ªç¬”è®°ï¼Œæ¥è®°å½•ä¸€ä¸‹HTTPçš„å‰ä¸–ä»Šç”Ÿ</p><h3 id="HTTP-0-9-x2F-1-0"><a href="#HTTP-0-9-x2F-1-0" class="headerlink" title="HTTP 0.9&#x2F;1.0"></a>HTTP 0.9&#x2F;1.0</h3><p>HTTP 0.9ä¸æ”¯æŒè¯·æ±‚å¤´ï¼Œåªæ”¯æŒGETæ–¹æ³•ã€‚<br>HTTP 1.0 åœ¨0.9çš„åŸºç¡€äº†ï¼Œå¢åŠ äº†ä¸€äº›å˜åŒ–ï¼š</p><ul><li><p>è¯·æ±‚ä¸­åŠ å…¥çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ <code>HTTP/1.0</code></p></li><li><p>å¢åŠ äº†è¯·æ±‚å¤´&amp;å“åº”å¤´</p></li><li><p>å¢åŠ äº†HTTP Status Code å½“ç„¶ï¼Œä¸šåŠ¡å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½è¿”å›200</p></li><li><p>å¢åŠ äº†<code>Content-Type</code>ï¼Œå¯ä»¥ä¼ è¾“å…¶ä»–æ–‡ä»¶äº†</p></li><li><p>æ–°å¢&lt; code&gt;Expires</code> ç¼“å­˜æœºåˆ¶</p><p>åœ¨HTTP 1.0ç‰ˆæœ¬ä¸­å­˜åœ¨çš„é—®é¢˜</p><ul><li>æ¯å‘èµ·ä¸€ä¸ªè¯·æ±‚éƒ½éœ€è¦æ–°å»ºä¸€ä¸ªTCPé“¾æ¥ï¼Œè€Œæ¯æ¬¡å»ºç«‹TCPé“¾æ¥éƒ½éœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œä¼šäº§ç”Ÿå·¨å¤§å¼€é”€ã€‚</li><li>ä¸²è¡Œè¯·æ±‚ï¼šå¤šä¸ªè¯·æ±‚æ—¶éœ€è¦ç­‰åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚è¿”å›åæ‰èƒ½ç»§ç»­åç»­è¯·æ±‚ï¼Œå¯¼è‡´é¡µé¢&#x2F;æ•°æ®åŠ è½½ç¼“æ…¢ã€‚</li><li>ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚</li></ul><h3 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP 1.1"></a>HTTP 1.1</h3><p>åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼ŒHTTP 1.1ä¸»è¦è§£å†³äº† 1.0 çš„ç½‘ç»œæ€§èƒ½é—®é¢˜ï¼Œå¹¶å¢åŠ äº†ä¸€äº›ç‰¹æ€§ï¼š</p><ul><li>HTTP é•¿é“¾æ¥ï¼š å¢åŠ  <code>Keepalive</code> å®ç°TCPé“¾æ¥é‡ç”¨ï¼Œå‡å°‘TCPä¸‰æ¬¡æ¡æ‰‹çš„å¼€é”€ã€‚</li><li>ç®¡é“ä¼ è¾“ï¼šå¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œé¿å…è¯·æ±‚ç«¯å¯¹å¤´é˜»å¡ï¼Œå‡å°‘æ•´ä½“å“åº”æ—¶é—´ã€‚ï¼ˆå¯¹äºéå¹‚ç­‰çš„POSTè¯·æ±‚æˆ–è€…æœ‰ä¾èµ–çš„è¯·æ±‚ä¸é€‚ç”¨ï¼‰</li><li>æ”¯æŒ <code>Chunked Responses</code> å“åº”æ•°æ®åˆ†å—</li><li>ç¼“å­˜æœºåˆ¶ï¼šå¢åŠ  <code>Cache Control</code> ç¼“å­˜æœºåˆ¶</li><li>è¡¥å……åè®®å¤´å†…å®¹ï¼ŒLanguageã€Encodingã€Typeç­‰ç­‰</li><li>å¢åŠ  <code>HOST</code>ï¼Œå¯ä»¥ç”¨äºæœåŠ¡ç«¯åŒºåˆ†åŸŸåä¿¡æ¯</li><li>å¢åŠ  <code>OPTIONS</code> æ–¹æ³•ï¼Œ</li><li>æ–°å¢äº†TLSåè®®</li></ul><p>åœ¨HTTP 1.1ç‰ˆæœ¬ä¸­å­˜åœ¨çš„é—®é¢˜</p><ul><li>è¯·æ±‚å¹¶è¡Œæ•°é‡é™åˆ¶ï¼Œä¸€èˆ¬é™åˆ¶6ä¸ªã€‚ï¼ˆç²¾çµå›¾çš„ä¼˜åŒ–æ¥æºäºæ­¤ï¼Œå‡å°‘è¯·æ±‚æ•°ï¼Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ï¼‰</li><li>å¤´éƒ¨å†—ä½™ï¼Œæ¯æ¬¡æºå¸¦éƒ½éœ€è¦æºå¸¦é‡å¤çš„å¤´éƒ¨ä¿¡æ¯ã€‚</li><li>é˜Ÿå¤´é˜»å¡ï¼šç”±äºç®¡é“æœºåˆ¶ï¼ŒåŒä¸€ä¸ªTCPè¿æ¥ä¸­çš„å¤šä¸ªè¯·æ±‚ä¸º<strong>ä¸²è¡Œ</strong>ï¼Œå¿…é¡»ç­‰åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚è¿”å›å“åº”æ—¶æ‰å¯ä»¥è¿›è¡Œä¸‹ä¸€ä¸ªã€‚å¦‚æœä¸Šä¸€ä¸ªè¯·æ±‚å› ä¸ºæŸç§åŸå› è¢«é˜»å¡æ—¶ï¼Œåœ¨åé¢æ’é˜Ÿçš„æ‰€æœ‰è¯·æ±‚ä¹Ÿä¸€å¹¶è¢«é˜»å¡ï¼Œå¯¼è‡´å¸¦å®½æ— æ³•è¢«å……åˆ†åˆ©ç”¨</li><li>æ˜æ–‡ä¼ è¾“ï¼Œä¸»è¦ä»¥æ–‡æœ¬æ ¼å¼ä¼ è¾“æ•°æ®ï¼Œä¼ è¾“æˆæœ¬è¾ƒå¤§ã€‚</li></ul><p>é˜Ÿå¤´é˜»å¡çš„è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>åŸŸååˆ†ç‰‡ï¼šå°†åŒä¸€ä¸ªé¡µé¢çš„èµ„æºåˆ†æ•£åˆ°ä¸åŒåŸŸåï¼Œæå‡å¹¶å‘è¿æ¥ä¸Šé™ï¼Œå› ä¸ºæµè§ˆå™¨é€šå¸¸å¯¹åŒä¸€åŸŸåçš„ HTTP è¿æ¥æœ€å¤§åªèƒ½æ˜¯ 6 ä¸ª</li><li>é›ªç¢§å›¾ï¼šå°†å¤šä¸ªå°å›¾åˆå¹¶ï¼Œå‡å°‘è¯·æ±‚æ•°</li><li>å°å›¾ä½¿ç”¨base64å†…è”å®ç°</li></ul></li></ul><h3 id="HTTP-2-0"><a href="#HTTP-2-0" class="headerlink" title="HTTP 2.0"></a>HTTP 2.0</h3><p>åŒæ ·çš„ï¼ŒHTTP2.0ä¹Ÿè§£å†³äº†1.1çš„ä¸€äº›é—®é¢˜ï¼š</p><h4 id="å¹¶å‘è¯·æ±‚ï¼š"><a href="#å¹¶å‘è¯·æ±‚ï¼š" class="headerlink" title="å¹¶å‘è¯·æ±‚ï¼š"></a>å¹¶å‘è¯·æ±‚ï¼š</h4><p>æˆ‘ä»¬éƒ½çŸ¥é“ HTTP&#x2F;1.1 çš„å®ç°æ˜¯åŸºäºè¯·æ±‚-å“åº”æ¨¡å‹çš„ã€‚åŒä¸€ä¸ªè¿æ¥ä¸­ï¼ŒHTTP å®Œæˆä¸€ä¸ªäº‹åŠ¡ï¼ˆè¯·æ±‚ä¸å“åº”ï¼‰ï¼Œæ‰èƒ½å¤„ç†ä¸‹ä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å‘å‡ºè¯·æ±‚ç­‰å¾…å“åº”çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯æ²¡åŠæ³•åšå…¶ä»–äº‹æƒ…çš„ï¼Œå¦‚æœå“åº”è¿Ÿè¿Ÿä¸æ¥ï¼Œé‚£ä¹ˆåç»­çš„è¯·æ±‚æ˜¯æ— æ³•å‘é€çš„ï¼Œä¹Ÿé€ æˆäº†é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚<br>è€Œåœ¨HTTP&#x2F;2ä¸­ï¼Œé€šè¿‡æµçš„æ¦‚å¿µï¼Œå¤šä¸ªæµå¤ç”¨åŒä¸€ä¸ªTCPè¿æ¥ï¼Œè¾¾åˆ°å¹¶å‘æ•ˆæœï¼Œæé«˜äº†HTTPä¼ è¾“çš„ååé‡ã€‚å…¶å®ä¹Ÿå°±æ˜¯<strong>å¤šè·¯å¤ç”¨</strong>çš„æ¦‚å¿µ</p><h4 id="å¤šè·¯å¤ç”¨ï¼š"><a href="#å¤šè·¯å¤ç”¨ï¼š" class="headerlink" title="å¤šè·¯å¤ç”¨ï¼š"></a>å¤šè·¯å¤ç”¨ï¼š</h4><p>ä¸€ä¸ªTCPè¿æ¥ä¸­å­˜åœ¨å¤šä¸ªæµï¼ŒåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå¯¹ç«¯å¯ä»¥é€šè¿‡å¸§ä¸­çš„è¡¨ç¤ºçŸ¥é“è¯¥å¸§å±äºå“ªä¸ªè¯·æ±‚ã€‚åœ¨å®¢æˆ·ç«¯ï¼Œè¿™äº›å¸§ä¹±åºå‘é€ï¼Œåˆ°å¯¹ç«¯åå†æ ¹æ®æ¯ä¸ªå¸§é¦–éƒ¨çš„æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…</p><h4 id="å¤´éƒ¨å‹ç¼©"><a href="#å¤´éƒ¨å‹ç¼©" class="headerlink" title="å¤´éƒ¨å‹ç¼©"></a>å¤´éƒ¨å‹ç¼©</h4><p>Httpåè®®æŠ¥æ–‡ä¸€èˆ¬ç”±ã€ŒHeader + Bodyã€æ„æˆï¼Œå¯¹äºbodyéƒ¨åˆ†ï¼ŒHTTP&#x2F;1.1ä½¿ç”¨äº†ã€Œcontent-Encodingã€å¯¹Bodyè¿›è¡Œäº†å‹ç¼©ï¼Œæ¯”å¦‚gzipå‹ç¼©ï¼Œè¿™æ ·å¯ä»¥èŠ‚çº¦å¸¦å®½ï¼Œä½†å¯¹äºHeaderï¼Œå´æ²¡æœ‰é’ˆå¯¹å®ƒçš„ä¼˜åŒ–æ‰‹æ®µã€‚<br>åœ¨HTTP&#x2F;1.1ä¸­Headeréƒ¨åˆ†å­˜åœ¨çš„é—®é¢˜ï¼š</p><ul><li>å«æœ‰å¾ˆå¤šå›ºå®šå­—æ®µï¼Œæ¯”å¦‚Cookieã€User Agentã€Acceptç­‰ï¼Œ</li><li>è¯·æ±‚è·Ÿå“åº”çš„æŠ¥æ–‡ä¸­ï¼Œå¤§é‡å­—æ®µæ˜¯é‡å¤çš„ï¼Œæ¯æ¬¡è¯·æ±‚ä½¿å¾—ä¸å¿…è¦çš„å¸¦å®½è¢«æµªè´¹</li><li>å­—æ®µæ˜¯ASCIIç¼–ç çš„ï¼Œè™½ç„¶åˆ©äºè§‚å¯Ÿï¼Œä½†æ˜¯æ•ˆç‡ä½</li></ul><p>äºæ˜¯HTTP&#x2F;2.0å¯¹äºHeaderéƒ¨åˆ†åšäº†ä¸€äº›ä¼˜åŒ–ï¼šä½¿ç”¨HPACKç®—æ³•å¯¹Header è¿›è¡Œå‹ç¼©ï¼Œä¸»è¦åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š</p><ul><li>é™æ€å­—å…¸</li><li>åŠ¨æ€å­—å…¸</li><li>Huffmanç¼–ç ï¼ˆå‹ç¼©ç®—æ³•ï¼‰</li></ul><p>é™æ€è¡¨<br>  HTTP&#x2F;2ä¸ºé«˜é¢‘å‡ºç°åœ¨å¤´éƒ¨çš„å­—ç¬¦ä¸²è·Ÿå­—æ®µå»ºç«‹äº†ä¸€å¼ é™æ€è¡¨ï¼Œé™æ€è¡¨ä¸­å…±æœ‰61ç»„ï¼Œè¡¨å¤´åˆ†åˆ«ä¸º<ccde>Index</code>ã€<code>Header Name</code>ã€<code>Header Value</code>ï¼Œå…¶ä¸­<code>Index</code>è¡¨ç¤ºç´¢å¼•ï¼Œ<code>Header Name</code>è¡¨ç¤ºå­—æ®µåç§°ï¼Œ<code>Header Value</code>è¡¨ç¤ºå­—æ®µçš„å€¼ã€‚<br>åŠ¨æ€è¡¨<br>  å¯¹äºé™æ€è¡¨ä¹‹å¤–çš„å¤´éƒ¨å­—ç¬¦ä¸²ï¼Œå°±éœ€è¦å»ºç«‹åŠ¨æ€è¡¨äº†ï¼Œç´¢å¼•ä»62å¼€å§‹ã€‚<br>  æ¯”å¦‚ï¼Œç¬¬ä¸€æ¬¡å‘é€æ—¶å¤´éƒ¨ä¸­çš„<code>ã€Œuser-agent ã€</code>å­—æ®µæ•°æ®æœ‰ä¸Šç™¾ä¸ªå­—èŠ‚ï¼Œç»è¿‡ <code>Huffman</code> ç¼–ç å‘é€å‡ºå»åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ–¹éƒ½ä¼šæ›´æ–°è‡ªå·±çš„åŠ¨æ€è¡¨ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„ <code>Index</code> å· <strong>62</strong>ã€‚é‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡å‘é€çš„æ—¶å€™ï¼Œå°±ä¸ç”¨é‡å¤å‘è¿™ä¸ªå­—æ®µçš„æ•°æ®äº†ï¼Œåªç”¨å‘ 1 ä¸ªå­—èŠ‚çš„ <strong>62</strong> å·å°±å¥½äº†ï¼Œå› ä¸ºåŒæ–¹éƒ½å¯ä»¥æ ¹æ®è‡ªå·±çš„åŠ¨æ€è¡¨è·å–åˆ°å­—æ®µçš„æ•°æ®ã€‚<br>  æ‰€ä»¥ï¼Œä½¿å¾—åŠ¨æ€è¡¨ç”Ÿæ•ˆæœ‰ä¸€ä¸ªå‰æï¼š<strong>å¿…é¡»åŒä¸€ä¸ªè¿æ¥ä¸Šï¼Œé‡å¤ä¼ è¾“å®Œå…¨ç›¸åŒçš„ HTTP å¤´éƒ¨</strong>ã€‚å¦‚æœæ¶ˆæ¯å­—æ®µåœ¨ 1 ä¸ªè¿æ¥ä¸Šåªå‘é€äº† 1 æ¬¡ï¼Œæˆ–è€…é‡å¤ä¼ è¾“æ—¶ï¼Œå­—æ®µæ€»æ˜¯ç•¥æœ‰å˜åŒ–ï¼ŒåŠ¨æ€è¡¨å°±æ— æ³•è¢«å……åˆ†åˆ©ç”¨äº†ã€‚</p><h4 id="äºŒè¿›åˆ¶å¸§"><a href="#äºŒè¿›åˆ¶å¸§" class="headerlink" title="äºŒè¿›åˆ¶å¸§"></a>äºŒè¿›åˆ¶å¸§</h4><p>HTTP&#x2F;2 å‰å®³çš„åœ°æ–¹åœ¨äºå°† HTTP&#x2F;1 çš„æ–‡æœ¬æ ¼å¼æ”¹æˆäºŒè¿›åˆ¶æ ¼å¼ä¼ è¾“æ•°æ®ï¼Œæå¤§æé«˜äº† HTTP ä¼ è¾“æ•ˆç‡ï¼Œè€Œä¸”äºŒè¿›åˆ¶æ•°æ®ä½¿ç”¨ä½è¿ç®—èƒ½é«˜æ•ˆè§£æ</p><p>HTTP&#x2F;2å°†å“åº”æŠ¥æ–‡åˆ’åˆ†æˆä¸¤ä¸ªå¸§ï¼Œ<strong>å¤´éƒ¨å¸§</strong>è·Ÿ<strong>æ•°æ®å¸§</strong>ï¼Œå¹¶åˆ†åˆ«é‡‡ç”¨äº†äºŒè¿›åˆ¶æ¥è¿›è¡Œç¼–ç ã€‚<br>åœ¨å¤´éƒ¨å¸§ä¸­ï¼Œä¸»è¦åŒ…å«äº†å¸§é•¿åº¦ï¼Œå¸§ç±»å‹ï¼Œæ ‡å¿—ä½åŠæµidï¼Œå…¶ä¸­é€šè¿‡æ ‡å¿—ä½å¯ä»¥è®¾ç½®æµçš„ä¼˜å…ˆçº§ï¼Œæµidç”¨äºåŒºåˆ†æµï¼Œæ¥æ”¶æ–¹å¯ä»¥æ ¹æ®è¿™ä¸ªä¿¡æ¯ä»ä¹±åºçš„å¸§é‡Œæ‰¾åˆ°ç›¸åŒ id çš„å¸§ï¼Œç„¶åæŒ‰ç…§é¡ºåºç»„è£…æ•°æ®ã€‚</p><h4 id="æœåŠ¡ç«¯æ¨é€ï¼ˆserver-pushï¼‰"><a href="#æœåŠ¡ç«¯æ¨é€ï¼ˆserver-pushï¼‰" class="headerlink" title="æœåŠ¡ç«¯æ¨é€ï¼ˆserver pushï¼‰"></a>æœåŠ¡ç«¯æ¨é€ï¼ˆserver pushï¼‰</h4><p>æœåŠ¡ç«¯ä¸»åŠ¨æ¨é€æ•°æ®è‡³å®¢æˆ·ç«¯ã€‚  <strong>æ³¨ï¼šChrome 106 å’Œä¹‹åçš„ç‰ˆæœ¬å·²é»˜è®¤ç¦ç”¨ HTTP&#x2F;2 Server Pushç‰¹æ€§ï¼Œæ”¹ç”¨103 Early Hints</strong></p><p>åœ¨HTTP 2.0ä¸­å­˜åœ¨çš„é—®é¢˜</p><ul><li>é˜Ÿå¤´é˜»å¡ï¼šHTTP&#x2F;2 æ˜¯åŸºäº TCP åè®®æ¥ä¼ è¾“æ•°æ®çš„ï¼ŒTCP æ˜¯å­—èŠ‚æµåè®®ï¼ŒTCP å±‚å¿…é¡»ä¿è¯æ”¶åˆ°çš„å­—èŠ‚æ•°æ®æ˜¯å®Œæ•´ä¸”è¿ç»­çš„ï¼Œè¿™æ ·å†…æ ¸æ‰ä¼šå°†ç¼“å†²åŒºé‡Œçš„æ•°æ®è¿”å›ç»™ HTTP åº”ç”¨ï¼Œé‚£ä¹ˆå½“ã€Œå‰ 1 ä¸ªå­—èŠ‚æ•°æ®ã€æ²¡æœ‰åˆ°è¾¾æ—¶ï¼Œåæ”¶åˆ°çš„å­—èŠ‚æ•°æ®åªèƒ½å­˜æ”¾åœ¨å†…æ ¸ç¼“å†²åŒºé‡Œï¼Œåªæœ‰ç­‰åˆ°è¿™ 1 ä¸ªå­—èŠ‚æ•°æ®åˆ°è¾¾æ—¶ï¼ŒHTTP&#x2F;2 åº”ç”¨å±‚æ‰èƒ½ä»å†…æ ¸ä¸­æ‹¿åˆ°æ•°æ®ï¼Œè¿™å°±æ˜¯ HTTP&#x2F;2 é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚</li><li>å»ºç«‹é“¾æ¥æ—¶éœ€è¦å…ˆè¿›è¡ŒTCPä¸‰æ¬¡æ¡æ‰‹ã€å†TLSå››æ¬¡æ¡æ‰‹ï¼ˆhttpsï¼‰</li></ul><h3 id="HTTP-3-0"><a href="#HTTP-3-0" class="headerlink" title="HTTP 3.0"></a>HTTP 3.0</h3><p>HTTP3.0ä½¿ç”¨äº†åŸºäºUDPçš„QUICåè®®</p><ul><li>æ²¡æœ‰äº†TCPçš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¹¶ä¸”TLSç‰ˆæœ¬å‡çº§ä¸º1.3ï¼Œå…è®¸å®¢æˆ·ç«¯æ— éœ€ç­‰å¾…TLSæ¡æ‰‹å®Œæˆå°±å¼€å§‹å‘é€æ•°æ®ï¼Œå®ç°å¿«é€Ÿå»ºç«‹è¿æ¥ï¼ŒQUICå†…åŒ…æ‹¬TLSï¼Œå¯ä»¥å‡å°‘æ¡æ‰‹æ—¶é—´ï¼Œé¦–æ¬¡è¿æ¥åªéœ€1ä¸ªRTTï¼Œç¬¬äºŒæ¬¡è¿æ¥çš„æ—¶å€™æ•°æ®åŒ…è·ŸQUICæ¡æ‰‹ä¿¡æ¯ä¸€èµ·ä¼ é€’ï¼Œè¾¾åˆ° 0 RTTçš„æ•ˆæœ</li><li>æ— é˜Ÿå¤´é˜»å¡ï¼Œå½“æŸä¸ªæµçš„å‘ç”Ÿäº†ä¸¢åŒ…ï¼Œä¸ä¼šå½±å“å…¶ä»–æµ</li><li>é€šè¿‡è¿æ¥IDæ¥ç¡®å®šèº«ä»½ï¼Œå½“ç½‘ç»œç¯å¢ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå³ä½¿ipå‘ç”Ÿäº†å˜åŒ–ï¼Œåªè¦ä¸Šä¸‹æ–‡ä¿¡æ¯ä»ç„¶æœ‰æ•ˆï¼Œå°±å¯ä»¥æ— ç¼ä½¿ç”¨ä¸Šæ¬¡çš„è¿æ¥ï¼Œæ¶ˆé™¤é‡è¿çš„æˆæœ¬ã€‚</li><li>HTTP3ä¸éœ€è¦åœ¨äºŒè¿›åˆ¶ä¸­å®šä¹‰æµï¼Œå› ä¸ºQUICåè®®è‡ªå¸¦äº†æµï¼Œæ‰€ä»¥HTTP3çš„å¸§ç»“æ„è¾ƒä¸ºç®€å•ï¼Œå¤´éƒ¨å¸§çš„å­—æ®µä¸­åŒ…å«äº†é•¿åº¦è·Ÿç±»å‹</li><li>å‹ç¼©ç®—æ³•ä¼˜åŒ–ï¼Œä½¿ç”¨äº†QPACKç®—æ³•ï¼Œä¸åŒäºHTTP2çš„HPAKCKç®—æ³•ï¼Œé™æ€è¡¨åˆHTTP2çš„61æ‰©å±•åˆ°91ä¸ªï¼Œä½¿ç”¨ä¸¤ä¸ªå•å‘æµæ¥åŒæ­¥åŒæ–¹çš„åŠ¨æ€è¡¨</li></ul><h3 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h3><p>å…³é”®è¯ï¼š SYNã€synã€Seqã€ACKã€ack</p><p>å‡è®¾æˆ‘ä»¬æœ‰å®¢æˆ·ç«¯Aä¸æœåŠ¡ç«¯B<br>åœ¨è¿›è¡ŒHTTPè¯·æ±‚æ—¶ï¼ŒTCPéœ€è¦å»ºç«‹è¿æ¥ï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼š</p><ol><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼ŒAå‘æœåŠ¡ç«¯å‘ç«¯æŠ¥æ–‡ SYN&#x3D;1ï¼ŒSeq&#x3D;16ä½éšæœºæ•°ï¼Œç”±Bæ¥æ”¶åˆ°Aè¦å»ºç«‹è¿æ¥çš„æ¶ˆæ¯ã€‚å…¶ä¸­SYN&#x3D;1è¡¨ç¤ºå‘æœåŠ¡ç«¯ç¡®è®¤ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒBæ”¶åˆ°Açš„æ¶ˆæ¯åï¼Œä½œå‡ºå›åº”ï¼Œå‘Aå‘é€ack number &#x3D; seq + 1ï¼Œsyn&#x3D;1ï¼Œack&#x3D;1ï¼Œä»¥åŠç”Ÿæˆçš„seqï¼Œè¡¨ç¤ºç¡®è®¤è”æœºã€‚</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼ŒAæ”¶åˆ°Bçš„æ¶ˆæ¯ã€‚é€šè¿‡ <code>ack number</code> åˆ¤æ–­æ¥æºæ­£ç¡®ï¼Œé€šè¿‡ <code>ack=1</code> å¾—çŸ¥Bçš„ç¡®è®¤è”æœºæ¶ˆæ¯ï¼Œç»§ç»­å‘Bå‘é€ <code>ack number = seq + 1</code>ï¼Œack&#x3D;1ï¼ŒBé€šè¿‡åŒæ ·çš„å¯¹æ¯”å¾—çŸ¥Açš„ç¡®è®¤æ¶ˆæ¯ï¼Œè¿æ¥å»ºç«‹æˆåŠŸã€‚</li></ol><p>å¯ä»¥çœ‹å‡ºä¸»è¦æ˜¯é€šè¿‡å…³é”®å­—åŠå€¼çš„åˆ¤æ–­æ¥ç¡®å®šåŒæ–¹ä¿¡æ¯åŠæ¥æ”¶èƒ½åŠ›ã€‚</p><h3 id="ä¸ºä»€ä¹ˆä¸‰æ¬¡"><a href="#ä¸ºä»€ä¹ˆä¸‰æ¬¡" class="headerlink" title="ä¸ºä»€ä¹ˆä¸‰æ¬¡"></a>ä¸ºä»€ä¹ˆä¸‰æ¬¡</h3><ol><li>ç¡®è®¤åŒæ–¹æ”¶å‘æ¶ˆæ¯çš„åŠŸèƒ½éƒ½æ­£å¸¸</li><li>å»ºç«‹å¤šæ¬¡è¿æ¥æ—¶ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¿æ¥çš„æ¡æ‰‹ä¸¢å¤±&#x2F;å»¶è¿Ÿï¼Œåç»­Bå†æ”¶åˆ°æ—¶ï¼Œä»¥ä¸ºè¦å»ºç«‹æ–°çš„è¿æ¥ï¼Œå¯¼è‡´Bä¸€ç›´åœ¨ç­‰å¾…Açš„å“åº”ã€‚<blockquote><p>DDOSæ”»å‡»<br>é€šè¿‡é¢‘ç¹çš„GETè¯·æ±‚å‘æœåŠ¡ç«¯å‘èµ·å»ºç«‹è¿æ¥çš„ä¿¡æ¯ï¼Œæ¶æ„æ¶ˆè€—æœåŠ¡å™¨æ€§èƒ½</p></blockquote></li></ol><blockquote><p>æ…¢é€Ÿæ”»å‡»<br>åˆ©ç”¨HTTP Keepaliveç‰¹æ€§ï¼Œè¦æ±‚WebServerä¿æŒTVCPè¿æ¥ä¸æ–­å¼€ï¼Œé€šè¿‡é˜¶æ®µè¡Œçš„è¯·æ±‚ä½¿çš„TCPè¢«å æ»¡è€Œæ— æ³•æ¥æ”¶æ–°çš„è¯·æ±‚</p></blockquote><h3 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h3><p>åŒæ ·çš„ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å®¢æˆ·ç«¯Aä¸æœåŠ¡ç«¯B<br>åœ¨è¿›è¡ŒHTTPè¯·æ±‚å®Œæˆä¹‹åï¼ŒTCPéœ€è¦æ–­å¼€è¿æ¥ï¼Œåˆ†ä¸ºå››æ­¥ï¼š</p><ol><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼ŒAå‘Bå‘é€è¯·æ±‚ï¼ŒFIN&#x3D;1ï¼ŒSeqï¼Œå‘ŠçŸ¥Bè¦æ–­å¼€è¿æ¥äº†</li><li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼ŒBæ”¶åˆ°Açš„è¯·æ±‚ï¼Œå›åº”ACK&#x3D;1ï¼Œackï¼Œå‘ŠçŸ¥Aå·²ç»æ”¶åˆ°æ–­å¼€è¯·æ±‚</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼ŒBç­‰å¾…æ‰€ä»¥çš„è¯·æ±‚å¤„ç†å®Œï¼Œå‘èµ·ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼ŒFIN-1ï¼ŒSeqéšæœºæ•°ï¼Œå‘ŠçŸ¥Aå‡†å¤‡æ–­å¼€è¿æ¥</li><li>Aæ”¶åˆ°Bæ–­å¼€è¿æ¥çš„è¯·æ±‚ï¼Œå‘Bè¡¨ç¤ºç¡®è®¤ï¼ŒACK&#x3D;1,Seq&#x3D;éšæœºæ•°ï¼Œå‘Šè¯‰Bæ”¶åˆ°è¯·æ±‚ï¼Œè‡³æ­¤æ–­å¼€è¿æ¥</li></ol>]]></content>
      
      
      <categories>
          
          <category> åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•å®ç°ä¸€ä¸ªPromise</title>
      <link href="/post/a92be253.html"/>
      <url>/post/a92be253.html</url>
      
        <content type="html"><![CDATA[<p>ç®€å•å®ç°ä¸€ä¸ªPromise A+ è§„èŒƒçš„Promise</p><p>é¦–å…ˆï¼Œäº†è§£ä¸€ä¸‹Promiseçš„åŸºæœ¬ç”¨æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>() &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;æˆåŠŸå›è°ƒ&#x27;</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="string">&#x27;å¤±è´¥å›è°ƒ&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆåŠŸå›è°ƒ&#x27;</span>)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¤±è´¥å›è°ƒ&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°ç”¨æ³•ï¼Œå¯ä»¥çœ‹å‡ºæ¥Promise æ¥å—ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¸¦æœ‰ä¸¤ä¸ªå‚æ•°</p><ul><li>resolveï¼šæŠŠ Promise çŠ¶æ€æ”¹æˆæˆåŠŸ</li><li>rejectï¼šæŠŠ Promise çŠ¶æ€æ”¹æˆå¤±è´¥</li></ul><p>promiseçš„çŠ¶æ€æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>pending é»˜è®¤çŠ¶æ€</li><li>fulfilled æˆåŠŸï¼Œè¿”å›æˆåŠŸå€¼</li><li>rejected å¤±è´¥ï¼Œè¿”å›å¤±è´¥å€¼</li></ul><p>promiseçš„çŠ¶æ€æ˜¯å•å‘æµåŠ¨çš„ï¼Œä¸”ä¸€æ—¦æˆåŠŸå’Œå¤±è´¥ï¼ŒçŠ¶æ€ä¸å¯æ”¹å˜</p><p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥ç®€å•å®ç°ä¸€ä¸‹åŸºæœ¬ç‰¹æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">STATUS</span> = &#123;</span><br><span class="line">    <span class="attr">PENDING</span>: <span class="string">&#x27;pending&#x27;</span>,</span><br><span class="line">    <span class="attr">FULFILLED</span>: <span class="string">&#x27;fulfilled&#x27;</span>,</span><br><span class="line">    <span class="attr">REJECTED</span>: <span class="string">&#x27;rejected&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">    <span class="title function_">construtor</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">        <span class="comment">// æ‰§è¡Œå™¨</span></span><br><span class="line">        <span class="title function_">executor</span>(<span class="variable language_">this</span>.<span class="property">resolve</span>, <span class="variable language_">this</span>.<span class="property">reject</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹çŠ¶æ€</span></span><br><span class="line">    status = <span class="variable constant_">STATUS</span>.<span class="property">PENDING</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æˆåŠŸç»“æœ</span></span><br><span class="line">    value = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤±è´¥ç»“æœ</span></span><br><span class="line">    reason = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æˆåŠŸ</span></span><br><span class="line">    resolve = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å•å‘çŠ¶æ€å˜æ›´</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span> == <span class="variable constant_">STATUS</span>.<span class="property">PENDING</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">status</span> = <span class="variable constant_">STATUS</span>.<span class="property">fulfilled</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">value</span> = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤±è´¥</span></span><br><span class="line">    reject = <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å•å‘çŠ¶æ€å˜æ›´</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span> == <span class="variable constant_">STATUS</span>.<span class="property">PENDING</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">status</span> = <span class="variable constant_">STATUS</span>.<span class="property">REJECTED</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">reason</span> = reason;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ï¼ŒPromise.then è¿˜åˆ†åˆ«æ¥æ”¶ä¸¤ä¸ªå›è°ƒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(onFulfilled, onRejected);</span><br></pre></td></tr></table></figure><p><strong>å…¶ä¸­</strong><br><code>onFulfilled</code> è¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>å¿…é¡»åœ¨ promise çŠ¶æ€ä¸ºå®Œæˆæ—¶è°ƒç”¨å®ƒï¼Œå¹¶å°† promise çš„ value ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°</li><li>åœ¨ promise å®Œæˆä¹‹å‰ä¸èƒ½è°ƒç”¨å®ƒ</li><li>å®ƒä¸èƒ½è¢«å¤šæ¬¡è°ƒç”¨</li></ul><p><code>onRejected</code> è¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>å¿…é¡»åœ¨ promise è¢«æ‹’ç»åè°ƒç”¨å®ƒï¼Œä»¥ promise.reason ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°</li><li>åœ¨ promise è¢«æ‹’ç»ä¹‹å‰ä¸èƒ½è°ƒç”¨å®ƒ</li><li>å®ƒä¸èƒ½è¢«å¤šæ¬¡è°ƒç”¨</li></ul><p>äºæ˜¯æˆ‘ä»¬ç»§ç»­è¡¥å…… MyPromise</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">then</span>(<span class="params">onFulfilled, onRejected</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span> == <span class="variable constant_">STATUS</span>.<span class="property">FULFILLED</span>)&#123;</span><br><span class="line">            <span class="comment">//  ç¡®ä¿å½“å‰æ˜¯ FULFILLED çŠ¶æ€</span></span><br><span class="line">            <span class="title function_">onFulfilled</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span> == <span class="variable constant_">STATUS</span>.<span class="property">REJECTED</span>)&#123;</span><br><span class="line">            <span class="comment">//  ç¡®ä¿å½“å‰æ˜¯ REJECTED çŠ¶æ€</span></span><br><span class="line">            <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">reason</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ ä¸€ä¸ªç®€å•çš„ <code>MyPromise</code> å°±å®Œæˆäº†<br>å®éªŒä¸€ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mypromise = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&#x27;æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">mypromise.<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data, <span class="string">&#x27;è¯·æ±‚æˆåŠŸ&#x27;</span>) <span class="comment">// æˆåŠŸæ‰“å°â€œæˆåŠŸ è¯·æ±‚æˆåŠŸâ€</span></span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err, <span class="string">&#x27;è¯·æ±‚å¤±è´¥&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆåŠŸäº†</p><p>æ¥ç€ï¼Œæ ¹æ® <code>Promise A+</code> è§„èŒƒç»§ç»­å®Œå–„ <code>MyPromise.then</code> </p><blockquote><p>2.2.1 Both onFulfilled and onRejected are optional arguments:<br>  2.2.1.1 If onFulfilled is not a function, it must be ignored.<br>  2.2.1.2 If onRejected is not a function, it must be ignored.</p></blockquote><p>ç®€å•è¯´ï¼Œå°±æ˜¯ <code>Promise.then</code>  æ¥å—çš„ <code>onFulfilled</code> ã€<code>onRejected</code> æ˜¯å¯é€‰çš„ã€‚å¦‚æœ <code>onFulfilled</code> ä¸æ˜¯å‡½æ•°ï¼Œä»–å¿…é¡»è¢«å¿½ç•¥ã€‚å¦‚æœ <code>onRejected</code> ä¸æ˜¯å‡½æ•°ï¼Œä¹Ÿå¿…é¡»è¢«å¿½ç•¥ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬åœ¨è¿™é‡ŒåŠ ä¸ªåˆ¤æ–­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">then</span>(<span class="params">onFulfilled, onRejected</span>)&#123;</span><br><span class="line"></span><br><span class="line">        onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">&#x27;function&#x27;</span> ? onFulfilled : <span class="function"><span class="params">value</span> =&gt;</span> value</span><br><span class="line"></span><br><span class="line">        onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">&#x27;function&#x27;</span> ? onRejected : <span class="function"><span class="params">error</span> =&gt;</span> &#123; <span class="keyword">throw</span> error &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>then å¯ä»¥åœ¨åŒä¸€ä¸ªæ‰¿è¯ºä¸Šå¤šæ¬¡è°ƒç”¨</p><ul><li>å½“ promise å®Œæˆï¼Œæ‰€æœ‰ç›¸åº”çš„ onFulfilled å›è°ƒå¿…é¡»æŒ‰ç…§å®ƒä»¬çš„åŸå§‹è°ƒç”¨çš„é¡ºåºæ‰§è¡Œ then</li><li>å½“ promise è¢«æ‹’ç»ï¼Œæ‰€æœ‰ç›¸åº”çš„ onRejected å›è°ƒå¿…é¡»æŒ‰ç…§å®ƒä»¬å¯¹ çš„åŸå§‹è°ƒç”¨çš„é¡ºåºæ‰§è¡Œ then</li></ul><p>å¯ä»¥ç†è§£ä¸ºå°† onFulfilledã€onRejected ä½œä¸ºæ•°ç»„å­˜å‚¨åœ¨ MyPromise ä¸­ï¼Œç„¶åæŒ‰ç…§é¡ºåºæ‰§è¡Œ</p><p>å¦‚ä¸‹å›¾ï¼Œæ–°å¢äº†æˆåŠŸå›è°ƒè·Ÿå¤±è´¥å›è°ƒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">  <span class="comment">// æˆåŠŸå›è°ƒ</span></span><br><span class="line">  onFulfilledCallback = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤±è´¥å›è°ƒ</span></span><br><span class="line">  onRejectedCallback = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¿®æ”¹ Promise çŠ¶æ€ï¼Œå¹¶å®šä¹‰æˆåŠŸè¿”å›å€¼</span></span><br><span class="line">  resolve = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">PENDING</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">status</span> = <span class="variable constant_">STATUS</span>.<span class="property">FULFILLED</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span> = value</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(<span class="variable language_">this</span>.<span class="property">onFulfilledCallback</span>.<span class="property">length</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">onFulfilledCallback</span>.<span class="title function_">shift</span>()(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¿®æ”¹ Promise çŠ¶æ€ï¼Œå¹¶å®šä¹‰å¤±è´¥è¿”å›å€¼</span></span><br><span class="line">    reject = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">PENDING</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">status</span> = <span class="variable constant_">STATUS</span>.<span class="property">REJECTED</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">reason</span> = value</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(<span class="variable language_">this</span>.<span class="property">onRejectedCallback</span>.<span class="property">length</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">onRejectedCallback</span>.<span class="title function_">shift</span>()(value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    then = <span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) &#123;</span><br><span class="line">        onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">&#x27;function&#x27;</span> ? onFulfilled : <span class="function"><span class="params">value</span> =&gt;</span> value</span><br><span class="line">        onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">&#x27;function&#x27;</span> ? onRejected : <span class="function"><span class="params">reason</span> =&gt;</span> &#123; <span class="keyword">throw</span> reason &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">PENDING</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">onFulfilledCallback</span>.<span class="title function_">push</span>(onFulfilled)</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">onRejectedCallback</span>.<span class="title function_">push</span>(onRejected)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">FULFILLED</span>) &#123;</span><br><span class="line">            <span class="title function_">onFulfilled</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">REJECTED</span>) &#123;</span><br><span class="line">            <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">reason</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>then å¿…é¡»è¿”å›ä¸€ä¸ª Promise æ¥æ”¯æŒé“¾å¼è°ƒç”¨ Promise</p><ul><li>then æ–¹æ³•éœ€è¦è¿”å› MyPromise å®ä¾‹</li><li>then å†…éƒ¨è°ƒç”¨å›è°ƒæ—¶ï¼Œéœ€é€šè¿‡ resolvePromise æ–¹æ³•åˆ¤æ–­è¿”å›å€¼ x çš„ç±»å‹æ¥å¤„ç†è¿”å›å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">    then = <span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) &#123;</span><br><span class="line">        <span class="comment">// è¿”å› MyPromise å®ä¾‹</span></span><br><span class="line">      <span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">PENDING</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> value = <span class="title function_">onFulfilled</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">onFulfilledCallback</span>.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolvePromise</span>(promise2, value, resolve, reject)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> reason = <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">onRejectedCallback</span>.<span class="title function_">push</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolvePromise</span>(promise2, reason, resolve, reject)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">FULFILLED</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> value = <span class="title function_">onFulfilled</span>(<span class="variable language_">this</span>.<span class="property">value</span>)</span><br><span class="line">            <span class="title function_">resolvePromise</span>(promise2, value, resolve, reject)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> === <span class="variable constant_">STATUS</span>.<span class="property">REJECTED</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> error = <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">error</span>)</span><br><span class="line">            <span class="title function_">resolvePromise</span>(promise2, error, resolve, reject)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;) </span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> promise2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å¼•ç”¨äº† resolvePromise æ¥å¤„ç† Promise.then çš„è¿”å›å€¼</p><ul><li>å¦‚æœ promise2 &#x3D;&#x3D;&#x3D; xï¼Œ æ‰§è¡Œ rejectï¼Œé”™è¯¯åŸå› ä¸º TypeError</li><li>å¦‚æœ x æ˜¯å‡½æ•°æˆ–å¯¹è±¡<ul><li>å¦‚æœ x.then æ˜¯å‡½æ•°<ul><li>æ‰§è¡Œ x.then</li></ul></li><li>å¦‚æœ x.then ä¸æ˜¯å‡½æ•°<ul><li>æ‰§è¡Œ resolve(x)</li></ul></li></ul></li><li>å¦‚æœ x ä¸æ˜¯å‡½æ•°æˆ–å¯¹è±¡<ul><li>æ‰§è¡Œ resolve(x)</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">resolvePromise</span> (promise2, x, resolve, reject) &#123;</span><br><span class="line">  <span class="comment">// å¦‚æœ promise2 === xï¼Œ æ‰§è¡Œ rejectï¼Œé”™è¯¯åŸå› ä¸º TypeError</span></span><br><span class="line">    <span class="keyword">if</span> (promise2 === x) &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;The promise and the return value are the same&#x27;</span>))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœ x æ˜¯å‡½æ•°æˆ–å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> x === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> then</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        then = x.<span class="property">then</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(error)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœ x.then æ˜¯å‡½æ•°</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> then === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        then.<span class="title function_">call</span>(x, <span class="function"><span class="params">y</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// resolveçš„ç»“æœä¾æ—§æ˜¯promise é‚£å°±ç»§ç»­è§£æ</span></span><br><span class="line">          <span class="title function_">resolvePromise</span>(promise2, y, resolve, reject);</span><br><span class="line">        &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err);<span class="comment">// å¤±è´¥äº†</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// å¦‚æœ x.then ä¸æ˜¯å‡½æ•°</span></span><br><span class="line">          <span class="title function_">resolve</span>(x)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœ x ä¸æ˜¯ promise å®ä¾‹</span></span><br><span class="line">        <span class="title function_">resolve</span>(x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½äº†</p>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™å®ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çœ‹æˆ‘æ¥å®ç°ä¸€ä¸ªwebpack loader</title>
      <link href="/post/e8da5eee.html"/>
      <url>/post/e8da5eee.html</url>
      
        <content type="html"><![CDATA[<h3 id="loaderçš„åŸºæœ¬æ¦‚å¿µ"><a href="#loaderçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="loaderçš„åŸºæœ¬æ¦‚å¿µ"></a>loaderçš„åŸºæœ¬æ¦‚å¿µ</h3><p>åœ¨webpackä¸­ï¼Œloaderæœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æˆ‘ä»¬æ‰§è¡Œæ–‡ä»¶æ“ä½œæ—¶ï¼Œä¼šé€šè¿‡è¯¥å‡½æ•°å¯¹æ¥æ”¶åˆ°çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œè¿”å›è½¬æ¢åçš„ç»“æœã€‚å› ä¸º <code>Webpack</code> åªæ”¯æŒ <code>JavaScript</code> æ–‡ä»¶ï¼Œæ‰€æœ‰æœ‰çš„æ—¶å€™ï¼Œloaderä¹Ÿå¯¹å…¶ä»–ç±»å‹çš„æ–‡ä»¶è¿›è¡Œè½¬è¯‘å¤„ç†ï¼Œè½¬æ¢ä¸º Webpack æ”¯æŒçš„æ–‡ä»¶ã€‚</p><h3 id="å®ç°ä¸€ä¸ªåŒæ­¥çš„-loader"><a href="#å®ç°ä¸€ä¸ªåŒæ­¥çš„-loader" class="headerlink" title="å®ç°ä¸€ä¸ªåŒæ­¥çš„ loader"></a>å®ç°ä¸€ä¸ªåŒæ­¥çš„ <code>loader</code></h3><p>åœ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯åŒæ­¥loaderï¼š</p><ul><li>é»˜è®¤åˆ›å»ºçš„Loaderå°±æ˜¯åŒæ­¥çš„Loader</li><li>è¿™ä¸ªLoaderå¿…é¡»é€šè¿‡returnæˆ–è€…this.callbackæ¥è¿”å›ç»“æœï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªloaderæ¥å¤„ç†</li><li>é€šå¸¸åœ¨æœ‰é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨this.callback<ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºERRæˆ–è€…null</li><li>è¿”å›çš„æ˜¯ <code>string</code> æˆ–è€… <code>buffer</code></li></ul></li></ul><p>åœ¨è¿™é‡Œæˆ‘ä»¬å…ˆåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm install webpack webpack-cli</span><br></pre></td></tr></table></figure><p>å†æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ <code>index.js</code>ã€<code>webpack.config.js</code><br>å…·ä½“ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º</p><p>å…¶ä¸­index.jsä¸­çš„å†…å®¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è‡ªå·±å®ç°ä¸€ä¸ªloader&#x27;</span>)</span><br></pre></td></tr></table></figure><p>webpack.config.js ä¸­çš„å†…å®¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">main</span>: <span class="string">&#x27;./src/index.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåŒæ­¥loader <code>syncLoader.js</code> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// syncLoader.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;source: &#x27;</span>, source)</span><br><span class="line">    <span class="keyword">return</span> source</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>Webpack</code> æ‰“åŒ…é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">main</span>: <span class="string">&#x27;./src/index.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//  é€šè¿‡resolveLoader é…ç½®é¡¹ï¼ŒæŒ‡å®šloaderæŸ¥æ‰¾æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="attr">resolveLoader</span>: &#123;</span><br><span class="line">        <span class="comment">// æŸ¥æ‰¾é¡ºåºä»å·¦å¾€å³</span></span><br><span class="line">        <span class="attr">modules</span>: [<span class="string">&#x27;node_modules&#x27;</span>, <span class="string">&#x27;./&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="comment">// loader æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰§è¡Œé¡ºåºä»ä¸‹åˆ°ä¸Šï¼Œä»å³å¾€å·¦</span></span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="comment">// èµ„æºæ–‡ä»¶åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">                <span class="attr">use</span>: <span class="string">&#x27;syncLoader&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡†å¤‡å°±ç»ªï¼Œä½¿ç”¨webpackè¿›è¡Œæ‰“åŒ…ï¼Œå› ä¸º <code>package.json</code> å·²ç»å£°æ˜äº† <code>"main": "index.js"</code> æ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨æ ¹ç›®å½•è¾“å…¥ <code>webpack</code> å³å¯ï¼Œä¸å‡ºæ„æ–™çš„è¯ï¼Œä¼šåœ¨ç»ˆç«¯è¾“å‡ºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source:  console.log(&#x27;è‡ªå·±å®ç°ä¸€ä¸ªloader&#x27;);</span><br><span class="line">asset main.js 1.22 KiB [compared for emit] (name: main)</span><br><span class="line">./src/index.js 40 bytes [built] [code generated]</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜æ˜¾ï¼Œç¬¬ä¸€è¡Œçš„æ‰“å°å†…å®¹ä¸­ <code>source</code> æ˜¯  <code>syncLoader.js</code> ä¸­çš„å†…å®¹ï¼Œåé¢æ‹¼æ¥çš„æ˜¯ <code>index.js</code> ä¸­çš„æ–‡æœ¬ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è‡ªå·±å®ç°ä¸€ä¸ªloader&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// syncLoader.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;source: &#x27;</span>, source)</span><br><span class="line">    <span class="keyword">return</span> source</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥ç€ä½¿ç”¨ <code>syncLoader.js</code> å¯¹ <code>index.js</code> ä¸­çš„å†…å®¹ä½œå‡ºä¸€äº›å¤„ç†ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è‡ªå·±å®ç°ä¸€ä¸ªloader&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// syncLoader.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">    source += <span class="string">&#x27;åŒæ­¥loader&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;source: &#x27;</span>, source);</span><br><span class="line">    <span class="keyword">return</span> source</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source:  console.log(&#x27;è‡ªå·±å®ç°ä¸€ä¸ªloader&#x27;);åŒæ­¥loader</span><br><span class="line">asset main.js 1.24 KiB [compared for emit] (name: main)</span><br><span class="line">./src/index.js 56 bytes [built] [code generated]</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>loader-utils</code> æ¥å®Œæˆæ›´å¤šè‡ªå®šä¹‰çš„åŠŸèƒ½ï¼Œæˆ‘è¿™é‡Œå®‰è£… <code><a href="mailto:&#x6c;&#x6f;&#97;&#x64;&#x65;&#x72;&#x2d;&#117;&#116;&#105;&#x6c;&#x73;&#64;&#x31;&#x2e;&#50;&#x2e;&#51;">&#x6c;&#x6f;&#97;&#x64;&#x65;&#x72;&#x2d;&#117;&#116;&#105;&#x6c;&#x73;&#64;&#x31;&#x2e;&#50;&#x2e;&#51;</a></code></p><p>å…ˆæ”¹å†™ <code>webpack.config.js</code> çš„å†…å®¹ï¼Œä¸»è¦å†rulesä¸­ç»™ <code>syncLoader</code> å¢åŠ äº† <code>options</code> å±æ€§ï¼Œå…¶ä¸­ <code>options</code> çš„å†…å®¹å¯ä»¥è‡ªå®šä¹‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="comment">// èµ„æºæ–‡ä»¶åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;syncLoader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;åŒæ­¥loader&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>syncLoader.js</code> é€šè¿‡<code>loader-utils</code> çš„ <code>getOptions</code> è·å–åˆ° <code>options</code> é…ç½®é¡¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loaderUtils = <span class="built_in">require</span>(<span class="string">&#x27;loader-utils&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> options = loaderUtils.<span class="title function_">getOptions</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="comment">// &#123; message: &#x27;åŒæ­¥loader&#x27; &#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(options)</span><br><span class="line">    source += options.<span class="property">message</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">callback</span>(<span class="literal">null</span>, source)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“åŒ…ç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; message: &#x27;åŒæ­¥loader&#x27; &#125;</span><br><span class="line">asset main.js 1.24 KiB [emitted] (name: main)</span><br><span class="line">./src/index.js 52 bytes [built] [code generated]</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºäº† syncLoader loader æ–°å¢çš„é…ç½®é¡¹å†…å®¹ <strong>åŒæ­¥loader</strong>ï¼Œè·Ÿä¹‹å‰çš„å†…å®¹ç›¸åŒã€‚<br>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªåŒæ­¥ loader </p><p>å½“ç„¶æˆ‘ä»¬è¦å°½å¯èƒ½çš„å¼‚æ­¥åŒ– Loaderï¼Œå¦‚æœè®¡ç®—é‡å¾ˆå°ï¼ŒåŒæ­¥ä¹Ÿå¯ä»¥ï¼Œæ‰€ä»¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ªå¼‚æ­¥çš„ loader</p><h3 id="å®ç°ä¸€ä¸ªå¼‚æ­¥çš„-loader"><a href="#å®ç°ä¸€ä¸ªå¼‚æ­¥çš„-loader" class="headerlink" title="å®ç°ä¸€ä¸ªå¼‚æ­¥çš„ loader"></a>å®ç°ä¸€ä¸ªå¼‚æ­¥çš„ <code>loader</code></h3><p>åœ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯å¼‚æ­¥loaderï¼š</p><ul><li>ä½¿ç”¨Loaderè¿›è¡Œä¸€äº›å¼‚æ­¥çš„æ“ä½œ</li><li>æˆ‘ä»¬å¸Œæœ›åœ¨å¼‚æ­¥æ“ä½œå®Œæˆä¹‹åï¼Œå†è¿”å›è¿™ä¸ªloaderå¤„ç†çš„ç»“æœ</li><li>ä½¿ç”¨ <code>this.async()</code> å®ç°</li></ul><p>åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªjsæ–‡ä»¶ <code>asyncLoader.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> asyncfunc = <span class="variable language_">this</span>.<span class="title function_">async</span>()</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        source += <span class="string">&#x27;å¼‚æ­¥loader&#x27;</span></span><br><span class="line">        <span class="title function_">asyncfunc</span>(<span class="literal">null</span>, res)</span><br><span class="line">    &#125;, <span class="number">300</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ <code>webpack.config.js</code> ï¼Œåœ¨useä¸­é…ç½®å¼‚æ­¥çš„loaderï¼Œä¿®æ”¹åçš„å†…å®¹å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">main</span>: <span class="string">&#x27;./src/index.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//  é€šè¿‡resolveLoader é…ç½®é¡¹ï¼ŒæŒ‡å®šloaderæŸ¥æ‰¾æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="attr">resolveLoader</span>: &#123;</span><br><span class="line">        <span class="comment">// æŸ¥æ‰¾é¡ºåºä»å·¦å¾€å³</span></span><br><span class="line">        <span class="attr">modules</span>: [<span class="string">&#x27;node_modules&#x27;</span>, <span class="string">&#x27;./&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="comment">// loader æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰§è¡Œé¡ºåºä»ä¸‹åˆ°ä¸Šï¼Œä»å³å¾€å·¦</span></span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="comment">// èµ„æºæ–‡ä»¶åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">                <span class="attr">use</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&#x27;syncLoader&#x27;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">message</span>: <span class="string">&#x27;åŒæ­¥loader&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">// ç®€å†™</span></span><br><span class="line">                    <span class="comment">// &#x27;asyncLoader&#x27;,</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&#x27;asyncLoader&#x27;</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºloaderçš„æ‰§è¡Œæœºåˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬é¢„æµ‹ å…ˆæ‰§è¡Œ <code>asyncLoader</code>ï¼Œå†æ‰§è¡Œ<code>syncLoader</code><br>æŸ¥çœ‹ <code>dist/main.js</code> å†…å®¹ï¼Œç¡®å®å¦‚æ­¤ï¼Œè‡³æ­¤æˆ‘ä»¬å°±ç®€å•å®ç°äº†ä¸€ä¸ª å¼‚æ­¥loader</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>Loaderæœ¬è´¨æ˜¯ä¸€ä¸ªå¯¼å‡ºä¸ºå‡½æ•°çš„JavaScriptæ¨¡å—</li><li>loader çš„æ‰§è¡Œé¡ºåºæ˜¯ä»ä¸‹å¾€ä¸Šçš„ï¼ŒLoader runneråº“ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œç„¶åå°†ä¸Šä¸€ä¸ªloaderäº§ç”Ÿçš„ç»“æœæˆ–è€…èµ„æºæ–‡ä»¶ä¼ å…¥è¿›å»</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>loader-utils</code> è·å–åˆ° loader çš„é…ç½®ï¼Œå†å¯¹åŸå§‹æ–‡ä»¶è¿›è¡Œå¯¹åº”æ“ä½œ</li><li>å¼‚æ­¥loaderä¸»è¦é€šè¿‡ <code>this.async()</code> å®ç°</li></ul><p>é‚£ä¹ˆé‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ loader çš„æ‰§è¡Œæ˜¯ä»ä¸‹å¾€ä¸Šï¼Œä»å³å¾€å·¦çš„å‘¢ ï¼Ÿã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‰‹å†™å®ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tree shakingæ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/post/f3aa05d6.html"/>
      <url>/post/f3aa05d6.html</url>
      
        <content type="html"><![CDATA[<p>ä¸€ç›´ä»¥æ¥éƒ½çŸ¥é“åœ¨ webpack æ‰“åŒ…ä¼˜åŒ–ä¸­ï¼Œæœ‰ tree shakingï¼ˆåˆ«åï¼šæ ‘æ‘‡ï¼‰è¿™ä¸€é¡¹ä¼˜åŒ–ï¼Œå´ä¸çŸ¥é“å®ƒçš„å·¥ä½œæœºåˆ¶å’ŒåŸç†ï¼Œè¶ç€ä»Šå¤©å¤ä¹ çŸ¥è¯†çš„ç©ºå­¦ä¹ ä¸€ä¸‹</p><span id="more"></span><h4 id="tree-shaking-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#tree-shaking-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="tree shaking æ˜¯ä»€ä¹ˆï¼Ÿ"></a>tree shaking æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p><strong>tree shaking</strong>ï¼Œåˆ«åï¼šæ ‘æ‘‡ï¼Œæœ€æ—©æ˜¯ç”±<strong>Rollup</strong>å®ç°ã€‚æ ¹æ®å­—é¢æ„æ€æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ç§å·¥å…·ï¼Œå¯ä»¥â€œæ‘‡åŠ¨â€æˆ‘ä»¬çš„ JS æ–‡ä»¶ï¼Œå°†å…¶ä¸­ç”¨ä¸åˆ°çš„ä»£ç â€œæ‘‡â€æ‰ï¼Œå±äºæ€§èƒ½ä¼˜åŒ–çš„ä¸€éƒ¨åˆ†ã€‚å…·ä½“åˆ°å®é™…åœºæ™¯ä¸­æ¥çœ‹ï¼Œæˆ‘ä»¬åœ¨ webpack é¡¹ç›®ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œä¼šæœ‰å¾ˆå¤šçš„ä¾èµ–æ¨¡å—æŒ‚è½½åœ¨ index.js ä¸‹ï¼Œä½†æ˜¯æˆ‘ä»¬åªä¼šç”¨åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œé€ æˆå†…å­˜ç©ºé—´æµªè´¹ï¼Œ tree shaking å°±å¯ä»¥å°†æ— ç”¨çš„æ¨¡å—å‰”é™¤æ‰ï¼Œå®ç°ä»£ç ä½“ç§¯ä¼˜åŒ–çš„æ•ˆæœã€‚</p><h4 id="tree-shaking-çš„å·¥ä½œæœºåˆ¶"><a href="#tree-shaking-çš„å·¥ä½œæœºåˆ¶" class="headerlink" title="tree shaking çš„å·¥ä½œæœºåˆ¶"></a>tree shaking çš„å·¥ä½œæœºåˆ¶</h4><p>å› ä¸º tree shaking åªèƒ½åœ¨é™æ€çš„ modules ä¸‹å·¥ä½œï¼Œæ‰€ä»¥ç›´åˆ° ES6 çš„ import è¯­æ³•ä¸­æ‰å¯ä»¥å®Œç¾ä½¿ç”¨ã€‚</p><!-- è™½ç„¶tree shaking çš„æ¦‚å¿µå¾ˆæ—©å°±è¢«æäº†å‡ºæ¥ï¼Œä½†æ˜¯çœŸæ­£è¢«åˆ©ç”¨å´æ˜¯åœ¨æœ€è¿‘å‡ å¹´ï¼Œä¸€åˆ‡éƒ½æ˜¯å› ä¸ºå®ƒä¾èµ–äºES6çš„æ¨¡å—ç‰¹å¾ã€‚æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ES6 module çš„ç‰¹ç‚¹ï¼š+ åªèƒ½ä½œä¸ºæ¨¡å—é¡¶å±‚è¯­å¥å‡ºç°+ import çš„æ¨¡å—ååªèƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡+ import binding æ˜¯ immutableçš„ --><!-- ES6æ¨¡å—ä¾èµ–å…³ç³»æ˜¯ç¡®å®šçš„ï¼Œå’Œè¿è¡Œæ—¶çš„çŠ¶æ€æ— å…³ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œå¯é çš„é™æ€åˆ†æã€‚è€Œ ComminJS ä»¥ require() å¼•å…¥æ¨¡å—æ˜¯åŠ¨æ€çš„ï¼Œæ— æ³•åœ¨è¿è¡Œå‰ç¡®å®šå®é™…è¿è¡Œä¸­éœ€è¦çš„æ¨¡å—ã€‚ --><h4 id="tree-shaking-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#tree-shaking-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="tree shaking çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>tree shaking çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul><li>ES6 Module å¼•å…¥è¿›è¡Œé™æ€åˆ†æï¼Œæ•…è€Œç¼–è¯‘çš„æ—¶å€™æ­£ç¡®åˆ¤æ–­åˆ°åº•åŠ è½½äº†é‚£äº›æ¨¡å—</li><li>é™æ€åˆ†æç¨‹åºæµï¼Œåˆ¤æ–­é‚£äº›æ¨¡å—å’Œå˜é‡æœªè¢«ä½¿ç”¨æˆ–è€…å¼•ç”¨ï¼Œè¿›è€Œåˆ é™¤å¯¹åº”ä»£ç </li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackä¸€äºŒä¸‰è®²</title>
      <link href="/post/d9987a00.html"/>
      <url>/post/d9987a00.html</url>
      
        <content type="html"><![CDATA[<h4 id="webpackæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#webpackæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="webpackæ˜¯ä»€ä¹ˆï¼Ÿ"></a>webpackæ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨å®ƒç®¡ç†é¡¹ç›®ä¸­çš„æ¨¡å—ä¾èµ–ï¼Œå¹¶ç¼–è¯‘è¾“å‡ºæ¨¡å—æ‰€éœ€çš„é™æ€æ–‡ä»¶ã€‚å®ƒå¯ä»¥å¾ˆå¥½åœ°ç®¡ç†ã€æ‰“åŒ…å¼€å‘ä¸­æ‰€ç”¨åˆ°çš„HTML,CSS,JavaScriptå’Œé™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ï¼Œå­—ä½“ï¼‰ç­‰ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆã€‚å¯¹äºä¸åŒç±»å‹çš„ä¾èµ–ï¼Œwebpackæœ‰å¯¹åº”çš„æ¨¡å—åŠ è½½å™¨ï¼Œè€Œä¸”ä¼šåˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ€ååˆå¹¶ç”Ÿæˆä¼˜åŒ–çš„é™æ€èµ„æº</p><span id="more"></span><h4 id="webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†"><a href="#webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†" class="headerlink" title="webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†"></a>webpackåŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†</h4><ul><li>ä»£ç è½¬æ¢ï¼šTypeScript ç¼–è¯‘æˆ JavaScriptã€SCSS ç¼–è¯‘æˆ CSS ç­‰ç­‰</li><li>æ–‡ä»¶ä¼˜åŒ–ï¼šå‹ç¼© JavaScriptã€CSSã€HTML ä»£ç ï¼Œå‹ç¼©åˆå¹¶å›¾ç‰‡ç­‰</li><li>ä»£ç åˆ†å‰²ï¼šæå–å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç ã€æå–é¦–å±ä¸éœ€è¦æ‰§è¡Œéƒ¨åˆ†çš„ä»£ç è®©å…¶å¼‚æ­¥åŠ è½½</li><li>æ¨¡å—åˆå¹¶ï¼šåœ¨é‡‡ç”¨æ¨¡å—åŒ–çš„é¡¹ç›®æœ‰å¾ˆå¤šæ¨¡å—å’Œæ–‡ä»¶ï¼Œéœ€è¦æ„å»ºåŠŸèƒ½æŠŠæ¨¡å—åˆ†ç±»åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶</li><li>è‡ªåŠ¨åˆ·æ–°ï¼šç›‘å¬æœ¬åœ°æºä»£ç çš„å˜åŒ–ï¼Œè‡ªåŠ¨æ„å»ºï¼Œåˆ·æ–°æµè§ˆå™¨</li><li>ä»£ç æ ¡éªŒï¼šåœ¨ä»£ç è¢«æäº¤åˆ°ä»“åº“å‰éœ€è¦æ£€æµ‹ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä»¥åŠå•å…ƒæµ‹è¯•æ˜¯å¦é€šè¿‡</li><li>è‡ªåŠ¨å‘å¸ƒï¼šæ›´æ–°å®Œä»£ç åï¼Œè‡ªåŠ¨æ„å»ºå‡ºçº¿ä¸Šå‘å¸ƒä»£ç å¹¶ä¼ è¾“ç»™å‘å¸ƒç³»ç»Ÿã€‚</li></ul><h4 id="webpackæ„å»ºè¿‡ç¨‹"><a href="#webpackæ„å»ºè¿‡ç¨‹" class="headerlink" title="webpackæ„å»ºè¿‡ç¨‹"></a>webpackæ„å»ºè¿‡ç¨‹</h4><p>Webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š</p><ol><li>åˆå§‹åŒ–å‚æ•°ï¼šä»é…ç½®æ–‡ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°</li><li>å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘</li><li>ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶</li><li>ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†</li><li>å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»</li><li>è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š</li><li>è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ</li></ol><p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼ŒWebpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œå¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æœã€‚</p><h4 id="webpack-çƒ­æ›´æ–°åŸç†"><a href="#webpack-çƒ­æ›´æ–°åŸç†" class="headerlink" title="webpack çƒ­æ›´æ–°åŸç†"></a>webpack çƒ­æ›´æ–°åŸç†</h4><p><strong>Webpack</strong> çš„çƒ­æ›´æ–°åˆç§°çƒ­æ›¿æ¢ï¼ˆ<strong>Hot Module Replacement</strong>ï¼‰ï¼Œç¼©å†™ä¸º <strong>HMR</strong>ã€‚ è¿™ä¸ªæœºåˆ¶å¯ä»¥åšåˆ°ä¸ç”¨åˆ·æ–°æµè§ˆå™¨è€Œå°†æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—ã€‚<br>HMRçš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯æ‹‰å»æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ <strong>chunk diff</strong> (<strong>chunk</strong> éœ€è¦æ›´æ–°çš„éƒ¨åˆ†)ï¼Œå®é™…ä¸Š <strong>WDS</strong> ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª <strong>Websocket</strong>ï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<strong>WDS</strong> ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ <strong>hash</strong>ï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ <strong>WDS</strong> å‘èµ· <strong>Ajax</strong> è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹(æ–‡ä»¶åˆ—è¡¨ã€<strong>hash</strong>)ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ <strong>WDS</strong> å‘èµ· <strong>jsonp</strong> è¯·æ±‚è·å–è¯¥chunkçš„å¢é‡æ›´æ–°ã€‚<br>åç»­çš„éƒ¨åˆ†(æ‹¿åˆ°å¢é‡æ›´æ–°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿå“ªäº›çŠ¶æ€è¯¥ä¿ç•™ï¼Ÿå“ªäº›åˆéœ€è¦æ›´æ–°ï¼Ÿ)ç”± <strong>HotModulePlugin</strong> æ¥å®Œæˆï¼Œæä¾›äº†ç›¸å…³ API ä»¥ä¾›å¼€å‘è€…é’ˆå¯¹è‡ªèº«åœºæ™¯è¿›è¡Œå¤„ç†ï¼Œåƒ<strong>react-hot-loader</strong> å’Œ <strong>vue-loader</strong> éƒ½æ˜¯å€ŸåŠ©è¿™äº› API å®ç° HMRã€‚</p><h4 id="å¦‚ä½•ä¼˜åŒ–-webpack-æ‰“åŒ…é€Ÿåº¦ï¼Ÿ"><a href="#å¦‚ä½•ä¼˜åŒ–-webpack-æ‰“åŒ…é€Ÿåº¦ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¼˜åŒ– webpack æ‰“åŒ…é€Ÿåº¦ï¼Ÿ"></a>å¦‚ä½•ä¼˜åŒ– webpack æ‰“åŒ…é€Ÿåº¦ï¼Ÿ</h4><ul><li>ä½¿ç”¨é«˜ç‰ˆæœ¬çš„ webpack å’Œ Node.js</li><li>å¤šè¿›ç¨‹&#x2F;å¤šå®ä¾‹æ„å»ºï¼šå¼€å¯ <strong>parallel</strong> å‚æ•°ï¼Œä½¿ç”¨å¤šè¿›ç¨‹å‹ç¼©</li><li>csså‹ç¼©ï¼šå€ŸåŠ© <strong>optimize-css-assets-webpack-plugin</strong> æ’ä»¶ï¼Œå‹ç¼©å¼•æ“æ˜¯ <strong>cssnano</strong></li><li>æ“¦é™¤æ— ç”¨çš„cssï¼šä½¿ç”¨ <strong>PurgeCSS</strong> æ¥å®Œæˆå¯¹æ— ç”¨ css çš„æ“¦é™¤ï¼Œå®ƒéœ€è¦å’Œ <strong>mini-css-extract-plugin</strong> é…åˆä½¿ç”¨ã€‚</li><li>å›¾ç‰‡å‹ç¼©ï¼šé…ç½® <strong>image-webpack-loader</strong>ã€ä½¿ç”¨åŸºäº Node åº“çš„ <strong>imagemin</strong></li><li>åˆ©ç”¨ç¼“å­˜æå‡äºŒæ¬¡æ„å»ºé€Ÿåº¦ï¼š<ul><li>babel-loader å¼€å¯ç¼“å­˜</li><li>terser-webpack-plugin å¼€å¯ç¼“å­˜</li><li>ä½¿ç”¨ cache-loader æˆ–è€… hard-source-webpack-plugin</li></ul></li><li>Tree shaking (æ‘‡æ ‘)<ul><li>æ‰“åŒ…è¿‡ç¨‹ä¸­æ£€æµ‹å·¥ç¨‹ä¸­æ²¡æœ‰å¼•ç”¨è¿‡çš„æ¨¡å—å¹¶è¿›è¡Œæ ‡è®°ï¼Œåœ¨èµ„æºå‹ç¼©æ—¶å°†å®ƒä»¬ä»æœ€ç»ˆçš„bundleä¸­å»æ‰(åªèƒ½å¯¹ES6 Modlueç”Ÿæ•ˆ) å¼€å‘ä¸­å°½å¯èƒ½ä½¿ç”¨ES6 Moduleçš„æ¨¡å—ï¼Œæé«˜tree shakingæ•ˆç‡</li><li>ç¦ç”¨ babel-loader çš„æ¨¡å—ä¾èµ–è§£æï¼Œå¦åˆ™ Webpack æ¥æ”¶åˆ°çš„å°±éƒ½æ˜¯è½¬æ¢è¿‡çš„ CommonJS å½¢å¼çš„æ¨¡å—ï¼Œæ— æ³•è¿›è¡Œ tree-shaking</li><li>ä½¿ç”¨ PurifyCSS(ä¸åœ¨ç»´æŠ¤) æˆ–è€… uncss å»é™¤æ— ç”¨ CSS ä»£ç <ul><li>purgecss-webpack-plugin å’Œ mini-css-extract-pluginé…åˆä½¿ç”¨(å»ºè®®)</li></ul></li></ul></li><li>åˆç†ä½¿ç”¨ Ployfill<ul><li>é‡‡ç”¨ polyfill-service åªç»™ç”¨æˆ·è¿”å›éœ€è¦çš„polyfill</li></ul></li></ul><h4 id="å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ"><a href="#å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ"></a>å¸¸ç”¨çš„Labelæœ‰å“ªäº›ï¼Ÿ</h4><ul><li>raw-loaderï¼šåŠ è½½æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆutf-8ï¼‰</li><li>file-loaderï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)</li><li>url-loaderï¼šä¸ file-loader ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¤§äºé˜ˆå€¼ä¼šäº¤ç»™ file-loader å¤„ç†ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶ base64 å½¢å¼ç¼–ç  (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)</li><li>source-map-loaderï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•</li><li>svg-inline-loaderï¼šå°†å‹ç¼©åçš„ SVG å†…å®¹æ³¨å…¥ä»£ç ä¸­</li><li>image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶</li><li>json-loader åŠ è½½ JSON æ–‡ä»¶ï¼ˆé»˜è®¤åŒ…å«ï¼‰</li><li>handlebars-loader: å°† Handlebars æ¨¡ç‰ˆç¼–è¯‘æˆå‡½æ•°å¹¶è¿”å›</li><li>babel-loaderï¼šæŠŠ ES6 è½¬æ¢æˆ ES5</li><li>ts-loader: å°† TypeScript è½¬æ¢æˆ JavaScript</li><li>awesome-typescript-loaderï¼šå°† TypeScript è½¬æ¢æˆ JavaScriptï¼Œæ€§èƒ½ä¼˜äº ts-loader</li><li>sass-loaderï¼šå°†SCSS&#x2F;SASSä»£ç è½¬æ¢æˆCSS</li><li>css-loaderï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§</li><li>style-loaderï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSS</li><li>postcss-loaderï¼šæ‰©å±• CSS è¯­æ³•ï¼Œä½¿ç”¨ä¸‹ä¸€ä»£ CSSï¼Œå¯ä»¥é…åˆ autoprefixer æ’ä»¶è‡ªåŠ¨è¡¥é½ CSS3 å‰ç¼€</li><li>eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç </li><li>tslint-loaderï¼šé€šè¿‡ TSLintæ£€æŸ¥ TypeScript ä»£ç </li><li>mocha-loaderï¼šåŠ è½½ Mocha æµ‹è¯•ç”¨ä¾‹çš„ä»£ç </li><li>coverjs-loaderï¼šè®¡ç®—æµ‹è¯•çš„è¦†ç›–ç‡</li><li>vue-loaderï¼šåŠ è½½ Vue.js å•æ–‡ä»¶ç»„ä»¶</li><li>i18n-loader: å›½é™…åŒ–</li><li>cache-loader: å¯ä»¥åœ¨ä¸€äº›æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ Loader ä¹‹å‰æ·»åŠ ï¼Œç›®çš„æ˜¯å°†ç»“æœç¼“å­˜åˆ°ç£ç›˜é‡Œ</li></ul><h4 id="å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ"><a href="#å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ"></a>å¸¸ç”¨çš„Pluginæœ‰å“ªäº›ï¼Ÿ</h4><ul><li>define-pluginï¼šå®šä¹‰ç¯å¢ƒå˜é‡ (Webpack4 ä¹‹åæŒ‡å®š mode ä¼šè‡ªåŠ¨é…ç½®)</li><li>ignore-pluginï¼šå¿½ç•¥éƒ¨åˆ†æ–‡ä»¶</li><li>html-webpack-pluginï¼šç®€åŒ– HTML æ–‡ä»¶åˆ›å»º (ä¾èµ–äº html-loader)</li><li>web-webpack-pluginï¼šå¯æ–¹ä¾¿åœ°ä¸ºå•é¡µåº”ç”¨è¾“å‡º HTMLï¼Œæ¯” html-webpack-plugin å¥½ç”¨</li><li>uglifyjs-webpack-pluginï¼šä¸æ”¯æŒ ES6 å‹ç¼© (Webpack4 ä»¥å‰)</li><li>terser-webpack-plugin: æ”¯æŒå‹ç¼© ES6 (Webpack4)</li><li>webpack-parallel-uglify-plugin: å¤šè¿›ç¨‹æ‰§è¡Œä»£ç å‹ç¼©ï¼Œæå‡æ„å»ºé€Ÿåº¦</li><li>mini-css-extract-plugin: åˆ†ç¦»æ ·å¼æ–‡ä»¶ï¼ŒCSS æå–ä¸ºç‹¬ç«‹æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ (æ›¿ä»£extract-text-webpack-plugin)</li><li>serviceworker-webpack-pluginï¼šä¸ºç½‘é¡µåº”ç”¨å¢åŠ ç¦»çº¿ç¼“å­˜åŠŸèƒ½</li><li>clean-webpack-plugin: ç›®å½•æ¸…ç†</li><li>ModuleConcatenationPlugin: å¼€å¯ Scope Hoisting</li><li>speed-measure-webpack-plugin: å¯ä»¥çœ‹åˆ°æ¯ä¸ª Loader å’Œ Plugin æ‰§è¡Œè€—æ—¶ (æ•´ä¸ªæ‰“åŒ…è€—æ—¶ã€æ¯ä¸ª Plugin å’Œ Loader è€—æ—¶)</li><li>webpack-bundle-analyzer: å¯è§†åŒ– Webpack è¾“å‡ºæ–‡ä»¶çš„ä½“ç§¯ (ä¸šåŠ¡ç»„ä»¶ã€ä¾èµ–ç¬¬ä¸‰æ–¹æ¨¡å—)</li></ul><h4 id="Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ"><a href="#Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ"></a>Loaderå’ŒPluginçš„åŒºåˆ«ï¼Ÿ</h4><ul><li><p>Loader æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯¹æ¥æ”¶åˆ°çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œè¿”å›è½¬æ¢åçš„ç»“æœã€‚ å› ä¸º Webpack åªè®¤è¯† JavaScriptï¼Œæ‰€ä»¥ Loader å°±æˆäº†ç¿»è¯‘å®˜ï¼Œå¯¹å…¶ä»–ç±»å‹çš„èµ„æºè¿›è¡Œè½¬è¯‘çš„é¢„å¤„ç†å·¥ä½œã€‚</p></li><li><p>Plugin å°±æ˜¯æ’ä»¶ï¼ŒåŸºäºäº‹ä»¶æµæ¡†æ¶ Tapableï¼Œæ’ä»¶å¯ä»¥æ‰©å±• Webpack çš„åŠŸèƒ½ï¼Œåœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚</p></li><li><p>Loader åœ¨ module.rules ä¸­é…ç½®ï¼Œä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™ï¼Œç±»å‹ä¸ºæ•°ç»„ã€‚æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ª Objectï¼Œå†…éƒ¨åŒ…å«äº† test(ç±»å‹æ–‡ä»¶)ã€loaderã€options (å‚æ•°)ç­‰å±æ€§ã€‚</p></li><li><p>Plugin åœ¨ plugins ä¸­å•ç‹¬é…ç½®ï¼Œç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª Plugin çš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚</p></li></ul><h4 id="å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ"></a>å¦‚ä½•å®ç°ä¸€ä¸ªLoaderï¼Ÿ</h4><p>Loader æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œæ‰€ä»¥å¼€å‘ä¸Šéœ€è¦ä¸¥æ ¼éµå¾ªâ€œå•ä¸€èŒè´£â€ï¼Œæ¯ä¸ª Loader åªè´Ÿè´£è‡ªå·±éœ€è¦è´Ÿè´£çš„äº‹æƒ…ã€‚</p><ul><li>Loader è¿è¡Œåœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»æ„ Node.js è‡ªå¸¦çš„ API æˆ–è€…å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œè°ƒç”¨</li><li>Webpack ä¼ ç»™ Loader çš„åŸå†…å®¹éƒ½æ˜¯ UTF-8 æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå½“æŸäº›åœºæ™¯ä¸‹ Loader å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œéœ€è¦é€šè¿‡ exports.raw &#x3D; true å‘Šè¯‰ Webpack è¯¥ Loader æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ®</li><li>å°½å¯èƒ½çš„å¼‚æ­¥åŒ– Loaderï¼Œå¦‚æœè®¡ç®—é‡å¾ˆå°ï¼ŒåŒæ­¥ä¹Ÿå¯ä»¥</li><li>Loader æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨ Loader ä¸­ä¿ç•™çŠ¶æ€</li><li>ä½¿ç”¨ loader-utils å’Œ schema-utils ä¸ºæˆ‘ä»¬æä¾›çš„å®ç”¨å·¥å…·</li><li>åŠ è½½æœ¬åœ° Loader æ–¹æ³•<ul><li>Npm link</li><li>ResolveLoader</li></ul></li></ul><h4 id="å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ"></a>å¦‚ä½•å®ç°ä¸€ä¸ªPluginï¼Ÿ</h4><p>webpackåœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨ç‰¹å®šçš„é˜¶æ®µé’©å…¥æƒ³è¦æ·»åŠ çš„è‡ªå®šä¹‰åŠŸèƒ½ã€‚Webpack çš„ Tapable äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§ï¼Œä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ‰©å±•æ€§è‰¯å¥½ã€‚</p><ul><li>compiler æš´éœ²äº†å’Œ Webpack æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é’©å­</li><li>compilation æš´éœ²äº†ä¸æ¨¡å—å’Œä¾èµ–æœ‰å…³çš„ç²’åº¦æ›´å°çš„äº‹ä»¶é’©å­</li><li>æ’ä»¶éœ€è¦åœ¨å…¶åŸå‹ä¸Šç»‘å®šapplyæ–¹æ³•ï¼Œæ‰èƒ½è®¿é—® compiler å®ä¾‹</li><li>ä¼ ç»™æ¯ä¸ªæ’ä»¶çš„ compiler å’Œ compilationå¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼Œè‹¥åœ¨ä¸€ä¸ªæ’ä»¶ä¸­ä¿®æ”¹äº†å®ƒä»¬èº«ä¸Šçš„å±æ€§ï¼Œä¼šå½±å“åé¢çš„æ’ä»¶</li><li>æ‰¾å‡ºåˆé€‚çš„äº‹ä»¶ç‚¹å»å®Œæˆæƒ³è¦çš„åŠŸèƒ½<ul><li>emit äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå¯ä»¥è¯»å–åˆ°æœ€ç»ˆè¾“å‡ºçš„èµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ï¼Œå¹¶è¿›è¡Œä¿®æ”¹(emit äº‹ä»¶æ˜¯ä¿®æ”¹ Webpack è¾“å‡ºèµ„æºçš„æœ€åæ—¶æœº)</li><li>watch-run å½“ä¾èµ–çš„æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘</li></ul></li><li>å¼‚æ­¥çš„äº‹ä»¶éœ€è¦åœ¨æ’ä»¶å¤„ç†å®Œä»»åŠ¡æ—¶è°ƒç”¨å›è°ƒå‡½æ•°é€šçŸ¥ Webpack è¿›å…¥ä¸‹ä¸€ä¸ªæµç¨‹ï¼Œä¸ç„¶ä¼šå¡ä½</li></ul><h4 id="BabelåŸç†"><a href="#BabelåŸç†" class="headerlink" title="BabelåŸç†"></a>BabelåŸç†</h4><p>å¤§å¤šæ•°JavaScript Parseréµå¾ª estree è§„èŒƒï¼ŒBabel æœ€åˆåŸºäº acorn é¡¹ç›®(è½»é‡çº§ç°ä»£ JavaScript è§£æå™¨) Babelå¤§æ¦‚åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼š</p><ul><li>è§£æï¼šå°†ä»£ç è½¬æ¢æˆ AST è¯­æ³•æ ‘<ul><li>è¯æ³•åˆ†æï¼šå°†ä»£ç (å­—ç¬¦ä¸²)åˆ†å‰²ä¸ºtokenæµï¼Œå³è¯­æ³•å•å…ƒæˆçš„æ•°ç»„</li><li>è¯­æ³•åˆ†æï¼šåˆ†ætokenæµ(ä¸Šé¢ç”Ÿæˆçš„æ•°ç»„)å¹¶ç”Ÿæˆ AST</li></ul></li><li>è½¬æ¢ï¼šè®¿é—® AST çš„èŠ‚ç‚¹è¿›è¡Œå˜æ¢æ“ä½œç”Ÿäº§æ–°çš„ AST</li><li>ç”Ÿæˆï¼šä»¥æ–°çš„ AST ä¸ºåŸºç¡€ç”Ÿæˆä»£ç </li></ul><h4 id="source-Map-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#source-Map-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="source Map æ˜¯ä»€ä¹ˆï¼Ÿ"></a>source Map æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>source map æ˜¯å°†ç¼–è¯‘ã€æ‰“åŒ…ã€å‹ç¼©åçš„ä»£ç æ˜ å°„å›æºä»£ç çš„è¿‡ç¨‹ã€‚æ‰“åŒ…å‹ç¼©åçš„ä»£ç ä¸å…·å¤‡è‰¯å¥½çš„å¯è¯»æ€§ï¼Œæƒ³è¦è°ƒè¯•æºç å°±éœ€è¦ soucre mapã€‚<br>mapæ–‡ä»¶åªè¦ä¸æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šåŠ è½½çš„ã€‚<br>çº¿ä¸Šç¯å¢ƒä¸€èˆ¬æœ‰ä¸‰ç§å¤„ç†æ–¹æ¡ˆï¼š</p><p>hidden-source-mapï¼šå€ŸåŠ©ç¬¬ä¸‰æ–¹é”™è¯¯ç›‘æ§å¹³å° Sentry ä½¿ç”¨<br>nosources-source-mapï¼šåªä¼šæ˜¾ç¤ºå…·ä½“è¡Œæ•°ä»¥åŠæŸ¥çœ‹æºä»£ç çš„é”™è¯¯æ ˆã€‚å®‰å…¨æ€§æ¯” sourcemap é«˜<br>sourcemapï¼šé€šè¿‡ nginx è®¾ç½®å°† .map æ–‡ä»¶åªå¯¹ç™½åå•å¼€æ”¾(å…¬å¸å†…ç½‘)</p><p>æ³¨æ„ï¼šé¿å…åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ inline- å’Œ eval-ï¼Œå› ä¸ºå®ƒä»¬ä¼šå¢åŠ  bundle ä½“ç§¯å¤§å°ï¼Œå¹¶é™ä½æ•´ä½“æ€§èƒ½ã€‚</p><h4 id="ä»£ç å‹ç¼©"><a href="#ä»£ç å‹ç¼©" class="headerlink" title="ä»£ç å‹ç¼©"></a>ä»£ç å‹ç¼©</h4><p>ä»£ç åˆ†å‰²çš„æœ¬è´¨å…¶å®å°±æ˜¯åœ¨æºä»£ç ç›´æ¥ä¸Šçº¿å’Œæ‰“åŒ…æˆå”¯ä¸€è„šæœ¬main.bundle.jsè¿™ä¸¤ç§æç«¯æ–¹æ¡ˆä¹‹é—´çš„ä¸€ç§æ›´é€‚åˆå®é™…åœºæ™¯çš„ä¸­é—´çŠ¶æ€ã€‚<br>ã€Œç”¨å¯æ¥å—çš„æœåŠ¡å™¨æ€§èƒ½å‹åŠ›å¢åŠ æ¥æ¢å–æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ã€<br>æºä»£ç ç›´æ¥ä¸Šçº¿ï¼šè™½ç„¶è¿‡ç¨‹å¯æ§ï¼Œä½†æ˜¯httpè¯·æ±‚å¤šï¼Œæ€§èƒ½å¼€é”€å¤§ã€‚<br>æ‰“åŒ…æˆå”¯ä¸€è„šæœ¬ï¼šä¸€æŠŠæ¢­å®Œè‡ªå·±çˆ½ï¼ŒæœåŠ¡å™¨å‹åŠ›å°ï¼Œä½†æ˜¯é¡µé¢ç©ºç™½æœŸé•¿ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚</p><br/>]]></content>
      
      
      
        <tags>
            
            <tag> å·¥ç¨‹åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSå¸¸ç”¨çš„å¾ªç¯éå†</title>
      <link href="/post/5ef4056b.html"/>
      <url>/post/5ef4056b.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ•°ç»„éå†"><a href="#æ•°ç»„éå†" class="headerlink" title="æ•°ç»„éå†"></a>æ•°ç»„éå†</h3><h4 id="for-ã€forEachã€forâ€¦of"><a href="#for-ã€forEachã€forâ€¦of" class="headerlink" title="for ã€forEachã€forâ€¦of"></a>for ã€forEachã€forâ€¦of</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, , <span class="number">10</span>, <span class="number">11</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = list.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (list[i] === <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 1 2 3 4</span></span><br><span class="line">        <span class="comment">// continue; // 1 2 3 4 6 7 8 undefined 10 11</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(list[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (item === <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 1 2 3 4</span></span><br><span class="line">        <span class="comment">// continue; // 1 2 3 4 6 7 8 undefined 10 11</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index, arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item === <span class="number">5</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(index); <span class="comment">// 0 1 2 3 5 6 7 9 10</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// 1 2 3 4 6 7 8 9 10</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><span id="more"></span><p><strong>å°ç»“</strong></p><ul><li>è¿™ä¸‰ç§å¾ªç¯éƒ½æ˜¯ä»å·¦åˆ°å³éå†æ•°ç»„;</li><li><strong>forEach</strong> æ— æ³•è·³å‡ºå¾ªç¯ï¼›<strong>for</strong> å’Œ <strong>forâ€¦of</strong> å¯ä»¥ä½¿ç”¨ <strong>break</strong> æˆ–è€… <strong>countinue</strong> è·³å‡ºå¾ªç¯æˆ–ä¸­æ–­å¾ªç¯;</li><li><strong>forâ€¦of</strong> ç›´æ¥è®¿é—®çš„æ˜¯å®é™…å…ƒç´ ã€‚<strong>for</strong> éå†æ•°ç»„ç´¢å¼•ï¼Œ<strong>forEach</strong> å›è°ƒå‡½æ•°å‚æ•°æ›´ä¸°å¯Œï¼Œå…ƒç´ ã€ç´¢å¼•ã€åŸæ•°ç»„éƒ½å¯ä»¥è·å–;</li><li><strong>forâ€¦of</strong> ä¸ <strong>for</strong> å¦‚æœæ•°ç»„ä¸­å­˜åœ¨ç©ºå…ƒç´ ï¼ŒåŒæ ·ä¼šæ‰§è¡Œ;</li></ul><h4 id="someã€every"><a href="#someã€every" class="headerlink" title="someã€every"></a>someã€every</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;å¤´éƒ¨å¯¼èˆª&quot;</span>, <span class="attr">backward</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;è½®æ’­&quot;</span>, <span class="attr">backward</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">backward</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> someBackward = list.<span class="title function_">some</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">backward</span>);</span><br><span class="line"><span class="comment">// someBackward: true</span></span><br><span class="line"><span class="keyword">const</span> everyNewest = list.<span class="title function_">every</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> !item.<span class="property">backward</span>);</span><br><span class="line"><span class="comment">// everyNewest: false</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>äºŒè€…éƒ½æ˜¯ç”¨æ¥åšæ•°ç»„æ¡ä»¶åˆ¤æ–­çš„ï¼Œéƒ½æ˜¯è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼;</li><li>äºŒè€…éƒ½å¯ä»¥è¢«ä¸­æ–­;</li><li><strong>some</strong> è‹¥æŸä¸€å…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› trueï¼Œå¾ªç¯ä¸­æ–­ï¼›æ‰€æœ‰å…ƒç´ ä¸æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› false;</li><li><strong>every</strong> è‹¥æœ‰ä¸€å…ƒç´ ä¸æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› falseï¼Œå¾ªç¯ä¸­æ–­ï¼›æ‰€æœ‰å…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› true;</li></ul><h4 id="filterã€map"><a href="#filterã€map" class="headerlink" title="filterã€map"></a>filterã€map</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;å¤´éƒ¨å¯¼èˆª&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;nav&quot;</span>, <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    ,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;è½®æ’­&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;content&quot;</span>, <span class="attr">id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;nav&quot;</span>, <span class="attr">id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> resultList = list.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">    <span class="keyword">return</span> item.<span class="property">type</span> === <span class="string">&quot;nav&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// resultList: [</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;å¤´éƒ¨å¯¼èˆª&#x27;, type: &#x27;nav&#x27;, id: 1 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;é¡µè„š&#x27;, type: &#x27;nav&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newList = list.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">    <span class="keyword">return</span> item.<span class="property">id</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// newList: [1, empty, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// list: [</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;å¤´éƒ¨å¯¼èˆª&#x27;, type: &#x27;nav&#x27;, id: 1 &#125;,</span></span><br><span class="line"><span class="comment">//   empty,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;è½®æ’­&#x27;, type: &#x27;content&#x27;, id: 2 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;é¡µè„š&#x27;, type: &#x27;nav&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>äºŒè€…éƒ½æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œéƒ½ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼ˆä¸åŒ…æ‹¬éå†å¯¹è±¡æ•°ç»„æ˜¯ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­æ“ä½œå…ƒç´ å¯¹è±¡ï¼‰;</li><li>äºŒè€…éƒ½ä¼šè·³è¿‡ç©ºå…ƒç´ ;</li><li><strong>map</strong> ä¼šå°†å›è°ƒå‡½æ•°çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸åŸæ•°ç»„ä¸€è‡´;</li><li><strong>filter</strong> ä¼šå°†ç¬¦åˆå›è°ƒå‡½æ•°æ¡ä»¶çš„å…ƒç´ ç»„æˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ä¸åŸæ•°ç»„ä¸åŒ;</li><li><strong>map</strong> ç”Ÿæˆçš„æ–°æ•°ç»„å…ƒç´ æ˜¯å¯è‡ªå®šä¹‰;</li><li><strong>filter</strong> ç”Ÿæˆçš„æ–°æ•°ç»„å…ƒç´ ä¸å¯è‡ªå®šä¹‰ï¼Œä¸å¯¹åº”åŸæ•°ç»„å…ƒç´ ä¸€è‡´;</li></ul><h4 id="findã€findIndex"><a href="#findã€findIndex" class="headerlink" title="findã€findIndex"></a>findã€findIndex</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;å¤´éƒ¨å¯¼èˆª&quot;</span>, <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;è½®æ’­&quot;</span>, <span class="attr">id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;é¡µè„š&quot;</span>, <span class="attr">id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> result = list.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">id</span> === <span class="number">3</span>);</span><br><span class="line"><span class="comment">// result: &#123; name: &#x27;é¡µè„š&#x27;, id: 3 &#125;</span></span><br><span class="line">result.<span class="property">name</span> = <span class="string">&quot;åº•éƒ¨å¯¼èˆª&quot;</span>;</span><br><span class="line"><span class="comment">// list: [</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;å¤´éƒ¨å¯¼èˆª&#x27;, id: 1 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;è½®æ’­&#x27;, id: 2 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;åº•éƒ¨å¯¼èˆª&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">//   &#123; name: &#x27;é¡µè„š&#x27;, id: 3 &#125;,</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> index = list.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">id</span> === <span class="number">3</span>);</span><br><span class="line"><span class="comment">// index: 2</span></span><br><span class="line">list[index].<span class="property">name</span>; <span class="comment">// &#x27;åº•éƒ¨å¯¼èˆª&#x27;;</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>äºŒè€…éƒ½æ˜¯ç”¨æ¥æŸ¥æ‰¾æ•°ç»„å…ƒç´ ;</li><li><strong>find</strong> æ–¹æ³•è¿”å›æ•°ç»„ä¸­æ»¡è¶³ callback å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚å¦‚æœä¸å­˜åœ¨è¿”å› undefined;</li><li><strong>findIndex</strong> å®ƒè¿”å›æ•°ç»„ä¸­æ‰¾åˆ°çš„å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯å…¶å€¼ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å› -1;</li></ul><h3 id="å¯¹è±¡éå†"><a href="#å¯¹è±¡éå†" class="headerlink" title="å¯¹è±¡éå†"></a>å¯¹è±¡éå†</h3><h4 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">fun</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="number">2</span>: <span class="string">&quot;a&quot;</span>, <span class="number">1</span>: <span class="string">&quot;b&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i, <span class="string">&quot;:&quot;</span>, obj[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1: b</span></span><br><span class="line"><span class="comment">// 2: a</span></span><br><span class="line"><span class="comment">// fun : () =&gt; &#123;&#125; Object åŸå‹é“¾ä¸Šæ‰©å±•çš„æ–¹æ³•ä¹Ÿè¢«éå†å‡ºæ¥for (const i in obj) &#123;  if (Object.prototype.hasOwnProperty.call(obj, i)) &#123;      console.log(i, &#x27;:&#x27;, obj[i]);    &#125;&#125;</span></span><br><span class="line"><span class="comment">// name : a ä¸å±äºè‡ªèº«çš„å±æ€§å°†è¢« hasOwnProperty è¿‡æ»¤</span></span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><ul><li>ä½¿ç”¨ <strong>for in</strong> å¾ªç¯æ—¶ï¼Œè¦æ³¨æ„è¿”å›çš„æ˜¯æ‰€æœ‰èƒ½å¤Ÿé€šè¿‡å¯¹è±¡è®¿é—®çš„ã€å¯æšä¸¾çš„å±æ€§ï¼Œæ—¢åŒ…æ‹¬å­˜åœ¨äºå®ä¾‹ä¸­çš„å±æ€§ï¼Œä¹ŸåŒ…æ‹¬å­˜åœ¨äºåŸå‹ä¸­çš„å®ä¾‹ã€‚å¦‚æœåªéœ€è¦è·å–å¯¹è±¡å®ä¾‹ä¸­çš„å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ <strong>hasOwnProperty</strong> è¿›è¡Œè¿‡æ»¤;</li><li>ä½¿ç”¨æ—¶ï¼Œè¦ä½¿ç”¨ <strong>(const x in a)</strong> è€Œä¸æ˜¯ <strong>(x in a)</strong> ï¼Œåè€…å°†ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡;</li></ul><h4 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys"></a>Object.keys</h4><ul><li>ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å¯æšä¸¾çš„å±æ€§å€¼ï¼Œä½†ä¸åŒ…æ‹¬åŸå‹ä¸­çš„å±æ€§ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”±å±æ€§åç»„æˆçš„æ•°ç»„;</li><li>è¯¥å¯¹è±¡å¯ä»¥æ˜¯ æ•°ç»„<strong>Array</strong>ã€å¯¹è±¡<strong>Object</strong>ã€å­—ç¬¦ä¸²<strong>String</strong>;</li><li>å½“è¯¥å¯¹è±¡ä¸º å­—ç¬¦ä¸²<strong>String</strong> æ—¶ï¼Œåœ¨ ES5 é‡Œï¼Œå®ƒä¼šæŠ›å‡º TypeErrorã€‚åœ¨ ES2015 ä¸­ï¼Œéå¯¹è±¡çš„å‚æ•°å°†è¢«å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡;</li></ul><h4 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values"></a>Object.values</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> an_obj = &#123; <span class="number">100</span>: <span class="string">&quot;a&quot;</span>, <span class="number">2</span>: <span class="string">&quot;b&quot;</span>, <span class="number">7</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">values</span>(an_obj));</span><br><span class="line"><span class="comment">// [&#x27;b&#x27;, &#x27;c&#x27;, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure><ul><li>ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å¯æšä¸¾çš„å±æ€§å€¼ï¼Œä½†ä¸åŒ…æ‹¬åŸå‹ä¸­çš„å±æ€§ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”±å±æ€§å€¼ç»„æˆçš„æ•°ç»„;</li><li>å½“ obj çš„å¯ä»¥å€¼ä¸ºæ•°å­—æ—¶ï¼Œè¿”å›é¡ºåºæŒ‰ç…§æ•°å­—å¤§å°ä»å°åˆ°å¤§è¿”å›</li><li>åŒä¸Š</li></ul><h4 id="Object-entrise"><a href="#Object-entrise" class="headerlink" title="Object.entrise"></a>Object.entrise</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)); <span class="comment">// [ [&#x27;foo&#x27;, &#x27;bar&#x27;], [&#x27;baz&#x27;, 42] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="number">0</span>: <span class="string">&quot;a&quot;</span>, <span class="number">1</span>: <span class="string">&quot;b&quot;</span>, <span class="number">2</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)); <span class="comment">// [ [&#x27;0&#x27;, &#x27;a&#x27;], [&#x27;1&#x27;, &#x27;b&#x27;], [&#x27;2&#x27;, &#x27;c&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// array like object with random key ordering</span></span><br><span class="line"><span class="keyword">const</span> anObj = &#123; <span class="number">100</span>: <span class="string">&quot;a&quot;</span>, <span class="number">2</span>: <span class="string">&quot;b&quot;</span>, <span class="number">7</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(anObj)); <span class="comment">// [ [&#x27;2&#x27;, &#x27;b&#x27;], [&#x27;7&#x27;, &#x27;c&#x27;], [&#x27;100&#x27;, &#x27;a&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// non-object argument will be coerced to an object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="string">&quot;foo&quot;</span>)); <span class="comment">// [ [&#x27;0&#x27;, &#x27;f&#x27;], [&#x27;1&#x27;, &#x27;o&#x27;], [&#x27;2&#x27;, &#x27;o&#x27;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// iterate through key-value gracefully</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">5</span>, <span class="attr">b</span>: <span class="number">7</span>, <span class="attr">c</span>: <span class="number">9</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span> <span class="subst">$&#123;value&#125;</span>`</span>); <span class="comment">// &quot;a 5&quot;, &quot;b 7&quot;, &quot;c 9&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames"></a>Object.getOwnPropertyNames</h4><p>ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å¯æšä¸¾çš„å±æ€§å€¼ï¼Œä½†ä¸åŒ…æ‹¬åŸå‹ä¸­çš„å±æ€§ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”±å±æ€§åç»„æˆçš„æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">fun</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyNames</span>(obj));</span><br><span class="line"><span class="comment">// [&quot;a&quot;, &quot;b&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="é¢è¯•è€ƒç‚¹"><a href="#é¢è¯•è€ƒç‚¹" class="headerlink" title="é¢è¯•è€ƒç‚¹"></a>é¢è¯•è€ƒç‚¹</h4><ol><li>for ã€for in ã€forâ€¦of ã€ forEach çš„åŒºåˆ«</li><li>Object.keys ã€ Object.values</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºç”¨æˆ·æˆæƒåˆåŒå’æ”¹äº†</title>
      <link href="/post/80bad882.html"/>
      <url>/post/80bad882.html</url>
      
        <content type="html"><![CDATA[<p>ä¸ºäº†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå°ç¨‹åºå¹³å°åˆåŒå’æ”¹äº†ï¼Œæ­¤æ¬¡æ”¹åŠ¨åˆæ¶‰åŠåˆ°å“ªäº›apiå‘¢ï¼Ÿ</p><span id="more"></span><h4 id="è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹"><a href="#è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹" class="headerlink" title="è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹"></a>è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ¬¡åˆåšäº†å“ªäº›æ›´æ”¹</h4><p>æ—©åœ¨å»å¹´2æœˆä»½ï¼Œå°ç¨‹åºç¤¾åŒºé‡Œå°±å‘å¸ƒç›¸å…³å…¬å‘Š: <a href="https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801">ã€Šå°ç¨‹åºç™»å½•ã€ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ¥å£è°ƒæ•´è¯´æ˜ã€‹</a><br>å¤§è‡´å†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š</p><ol><li>å¢åŠ é€šè¿‡wx.loginæ¥å£è·å–çš„ç™»å½•å‡­è¯å¯ç›´æ¥æ¢å–unionID: <a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/login/auth.code2Session.html">auth.code2Sessionè¯´æ˜æ–‡æ¡£</a> <!-- éœ€è¦æ³¨æ„çš„æ˜¯: æ—©åœ¨[2018å¹´å®˜æ–¹å…¬å‘Š](https://developers.weixin.qq.com/community/develop/doc/000c2424654c40bd9c960e71e5b009?highline=getUserInfo)ä¸­å°±å·²ç»æœ‰äº†ä»¥ä¸‹è¯´æ˜ï¼š  > è‹¥ç”¨æˆ·æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œåˆ™å¯ä»¥ç”¨wx.login è·å–åˆ°çš„codeç›´æ¥æ¢åˆ°unionId --></li><li>åŸ<code>&lt;button open-type=&quot;getUserInfo&quot;/&gt;</code>è·å–ç”¨æˆ·çœŸå®ä¸ªäººä¿¡æ¯çš„èƒ½åŠ›å–æ¶ˆï¼Œè¿”å›åŒ¿åä¿¡æ¯ã€‚è·å–openIDä¸unionIDèƒ½åŠ›ä¸åšè°ƒæ•´ã€‚<!-- éœ€è¦æ³¨æ„çš„æ˜¯: æ—©åœ¨[2018å¹´å®˜æ–¹å…¬å‘Š](https://developers.weixin.qq.com/community/develop/doc/000c2424654c40bd9c960e71e5b009?highline=getUserInfo)ä¸­å°±å·²ç»æœ‰äº†ä»¥ä¸‹è¯´æ˜ï¼š  > è‹¥ç”¨æˆ·æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œåˆ™å¯ä»¥ç”¨wx.login è·å–åˆ°çš„codeç›´æ¥æ¢åˆ°unionId --></li><li>æ–°å¢getUserProfileæ¥å£ï¼Œ<code>&lt;button bindtap=&quot;getUserProfile&quot;&gt;&lt;/button&gt;</code>è§¦å‘ï¼Œå¯è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¤´åƒã€æ˜µç§°ã€æ€§åˆ«ï¼‰ï¼Œç”¨æˆ·åŠ å¯†æ•°æ®ï¼Œæ¯æ¬¡è§¦å‘éƒ½ä¼šå¼¹æ¡†ã€‚</li></ol><font size=2>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæˆªæ­¢2021.04.09æ—¥ï¼Œ[wx.getUserProfile](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html) åœ¨å¼€å‘è€…å·¥å…·è°ƒè¯•ä¸­ï¼ŒåŸºç¡€åº“`2.15.0`åŠä»¥ä¸‹ç‰ˆæœ¬åªè¿”å›ç”¨æˆ·ä¿¡æ¯ï¼Œåœ¨åŸºç¡€åº“`2.16.0`ç‰ˆæœ¬å¢åŠ è¿”å›`encryptedData`ç­‰ç”¨æˆ·åŠ å¯†æ•°æ®ï¼Œæ‰€ä»¥å¼€å‘è€…ä¸€å®šè¦è®°å¾—å°†åŸºç¡€åº“ç‰ˆæœ¬è®¾ç½®ä¸º2.16.0</font><h4 id="getUserProfileä½¿ç”¨"><a href="#getUserProfileä½¿ç”¨" class="headerlink" title="getUserProfileä½¿ç”¨"></a>getUserProfileä½¿ç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wxml æ–¹æ³•åç§°éšæ„ï¼Œä¸€å®šè¦ç”¨buttonæŒ‰é’®è§¦å‘</span></span><br><span class="line">&lt;button bindtap=<span class="string">&quot;getUserProfile&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// js</span></span><br><span class="line"><span class="title function_">getUserProfile</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">      <span class="attr">desc</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œåç»­ä¼šå±•ç¤ºåœ¨å¼¹çª—ä¸­ï¼Œè¯·è°¨æ…å¡«å†™</span></span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">userInfo</span>: res.<span class="property">userInfo</span> <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å…¼å®¹å®ç°"><a href="#å…¼å®¹å®ç°" class="headerlink" title="å…¼å®¹å®ç°"></a>å…¼å®¹å®ç°</h4><p>é€šè¿‡ä¸Šé¢çš„è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä»¥ä¸‹ï¼š <code>wx.login + wx.getUserProfile == wx.getUserInfo</code><br>ç”±äºç”¨æˆ·å¾®ä¿¡ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä½ç‰ˆæœ¬çš„å¾®ä¿¡ä¹Ÿä¸æ”¯æŒwx.getUserProfileï¼ˆ7.0.9ä»¥ä¸Šæ”¯æŒï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é’ˆå¯¹è¿™ç§æƒ…å†µåšå‡ºå…¼å®¹å¤„ç†ï¼Œé€šè¿‡åˆ¤æ–­ wx.getUserProfile æ˜¯å¦å­˜åœ¨æ¥å†³å®šé‡‡ç”¨å“ªç§æˆæƒæ–¹æ¡ˆ<br><font size=2>wxmlä»£ç å¦‚ä¸‹</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;container&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;userinfo&quot;&gt;</span><br><span class="line">    &lt;block wx:if=&quot;&#123;&#123;!hasUserInfo&#125;&#125;&quot;&gt;</span><br><span class="line">      &lt;button wx:if=&quot;&#123;&#123;canIUseGetUserProfile&#125;&#125;&quot; bindtap=&quot;getUserProfile&quot;&gt; è·å–å¤´åƒæ˜µç§° &lt;/button&gt;</span><br><span class="line">      &lt;button wx:else open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;getUserInfo&quot;&gt; è·å–å¤´åƒæ˜µç§° &lt;/button&gt;</span><br><span class="line">    &lt;/block&gt;</span><br><span class="line">    &lt;block wx:else&gt;</span><br><span class="line">      &lt;image bindtap=&quot;bindViewTap&quot; class=&quot;userinfo-avatar&quot; src=&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot; mode=&quot;cover&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;text class=&quot;userinfo-nickname&quot;&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt;</span><br><span class="line">    &lt;/block&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p><font size=2>jsä»£ç å¦‚ä¸‹</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    userInfo: &#123;&#125;,</span><br><span class="line">    hasUserInfo: false,</span><br><span class="line">    canIUseGetUserProfile: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad() &#123;</span><br><span class="line">    if (wx.getUserProfile) &#123;</span><br><span class="line">      this.setData(&#123;</span><br><span class="line">        canIUseGetUserProfile: true</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getUserProfile(e) &#123;</span><br><span class="line">    // æ¨èä½¿ç”¨wx.getUserProfileè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå¼€å‘è€…æ¯æ¬¡é€šè¿‡è¯¥æ¥å£è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯å‡éœ€ç”¨æˆ·ç¡®è®¤</span><br><span class="line">    // å¼€å‘è€…å¦¥å–„ä¿ç®¡ç”¨æˆ·å¿«é€Ÿå¡«å†™çš„å¤´åƒæ˜µç§°ï¼Œé¿å…é‡å¤å¼¹çª—</span><br><span class="line">    wx.getUserProfile(&#123;</span><br><span class="line">      desc: &#x27;ç”¨äºå®Œå–„ä¼šå‘˜èµ„æ–™&#x27;, // å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œåç»­ä¼šå±•ç¤ºåœ¨å¼¹çª—ä¸­ï¼Œè¯·è°¨æ…å¡«å†™</span><br><span class="line">      success: (res) =&gt; &#123;</span><br><span class="line">        console.log(res)</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          userInfo: res.userInfo,</span><br><span class="line">          hasUserInfo: true</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  getUserInfo(e) &#123;</span><br><span class="line">    // ä¸æ¨èä½¿ç”¨getUserInfoè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œé¢„è®¡è‡ª2021å¹´4æœˆ13æ—¥èµ·ï¼ŒgetUserInfoå°†ä¸å†å¼¹å‡ºå¼¹çª—ï¼Œå¹¶ç›´æ¥è¿”å›åŒ¿åçš„ç”¨æˆ·ä¸ªäººä¿¡æ¯</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      userInfo: e.detail.userInfo,</span><br><span class="line">      hasUserInfo: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºç”¨æˆ·å¤´åƒã€æ˜µç§°ç­‰ä¿¡æ¯ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹åˆ—æ–¹å¼è¿›è¡Œå¤„ç†</p><ol><li>å‰ç«¯è°ƒç”¨wx.getUserProfileåï¼Œå°†ç”¨æˆ·ä¿¡æ¯ç¼“å­˜åœ¨æœ¬åœ°</li><li>å‰ç«¯è°ƒç”¨wx.getUserProfileåï¼Œå°†ç”¨æˆ·ä¿¡æ¯å‘é€ç»™åç«¯ï¼Œä¸ç”¨æˆ·ä¿¡æ¯ç»‘å®šåœ¨ä¸€èµ·<br><font size="2">æ³¨ï¼šåœ¨æ­¤å¤„æ¨èæ–¹æ³•2ï¼Œè¿™æ ·ä¸€æ¥ç”¨æˆ·åœ¨pcç«¯æ‰“å¼€å°ç¨‹åºä¹Ÿå¯ä»¥ç›´æ¥ä»åç«¯è·å–å¤´åƒï¼Œè€Œä¸éœ€è¦å†æ¬¡æˆæƒ</font></li></ol><h4 id="åæ§½"><a href="#åæ§½" class="headerlink" title="åæ§½"></a>åæ§½</h4><ul><li>æŒ‰ç…§ç›®å‰å®˜æ–¹çš„æ–‡æ¡£è¯´æ˜å’Œå…¬å‘Šï¼Œwx.getUserProfileå’Œwx.getUserInfoçš„åŒºåˆ«åªåœ¨äºå¼¹æ¡†è§¦å‘çš„é¢‘ç‡ï¼Œå‰è€…è§¦å‘çš„æ—¶å€™æ¯æ¬¡éƒ½å¼¹æ¡†ï¼Œåè€…åªä¼šå¼¹æ¡†ä¸€æ¬¡ï¼Œå®åœ¨æ˜¯ä¸ç†è§£ä¸ºä»€ä¹ˆè¦æ–°å¢ä¸€ä¸ªAPIè€Œä¸æ˜¯å¯¹ç°æœ‰çš„è¿›è¡Œä¿®æ”¹</li><li>å®˜æ–¹è¯´æ˜åœ¨4.13å·åŠä¹‹åæäº¤çš„æ­£å¼ç‰ˆå°ç¨‹åºä¸­ï¼Œå°†æ”¯æŒwx.getUserProfileï¼Œwx.getUserInfoå°†è¿”å›åŒ¿åç”¨æˆ·ä¿¡æ¯ï¼Œä½†æ˜¯ï¼Œåœ¨4.2&#x2F;3å·ï¼Œå¾ˆå¤šçº¿ä¸Šçš„å°ç¨‹åºwx.getUserInfoä¹Ÿè¿”å›äº†åŒ¿åæ¶ˆæ¯ï¼Œå¯¼è‡´ç¤¾åŒºå¾ˆå¤šå¼€å‘è€…åé¦ˆçº¿ä¸Šå°ç¨‹åºæ— æ³•è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ä½¿ç”¨gitè¿›è¡Œä»£ç å›æ»š</title>
      <link href="/post/423abe9e.html"/>
      <url>/post/423abe9e.html</url>
      
        <content type="html"><![CDATA[<p>gitå›æ»šä¸»è¦åˆ†ä¸º<strong>æœ¬åœ°å›æ»š</strong>ã€<strong>è¿œç¨‹å›æ»š</strong></p><p>åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œæœª <code>git push</code> ä¹‹å‰æˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ <code>git reset</code> è¿›è¡Œå›æ»šï¼Œå½“ç„¶ï¼Œå¯¹äºè¿œç¨‹commitä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼Œä½†ä¸æ¨èï¼Œå› ä¸ºå¯èƒ½ä¼šå†²æ‰å…¶ä»–äººçš„ <code>commit</code> è®°å½•ï¼Œè¿œç¨‹ä¸€èˆ¬ä½¿ç”¨ <code>git revert</code> è¿›è¡Œå›æ»šï¼Œä¸‹é¢å°±ä¸¤ç§å›æ»šæ–¹å¼è¿›è¡Œå…·ä½“è¯´æ˜ã€‚</p><h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><p>åœ¨ä»‹ç» <code>git reset</code> ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹gitä¸­çš„åŒºåŸŸåˆ’åˆ†ï¼š</p><ul><li>å·¥ä½œåŒºï¼ˆWorkSpaceï¼‰ï¼šå¼€å‘çš„ç¯å¢ƒ</li><li>æš‚å­˜åŒºï¼ˆStage&#x2F;Indexï¼‰ï¼šä½¿ç”¨ <code>git add</code> ç›¸å…³å‘½ä»¤å°†å·¥ä½œåŒºçš„ä»£ç æäº¤åˆ°æš‚å­˜åŒº</li><li>æœ¬åœ°åº“ï¼ˆLocal Repoï¼‰ï¼šä½¿ç”¨ <code>git commit</code> ç›¸å…³å‘½ä»¤å°†å·¥ä½œåŒºçš„ä»£ç æäº¤åˆ°æœ¬åœ°åº“</li><li>è¿œç¨‹åº“ï¼ˆRemoteï¼‰ï¼šä½¿ç”¨ <code>git pu sh</code> ç›¸å…³å‘½ä»¤å°†æœ¬åœ°åº“æ¨é€åˆ°è¿œç¨‹<br>å€Ÿç”¨ç½‘ä¸Šçš„ä¸€å¼ å›¾ç‰‡è¿›è¡Œè¯´æ˜<br><img src="https://guozhigq.github.io/img/git_workspace.png" alt="git workSpace"></li></ul><p>åœ¨ä½¿ç”¨ <code>git reset</code> ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ¸…æ¥š <code>git reset</code> ç­‰åŒäº <code>git reset --mixed</code> ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ <code>git reset --hard</code> ã€<code>git reset --soft</code> </p><p><code>git reset</code> æ˜¯å¯¹HEADæŒ‡é’ˆçš„æŒ‡å‘è¿›è¡Œæ›´æ”¹ï¼Œå†å²è®°å½•ä¸­ä¸ä¼šå‡ºç°æ”¾å¼ƒçš„æäº¤è®°å½•</p><ul><li><code>git reset --hard</code> å·¥ä½œåŒºã€æš‚å­˜åŒºã€æœ¬åœ°ä»“åº“å›æ»šåˆ°å¯¹åº”commit-id</li><li><code>git reset --mixed</code>  å·¥ä½œåŒºä»£ç ä¸å—å½±å“ï¼Œä½†æ˜¯æš‚å­˜åŒºã€æœ¬åœ°ä»“åº“åŒºçš„ä»£ç å›æ»šåˆ°å¯¹åº”çš„commit-id</li><li><code>git reset --soft</code> å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä»£ç ä¸ä¼šå—åˆ°å½±å“ï¼Œæœ¬åœ°ä»“åº“åŒºçš„ä»£ç å›æ»šåˆ°å¯¹åº”çš„commit-id</li></ul><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸‰è€…å¯¹äºgitåŒºåŸŸçš„å½±å“èŒƒå›´ä¾æ¬¡é€’å‡</p><p>æ³¨æ„ï¼š<code>git reset</code> å›æ»šä¸ä¼šå¯¹è¿œç¨‹åˆ†æ”¯äº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥åœ¨å›æ»šå®Œæˆè¿›è¡Œ <code>git push</code> çš„æ—¶å€™ï¼Œä¼šæç¤ºæœ¬åœ°åˆ†æ”¯æ¯”è¾ƒæ—§ï¼Œéœ€è¦å…ˆä½¿ç”¨ <code>git pull</code> æ‹‰å–è¿œç¨‹åˆ†æ”¯ï¼Œç”±äºæˆ‘ä»¬çš„ç›®çš„æ˜¯å›æ»šï¼Œæ‰€ä»¥å½“ç„¶ä¸éœ€è¦å†æ‹‰å–è¿œç¨‹åˆ†æ”¯äº†ï¼Œæ­¤æ—¶ï¼Œç›´æ¥ä½¿ç”¨ <code>git push -f</code> å¼ºåˆ¶æ¨é€æœ¬åœ°å›æ»šåçš„ä»£ç è‡³è¿œç¨‹ã€‚</p><ul><li>git reset â€“hard <commit_id>  # å›åˆ°å…¶ä¸­ä½ æƒ³è¦çš„æŸä¸ªç‰ˆ</li><li>git reset â€“hard HEAD^  # å›åˆ°æœ€æ–°çš„ä¸€æ¬¡æäº¤</li><li>git reset HEAD^  # æ­¤æ—¶ä»£ç ä¿ç•™ï¼Œå›åˆ° git add ä¹‹å‰</li></ul><p>æš‚å­˜åŒºå›æ»šæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>git reset</code></p><p>git reset å¯ä»¥å°†æš‚å­˜åŒºçš„ä»£ç å›æ»šåˆ°å·¥ä½œåŒºã€‚å½“æˆ‘ä»¬ä½¿ç”¨ <code>git add</code> ç›¸å…³å‘½ä»¤å°†ä¿®æ”¹å†…å®¹æäº¤åˆ°æš‚å­˜åŒºï¼Œæ­¤æ—¶åˆåæ‚”äº†ï¼Œå¯ä»¥ä½¿ç”¨ <code>git reset HEAD . </code>æˆ–è€… <code>git reset HEAD a.txt</code> å°†ä»£ç å›æ»šåˆ°æœª <code>add</code> ä¹‹å‰ã€‚</p><h3 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h3><p><code>git revert</code> ç†è§£ä¸ºå›æ»šä½†ç”±åˆä¸æ˜¯å›æ»šï¼Œç­‰äºæ˜¯é‡æ–°commitäº†ä¸€ä¸ªä¿®æ”¹ï¼ŒæŠµæ¶ˆæ‰ <code>git revert B</code> ä¸­æŒ‡å®šçš„åˆ†æ”¯ã€‚<br>æ¯”å¦‚ï¼šæˆ‘ä»¬commitäº†ä¸‰ä¸ªç‰ˆæœ¬Aã€Bã€Cï¼Œç”±äºæŸäº›åŸå› éœ€è¦æ’¤é”€ <code>B</code> ä¿ç•™<code>C</code> çš„æ›´æ”¹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨ <code>git revert B</code> å‘½ä»¤æ¥ååš <code>B</code> ï¼Œç”Ÿæˆ <strong>æ–°çš„ç‰ˆæœ¬</strong>  <code>D</code> ï¼Œç‰ˆæœ¬ <code>D</code> ä¸­ä¿ç•™äº† <code>C</code> çš„ä»£ç ï¼Œ <code>B</code> çš„ä¿®æ”¹è¢«é‡ç½®ã€‚</p><h4 id="å…¶ä»–çš„å›æ»šæ–¹å¼"><a href="#å…¶ä»–çš„å›æ»šæ–¹å¼" class="headerlink" title="å…¶ä»–çš„å›æ»šæ–¹å¼"></a>å…¶ä»–çš„å›æ»šæ–¹å¼</h4><h4 id="å·¥ä½œåŒº"><a href="#å·¥ä½œåŒº" class="headerlink" title="å·¥ä½œåŒº"></a>å·¥ä½œåŒº</h4><p>å·¥ä½œåŒºå›æ»šï¼Œä½¿ç”¨ <code>git checkout</code></p><p>æ²¡é”™ git checkout ä¹Ÿå¯ä»¥å›æ»šä»£ç ï¼ˆæˆ–è€…å«â€œèˆå¼ƒâ€ï¼‰</p><ul><li>git checkout â€“ a.txt   # ä¸¢å¼ƒæŸä¸ªæ–‡ä»¶ï¼Œæˆ–è€…</li><li>git checkout â€“ .       # ä¸¢å¼ƒå…¨éƒ¨<br>å¦‚æœæˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œå¢ã€åˆ ã€æ”¹ï¼Œæ­¤æ—¶åˆä¸æƒ³è¦äº†ï¼Œå¯ä»¥ä½¿ç”¨ <code>git checkout -- .</code></li></ul></br><p>å½“ç„¶ï¼Œè¿˜æ˜¯æ¨èä½¿ç”¨å›¾å½¢åŒ–å·¥å…·ï¼Œæ›´é¡ºæ‰‹ï¼Œè€Œä¸”ä¸å®¹æ˜“å‡ºé”™ã€‚<br>å›æ»šè¿œç¨‹ä»“åº“å‰è®°å¾—æå‰é€šçŸ¥å›¢é˜Ÿå…¶ä»–æˆå‘˜ï¼ï¼ï¼</p><!-- é€šè¿‡git checkout <commit-id> åˆ‡æ¢HEADæŒ‡å‘ï¼ŒæŸ¥çœ‹ä¹‹å‰æäº¤çš„æ›´æ”¹ï¼ˆåªè¯»çŠ¶æ€ï¼‰ï¼Œé€šè¿‡git checkout main/masteråˆ‡æ¢å›æ­£åœ¨è¿›è¡Œçš„ä¿®æ”¹ -->]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä»£ç è§„èŒƒ</title>
      <link href="/post/e75acacf.html"/>
      <url>/post/e75acacf.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚ä½†æ˜¯åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œå¾ˆå¤šä¸è§„èŒƒçš„ä½¿ç”¨ï¼Œä½¿å¾— Gitf åˆ†æ”¯æ··ä¹±ï¼Œä»£ç å†²çªéš¾ä»¥è§£å†³ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹ Git æäº¤è§„èŒƒåšä¸€äº›äº†è§£ã€‚</p><span id="more"></span><h5 id="åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š"><a href="#åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š" class="headerlink" title="åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š"></a>åœ¨å¤šäººå›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œå…±åŒå¯¹å¼€å‘ç®¡ç†ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šè§„èŒƒéœ€è¦æˆ‘ä»¬ä¸¥æ ¼æ‰§è¡Œï¼š</h5><ul><li>æ‹‰å–æœ€æ–°çš„ develop åˆ†æ”¯åˆ°æœ¬åœ°</li><li>åŸºäºæœ€æ–°çš„ develop åˆ†æ”¯æ–°å»ºä½ è‡ªå·±çš„æœ¬åœ°åˆ†æ”¯</li><li>ä¿®æ”¹ä»£ç åï¼Œè¿›è¡Œ commit å’Œ push</li><li>åˆ‡æ¢åˆ° develop åˆ†æ”¯å¹¶æ‹‰å–æœ€æ–°çš„ develop åˆ†æ”¯åˆ°æœ¬åœ°åˆ†æ”¯</li><li>åˆ‡æ¢ä¼šä½ è‡ªå·±çš„æœ¬åœ°åˆ†æ”¯ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ git rebase develop å°†ä½ çš„åˆ†æ”¯å˜æ›´åˆ°æœ€æ–°çš„ develop åˆ†æ”¯</li><li>æ‰§è¡Œ git push -f å¼ºè¡Œæ¨é€ä½ å˜æ›´åçš„åˆ†æ”¯</li><li>åœ¨ Github ä¸Šæ–°å»º Pull Request</li></ul><h3 id="commitè§„èŒƒ"><a href="#commitè§„èŒƒ" class="headerlink" title="commitè§„èŒƒ"></a>commitè§„èŒƒ</h3><p>Commit è§„èŒƒé‡‡ç”¨å¸¸ç”¨çš„ Angular å›¢é˜Ÿæ‰€ä½¿ç”¨çš„è§„èŒƒï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;type&gt;&lt;scope&gt;: &lt;subject&gt;</span><br><span class="line">&lt;ç©ºè¡Œ&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ç©ºè¡Œ&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure><h4 id="typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰"><a href="#typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰"></a>typeè§„åˆ™ï¼ˆå¿…å¡«ï¼‰</h4><p>type ä»£è¡¨æœ¬æ¬¡commit çš„ç±»å‹ï¼Œæœ‰ä¸”ä»…æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><ul><li><strong>feat</strong> - åŠŸèƒ½æ€§æ›´æ–°</li><li><strong>fix</strong> - bugä¿®å¤</li><li><strong>style</strong> - æ”¹å˜ä»£ç æ ¼å¼ï¼ˆå¦‚åˆ é™¤ç©ºè¡Œã€æ ¼å¼åŒ–ä»£ç ã€å»é™¤ä¸å¿…è¦çš„åˆ†å·ç­‰ç­‰ï¼‰</li><li><strong>refactor</strong> - æ—¢ä¸æ˜¯åŠŸèƒ½æ›´æ–°ä¹Ÿä¸æ˜¯ bug ä¿®å¤çš„æ›´æ”¹ï¼ˆå»ºè®®å¯¹ä»£ç è¿›è¡Œé‡æ„çš„æ—¶å€™ä½¿ç”¨ï¼‰</li><li><strong>perf</strong> - ä»£ç æ”¹å˜æé«˜äº†æ€§èƒ½</li><li><strong>test</strong> - æ·»åŠ æµ‹è¯•ç”¨ä¾‹æˆ–è€…ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹</li><li><strong>build</strong> - ç”±æ‰“åŒ…å·¥å…·é€ æˆçš„æ”¹å˜ï¼ˆå¦‚gulpã€webpackç¼–è¯‘æ–‡ä»¶ï¼‰</li><li><strong>chore</strong> - æ—¢ä¸æ˜¯æºç çš„ä¿®æ”¹ï¼Œä¹Ÿä¸æ˜¯æµ‹è¯•ç”¨ä¾‹çš„ä¿®æ”¹ï¼ˆä¿®æ”¹é¡¹ç›®ç›¸å…³é…ç½®æ—¶å¯ä»¥ä½¿ç”¨ï¼‰</li><li><strong>revert</strong> - æ’¤é”€ä¹‹å‰çš„æäº¤</li></ul><h4 id="scope-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"><a href="#scope-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="scope è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"></a>scope è§„åˆ™ï¼ˆå¿…å¡«ï¼‰</h4><p>scope ä»£è¡¨æœ¬æ¬¡ commit çš„å½±å“èŒƒå›´ï¼Œæš‚å®šè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>æœ¬æ¬¡ commit ä¿®æ”¹çš„ç»„ä»¶</li><li>æœ¬æ¬¡ commit ä¿®æ”¹çš„æ–‡ä»¶</li><li>æœ¬æ¬¡ commit ä¿®æ”¹çš„æ–‡ä»¶å¤¹</li></ul><blockquote><p>æ³¨æ„ï¼š</p><ul><li>é€‰å–æ—¶ä»ä¸Šå¾€ä¸‹åŒ¹é…</li><li>ç»„ä»¶åç§°åº”ä½¿ç”¨å¤§å†™å­—å­—æ¯å¼€å¤´ï¼Œå¤šä¸ªå•è¯æ¯ä¸ªå•è¯éƒ½ä»¥å¤§å†™å¼€å¤´</li><li>æ–‡ä»¶ååº”åŒ…å«å®Œæ•´åç¼€ï¼Œå¦‚ index.jsã€.eslintrc.json</li></ul></blockquote><h4 id="subject-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"><a href="#subject-è§„åˆ™ï¼ˆå¿…å¡«ï¼‰" class="headerlink" title="subject è§„åˆ™ï¼ˆå¿…å¡«ï¼‰"></a>subject è§„åˆ™ï¼ˆå¿…å¡«ï¼‰</h4><p>ç”¨ä¸€å¥ç®€çŸ­çš„è¯æè¿°æœ¬æ¬¡ä¿®æ”¹çš„å†…å®¹ï¼Œ<strong>ä¸è¦è¶…è¿‡30ä¸ªæ±‰å­—ï¼Œä»¥åŠ¨è¯å¼€å¤´</strong></p><p>å»ºè®®é€‰ç”¨å¦‚ä¸‹åŠ¨è¯ï¼š</p><ul><li>æ–°å¢ï¼ˆç»„ä»¶ã€å±æ€§ã€äº‹ä»¶ã€APIï¼‰</li><li>åˆ é™¤</li><li>ä¿®æ­£</li><li>ä¿®å¤</li><li>ä¿®æ”¹</li></ul><p>æ­£ç¡®ç¤ºä¾‹ï¼š</p><ul><li>æ–°å¢ Collapse ç»„ä»¶</li><li>æ–°å¢ top å±æ€§</li><li>åˆ é™¤ color å±æ€§</li><li>ä¿®å¤ direction å±æ€§ä¸ç”Ÿæ•ˆçš„é—®é¢˜</li><li>ä¿®æ­£ column å±æ€§æ‹¼å†™</li></ul><blockquote><p>æ³¨æ„ï¼š</p><ul><li>subject åº”è¯¥ä»”ç»†æ–Ÿé…Œï¼Œfix å’Œ feat ç±»å‹çš„ commit çš„ subject å°†ä¼šå‡ºç°åœ¨æ›´æ–°æ—¥å¿—ä¸­ï¼Œ</li><li>æ‰€ä»¥ä¹¦å†™æ—¶åº”è€ƒè™‘è¿™å¥è¯å‡ºç°åœ¨æ›´æ–°æ—¥å¿—ä¸­æ˜¯å¦åˆé€‚</li><li>subject ä¸­ä¸è¦åŒ…å«ç»„ä»¶åæˆ–è€…æ–‡ä»¶åï¼Œå› ä¸º scope ä¸­å·²æœ‰å¯¹åº”åç§°</li></ul></blockquote><h4 id="body-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"><a href="#body-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰" class="headerlink" title="body è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"></a>body è§„åˆ™ï¼ˆé€‰å¡«ï¼‰</h4><p>å¦‚æœ subject æ— æ³•å¯¹æœ¬æ¬¡ commit è¿›è¡Œæ¸…æ¥šçš„é˜é‡Šï¼Œåˆ™åœ¨ body ä¸­è¿›è¡Œè¡¥å……è¯´æ˜ã€‚</p><p>å»ºè®®å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>ä¸ºä»€ä¹ˆè¿›è¡Œæœ¬æ¬¡ä¿®æ”¹</li><li>æœ¬æ¬¡ä¿®æ”¹äº†å“ªäº›å†…å®¹</li><li>ä¿®æ”¹åçš„å½±å“æœ‰å“ªäº›</li></ul><blockquote><p>body éœ€è¦æ³¨æ„æ¢è¡Œé—®é¢˜ï¼Œä¸è¦å†™åœ¨ä¸€è¡Œä¸æ¢è¡Œï¼Œå»ºè®®åœ¨50ä¸ªå­—ä»¥å†…è¿›è¡Œæ–­å¥æ¢è¡Œã€‚</p></blockquote><h4 id="footer-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"><a href="#footer-è§„åˆ™ï¼ˆé€‰å¡«ï¼‰" class="headerlink" title="footer è§„åˆ™ï¼ˆé€‰å¡«ï¼‰"></a>footer è§„åˆ™ï¼ˆé€‰å¡«ï¼‰</h4><p>footer ä¸­åªå¡«å†™ä¸¤ç§å†…å®¹ï¼š</p><ul><li><p>è¿™æ¬¡ commit å’ŒæŸä¸ª issue ç›¸å…³è”ï¼Œæäº¤åèƒ½å…³é—­è¯¥ issueï¼Œåˆ™å¡«å†™ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">close #<span class="number">748</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fix #<span class="number">745</span></span><br></pre></td></tr></table></figure></li><li><p>è¿™æ¬¡commitæœ‰ä¸å…¼å®¹ä¸Šä¸ªç‰ˆæœ¬çš„ä»£ç ï¼Œåˆ™ä»¥ BREAKING CHANGE: å¼€å¤´å¡«å†™ä¸å…¼å®¹ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">BREAKING</span> <span class="attr">CHANGE</span>: <span class="title class_">Message</span>ç»„ä»¶topå±æ€§å•ä½ç”±pxæ”¹ä¸ºrpx</span><br></pre></td></tr></table></figure><h4 id="Commit-ç¤ºä¾‹"><a href="#Commit-ç¤ºä¾‹" class="headerlink" title="Commit ç¤ºä¾‹"></a>Commit ç¤ºä¾‹</h4><p>ä¸€ä¸ªå®Œæ•´é—ºæˆ¿ä¸”æ­£ç¡®çš„ Commit ç¤ºä¾‹å¦‚ä¸‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fix</span>(<span class="title class_">NoticeBar</span>)ï¼šä¿®æ”¹topå±æ€§å•ä½ä¸ºrpx</span><br><span class="line"></span><br><span class="line"><span class="title class_">NoticeBar</span>ç»„ä»¶çš„topå±æ€§å•ä½ä¹‹å‰ä¸ºpxï¼Œä¼šå‡ºç°æ— æ³•è‡ªé€‚åº”çš„é—®é¢˜ã€‚</span><br><span class="line">æ›´æ”¹ä¸ºrpxåå¯å¯¹å±å¹•è¿›è¡Œè‡ªé€‚åº”ã€‚</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">BREAKING</span> <span class="attr">CHANGE</span>: <span class="title class_">Notice</span>-<span class="title class_">Bar</span>ç»„ä»¶topå±æ€§å•ä½ç”±pxæ”¹ä¸ºrpx</span><br><span class="line"></span><br><span class="line"><span class="title class_">Close</span> #<span class="number">745</span></span><br></pre></td></tr></table></figure><p>æ¨èä½¿ç”¨ commit è§„èŒƒä¿¡æ¯ç”Ÿæˆæ’ä»¶</p><blockquote><p>æ¨è commit è§„èŒƒä¿¡æ¯ç”Ÿæˆæ’ä»¶</p><ul><li>WebStorm - Git Commit Template</li><li>Vs Code - Commit Tagger</li></ul></blockquote><h4 id="é”™è¯¯ç¤ºä¾‹"><a href="#é”™è¯¯ç¤ºä¾‹" class="headerlink" title="é”™è¯¯ç¤ºä¾‹"></a>é”™è¯¯ç¤ºä¾‹</h4><ol><li>subject æè¿°ä¸­å‡ºç°ç»„ä»¶åç§° <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">feat</span>(<span class="title class_">Button</span>): <span class="title class_">Button</span> ç»„ä»¶æ–°å¢ size å±æ€§</span><br></pre></td></tr></table></figure> å› typeï¼ˆæ‹¬å·ä¸­çš„å†…å®¹ï¼‰å·²ç»æŒ‡å®šäº†ç»„ä»¶ï¼Œæ‰€ä»¥ subject æè¿°ä¿¡æ¯ä¸­æ— éœ€å†æŒ‡æ˜ç»„ä»¶</li><li>å•è¯æœªæ·»åŠ ç©ºæ ¼ <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">feat</span>(<span class="title class_">Button</span>): æ–°å¢sizeå±æ€§</span><br></pre></td></tr></table></figure></li><li>featã€fix ç±»å‹éœ€è¦æ…é‡ä½¿ç”¨ <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">feat</span>(<span class="title class_">Card</span>): æ›´æ–° validator æ ¡éªŒå™¨æ ¡éªŒè§„åˆ™</span><br></pre></td></tr></table></figure> å› ä¸º feat å’Œ fix ç±»å‹çš„ commit ä¿¡æ¯ä¼šå‡ºç°åœ¨ changelog ä¸­ï¼Œæ‰€ä»¥è¦ä¿è¯è¿™æ¡ä¿¡æ¯æ˜¯é¢å‘ç”¨æˆ·çš„ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œå› ä¸º validator ä»…æ˜¯æˆ‘ä»¬è‡ªå·±å†…éƒ¨ä½¿ç”¨ï¼Œå¹¶ä¸é¢å‘ç”¨æˆ·ï¼Œæ‰€ä»¥ç”¨æˆ·å¹¶ä¸å…³å¿ƒè¿™ä¸ªæ ¡éªŒå™¨çš„æ–°å¢åŠŸèƒ½ã€‚å»ºè®®ä½¿ç”¨ chore ä»£æ›¿æ­¤å¤„çš„ featï¼ˆchore çš„æ„æ€æ˜¯çç¢çš„äº‹åŠ¡ï¼‰</li></ol><h4 id="å…¶ä»–äº‹é¡¹"><a href="#å…¶ä»–äº‹é¡¹" class="headerlink" title="å…¶ä»–äº‹é¡¹"></a>å…¶ä»–äº‹é¡¹</h4><p>ä¸€ä¸ªcommitåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ„ä¹‰çš„commit</p><p>æœ‰æ„ä¹‰çš„å®šä¹‰å¦‚ä¸‹ï¼š </p><ul><li>æ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½æˆ–ç»„ä»¶</li><li>ä¿®å¤äº†ä¸€ä¸ªbug</li><li>è§£å†³äº†ä¸€ä¸ªissue</li><li>é‡æ„äº†æŸä¸ªç»„ä»¶æˆ–æ–‡ä»¶</li><li>æ”¹å–„äº†ç°æœ‰ä»£ç çš„æ„å»ºæµç¨‹æˆ–é£æ ¼</li></ul><p>æ— æ„ä¹‰çš„å®šä¹‰å¦‚ä¸‹ï¼š </p><ul><li>ä¸´æ—¶å·¥ä½œè¿›åº¦ä¿å­˜</li><li>è¯¯æäº¤çš„ commit</li><li>commit ä¿¡æ¯ä¸è§„èŒƒæˆ–ç¼ºå¤±</li><li>subject æ— æ³•å‡†ç¡®æè¿°æ­¤æ¬¡ commit</li></ul><blockquote><p>æ³¨æ„ï¼šä¸€ä¸ª commit çš„æäº¤åº”è¯¥ä¿è¯ä»£ç çš„å¯è¿è¡Œæ€§å’Œå®Œæ•´æ€§ã€‚</p><ul><li>å¯è¿è¡Œæ€§ï¼šcommit æäº¤åï¼Œè¿è¡Œä»£ç ä¸èƒ½æŠ¥é”™</li><li>å®Œæ•´æ€§ï¼šcommit æäº¤åï¼Œå½“å‰ä»£ç ä¸­ä¸èƒ½åŒ…å«ç¼ºå¤±çš„åŠŸèƒ½ï¼ˆå¦‚æŸä¸ªåŠŸèƒ½åšäº†ä¸€åŠå°±æäº¤ï¼‰</li></ul></blockquote></li></ul><!-- #### æ‰©å±•é˜…è¯»+ [è™šæ‹ŸDOMæ¸²æŸ“åˆ°çœŸå®DOMçš„å‘¨æœŸä¸ºå¤šä¹…]('')+ [è¿™ä¸ªæ¸²æŸ“å‘¨æœŸåˆæ˜¯ç”±ä»€ä¹ˆæ¥å†³å®šçš„]('') -->]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰åç«¯è·¯ç”±çš„åŒºåˆ«</title>
      <link href="/post/a96b66e8.html"/>
      <url>/post/a96b66e8.html</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯è·¯ç”±</h3><p>åœ¨åŒºåˆ«å‰åç«¯è·¯ç”±ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹è·¯ç”±çš„æ¦‚å¿µ</p><blockquote><p>ç®€å•æ¥è¯´ï¼Œè·¯ç”±å°±æ˜¯ URL åˆ°å‡½æ•°çš„æ˜ å°„ï¼ˆè¿™ä¸ªå‡½æ•°æ˜¯å¹¿ä¹‰çš„ï¼Œå¯ä»¥ä½¿å‰ç«¯çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯åç«¯çš„å‡½æ•°ï¼‰ã€‚å¯¹äºé™æ€èµ„æºï¼Œå¯ä»¥è®¤ä¸ºæ˜ å°„å‡½æ•°æ˜¯å¯¹æ–‡ä»¶çš„è¯»å–æ“ä½œã€‚å¯¹äºåŠ¨æ€èµ„æºï¼Œåˆ™æ˜¯å¯¹æ•°æ®åº“æ•°æ®çš„å¤„ç†ã€è¯»å–æ“ä½œã€‚</p></blockquote><span id="more"></span><h3 id="ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯åç«¯è·¯ç”±</h3><p>åœ¨æ—©æœŸçš„ web å¼€å‘ä¸­ï¼Œåç«¯è·¯ç”±å ä¸»å¯¼åœ°ä½ã€‚åƒæˆ‘ä»¬å¸¸è§çš„ phpã€jsp é¡µé¢ï¼Œç”¨æˆ·åœ¨åœ°å€æ ä¸­è¾“å…¥ URL å¹¶å›è½¦è®¿é—®çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ä¼šæŠŠå¯¹åº”çš„è·¯ç”±å’Œå‚æ•°ä»¥ GET æ–¹å¼å¯¹åç«¯è¿›è¡Œè¯·æ±‚ã€‚åç«¯å†è¿›è¡Œè·¯ç”±åŒ¹é…çš„æ—¶å€™ï¼Œä¸ä»…ä¼šæ ¹æ® URL æ¥åŒ¹é…ï¼Œä¹Ÿä¼šæŸ¥çœ‹è¯·æ±‚æ–¹å¼æ˜¯å¦åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸï¼Œå°†è¿”å›å¯¹åº”çš„é¡µé¢æ¨¡æ¿æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚å¦‚æœè·¯ç”±æ— æ³•åŒ¹é…çš„å¯¹åº”çš„é¡µé¢æ¨¡æ¿ï¼Œåˆ™ä¼šè¿”å› 404 çŠ¶æ€ç ã€‚</p><h3 id="åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"><a href="#åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"></a>åç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹</h3><p>åœ¨åç«¯è·¯ç”±çš„æ—¶ä»£ï¼Œç½‘é¡µä¸­çš„ html ä¸€èˆ¬æ˜¯ç”±åç«¯æœåŠ¡å™¨å°†æ•°æ®è¿›è¡Œæ¨¡æ¿æ¸²æŸ“å†è¿”å›ç»™å‰ç«¯ï¼Œè¿™ç§æ¸²æŸ“æ–¹å¼æˆ‘ä»¬ç§°ä¸ºæœåŠ¡å™¨æ¸²æŸ“ã€‚<br>æœåŠ¡å™¨æ¸²æŸ“çš„ä¼˜åŠ¿åœ¨äºå¯¹ SEO å‹å¥½ï¼Œå› ä¸ºæ•°æ®ç”±åç«¯æ¸²æŸ“è¿”å›ï¼Œæ‰€ä»¥å®‰å…¨æ€§æ›´é«˜ã€‚ä½†éšç€ web åº”ç”¨åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼Œéœ€è¦å¤„ç†æ›´å¤šçš„ä¸šåŠ¡é€»è¾‘ï¼Œå•çº¯æœåŠ¡å™¨æ¸²æŸ“çš„å¼Šç«¯ä¹Ÿæ…¢æ…¢æ˜¾éœ²å‡ºæ¥ï¼šå½“éœ€è¦è¿”å›å¤§é‡æ•°æ®æ—¶ï¼Œé¡µé¢ç™½å±æ—¶é—´è¾ƒé•¿ï¼›ä»£ç ç»´æŠ¤éš¾åº¦å¤§ç­‰ç­‰ï¼Œè¿™æ˜¯åœ¨è¿™ç§ç¯å¢ƒçš„è¦æ±‚ä¸‹ï¼Œå‰ç«¯è·¯ç”±æ…¢æ…¢çš„è¿›å…¥äº†äººä»¬çš„è§†çº¿ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±"><a href="#ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±" class="headerlink" title="ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±"></a>ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±</h3><p>å‰ç«¯è·¯ç”±åˆè¢«ç§°ä¸ºå®¢æˆ·ç«¯è·¯ç”±ï¼Œå› ä¸ºè·¯ç”±çš„åˆ‡æ¢å˜åŒ–ä¸»è¦å‘ç”Ÿåœ¨æµè§ˆå™¨ç«¯ï¼Œè·¯ç”±çš„æ˜ å°„å‡½æ•°é€šå¸¸æ˜¯å¯¹ DOM è¿›è¡Œæ˜¾éšæ“ä½œï¼Œå½“ç”¨æˆ·è®¿é—®ä¸åŒçš„é¡µé¢è·¯å¾„æ—¶ï¼Œå±•ç¤ºä¸åŒçš„é¡µé¢ç»„ä»¶ï¼Œæ¯”å¦‚å‰ç«¯æµè¡Œæ¡†æ¶ vue.jsï¼Œå½“æˆ‘ä»¬æŸ¥çœ‹ç”Ÿäº§ç¯å¢ƒçš„ vue é¡¹ç›®æ—¶ï¼Œä¼šå‘ç°ä»–çš„å…¥å£æ–‡ä»¶ index.html ä¸æˆ‘ä»¬æƒ³è±¡ä¸­çš„å¾ˆä¸ä¸€æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;xxxx.xxx.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æœ‰ä½¿ç”¨ vue å¼€å‘è¿‡é¡¹ç›®çš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“ï¼Œvue çš„å•é¡µé¢æŒ‚è½½åœ¨ app ä¸‹ï¼Œè€Œé¡µé¢çš„æ¸²æŸ“å…¶å®æ˜¯é€šè¿‡ js æ–‡ä»¶æ¸²æŸ“å‡ºæ¥çš„ï¼Œè¿™ç§æ¸²æŸ“æ–¹å¼å³æˆ‘ä»¬å¸¸è¯´çš„å‰ç«¯æ¸²æŸ“ã€‚</p><h3 id="å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"><a href="#å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹"></a>å‰ç«¯è·¯ç”±çš„ä¼˜ç¼ºç‚¹</h3><p>å‰ç«¯æ¸²æŸ“æŠŠæ•°æ®çš„æ¸²æŸ“ä»»åŠ¡äº¤ç»™äº†æµè§ˆå™¨ï¼Œå°†å¤§çš„ä»»åŠ¡é¢—ç²’åŒ–ï¼Œè¿™æ ·ä¸€æ¥ç¼“è§£äº†æœåŠ¡å™¨çš„å‹åŠ›ï¼Œä½¿å¾—åç«¯åŒå­¦æ›´ä¸“æ³¨äº api çš„æä¾›å’Œæ•°æ®åº“æ“ä½œã€‚å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºå‡å°‘äº†ä¸åç«¯æœåŠ¡å™¨çš„äº¤äº’ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œé¡µé¢åˆ‡æ¢æ—¶ï¼Œç»™ç”¨æˆ·çš„è§‚æ„Ÿä½“éªŒä¼šæ›´å¥½ã€‚ä½†åŒæ—¶ï¼Œå‰ç«¯æ¸²æŸ“ä¹Ÿå¸¦æ¥äº†ä¸€äº›å¼Šç«¯ã€‚<br>ç”±äºå‰åç«¯æ•°æ®åˆ†ç¦»ï¼Œå‰ç«¯è´Ÿè´£é¡µé¢æ ·å¼å’Œæ•°æ®æ¸²æŸ“ï¼Œåç«¯åªè´Ÿè´£è¿”å›æ•°æ®ï¼Œå¯¼è‡´çˆ¬è™«æ— æ³•çˆ¬å–åˆ°æœ‰æ•ˆçš„æ•°æ®ï¼Œå¯¹ SEO ä¸å‹å¥½ã€‚</p><p><strong>åœ¨ä½¿ç”¨å‰ç«¯è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æ˜¯</strong></p><ul><li>åœ°å€æ è¾“å…¥ URL å¹¶å›è½¦è®¿é—®ï¼Œä¾æ—§ä¼šå‘åç«¯æœåŠ¡å™¨å‘èµ· GET è¯·æ±‚ã€‚å¦‚æœç”±é¡µé¢ä¸­çš„ç‚¹å‡»æˆ–è€…é€šè¿‡å‰ç«¯æ¡†æ¶çš„ api è¿›è¡Œè·¯ç”±è·³è½¬åˆ™ä¸ä¼šå‘åç«¯å‘èµ·è¯·æ±‚</li><li>å‡¡æ˜¯åœ¨æµè§ˆå™¨åœ°å€æ é‡Œå¯¹ URL è¿›è¡Œæ“ä½œéƒ½ä¼šå¯¹åç«¯æœåŠ¡å™¨å‘èµ·è¯·æ±‚</li></ul><h3 id="å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼"><a href="#å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼" class="headerlink" title="å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼"></a>å¸¸è§çš„å‰ç«¯è·¯ç”±æ¨¡å¼</h3><ul><li>hash æ¨¡å¼</li><li>history æ¨¡å¼</li></ul><p><strong>Hash æ¨¡å¼</strong></p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œhash è·¯ç”±æœ€æ˜æ˜¾çš„ç‰¹å¾å°±æ˜¯è·¯ç”±ä¸­çš„â€œ#â€ç¬¦å·ï¼Œå¾ˆç‰¹åˆ«ï¼Œä½†ä¹Ÿå¾ˆä¸ç¾è§‚ã€‚<br>ä¾‹å¦‚ï¼š<strong>http&#x2F;&#x2F;abc.com&#x2F;#&#x2F;xx</strong>ï¼Œè¯¥è·¯ç”±ä¸­çš„ hash å€¼ä¸ºâ€œ#&#x2F;xxâ€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ hashchange äº‹ä»¶ï¼Œç›‘å¬ hash å€¼çš„å˜åŒ–ã€‚<br>hash æ¨¡å¼åˆ©ç”¨çš„æ˜¯æµè§ˆå™¨ä¸ä¼šå°†#ç¬¦å·åé¢çš„è·¯å¾„åŠå‚æ•°å¯¹æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/</span><br><span class="line">http://localhost/#/user/1</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªè·¯ç”±åƒæœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œéƒ½æ˜¯è¯·æ±‚çš„ htt:&#x2F;&#x2F;localhost é¡µé¢çš„å†…å®¹ã€‚<br>å‰ç«¯çš„è·¯ç”±ç®¡ç†é€šè¿‡ä¸Šé¢æåˆ°çš„ hashchange äº‹ä»¶å¯¹ hash å€¼çš„å˜åŒ–è¿›è¡Œç›‘å¬ï¼Œè¿›è¡Œæ¸²æŸ“å¯¹åº”çš„é¡µé¢ï¼Œè¿™æ ·è·¯ç”±çš„å¤„ç†ã€åˆ‡æ¢å°±åªæ˜¯ç”±å‰ç«¯æ¥ç»§ç»­é€»è¾‘åˆ¤æ–­äº†</p><p><strong>history æ¨¡å¼</strong></p><p>ç›¸è¾ƒäº Hash æ¨¡å¼ï¼Œhistory æ¨¡å¼çš„è·¯ç”±æœ€æ˜æ˜¾çš„å˜åŒ–å°±æ˜¯å»æ‰äº†å…¶ä¸­çš„#ç¬¦å·ï¼Œè·Ÿæˆ‘ä»¬å¸¸è§çš„ URL è·¯ç”±æ²¡ä»€ä¹ˆä¸¤æ ·äº†ã€‚<br>history æ¨¡å¼çš„è·¯ç”±åˆ‡æ¢ä¸»è¦æ˜¯é€šè¿‡ HTML5 æä¾›çš„ history api å®ç°çš„ã€‚</p><p>ä¸¤ä¸ªæ“ä½œå†å²æ ˆçš„ api æœ‰ history.pushState å’Œ history.replaceState<br><strong>history.pushState();</strong> &#x2F;&#x2F; å‘å†å²è®°å½•ä¸­è¿½åŠ ä¸€æ¡è®°å½•<br><strong>history.replaceState();</strong> &#x2F;&#x2F; æ›¿æ¢å½“å‰é¡µåœ¨å†å²è®°å½•ä¸­çš„ä¿¡æ¯ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒHTML5 è¿˜åœ¨ window å¯¹è±¡ä¸­æä¾›äº† onpopstate äº‹ä»¶æ¥ç›‘å¬å†å²æ ˆçš„æ”¹å˜ï¼Œåªè¦å†å²æ ˆæœ‰ä¿¡æ¯å‘ç”Ÿæ”¹å˜çš„è¯ï¼Œå°±ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;popstate&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨é¡µé¢ä¸­é€šè¿‡ router çš„ api è¿›è¡Œè·¯ç”±è·³è½¬æ—¶ï¼Œè°ƒç”¨çš„é€šå¸¸æ˜¯ history.pushState()è¿™ä¸ª apiï¼Œæ‰€ä»¥åˆæ˜¯å‰ç«¯è¿›è¡Œçš„é€»è¾‘å¤„ç†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨åœ°å€æ ä¸­è¾“å…¥åœ°å€å¹¶è®¿é—®ï¼Œåˆ™ä¾æ—§ä¼šå‘åç«¯æœåŠ¡å™¨å‘èµ· GET è¯·æ±‚ï¼Œå¦‚æœåç«¯æ²¡æœ‰å¯¹å¯¹åº”çš„è·¯ç”±è¿›è¡Œé…ç½®ï¼Œé¡µé¢åˆ™ä¼šè¿”å› 404ï¼Œè¿™ä¹Ÿå°±æ˜¯ç”Ÿäº§ç¯å¢ƒé¡µé¢åˆ·æ–° 404 çš„é—®é¢˜æ‰€åœ¨ã€‚</p><p>å½“ç„¶ï¼Œå…³äº history å’Œ Hash è·¯ç”±è¿˜æœ‰æ›´æ·±çš„å†…å®¹éœ€è¦æ¢è®¨ï¼Œç­‰æœ‰æ—¶é—´å¦å†™ä¸€ç¯‡</p>]]></content>
      
      
      <categories>
          
          <category> åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå¼•å¯¼ç”¨æˆ·å…³æ³¨å…¬ä¼—å·</title>
      <link href="/post/5c3af429.html"/>
      <url>/post/5c3af429.html</url>
      
        <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åœ¨å°ç¨‹åºä½¿ç”¨ç¯å¢ƒä¸­ï¼Œä¸ºäº†ç»™å…¬ä¼—å·å¼•æµï¼Œæˆ–è€…æ–¹ä¾¿ç»™ç”¨æˆ·æ¨é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬éœ€è¦å¼•å¯¼ç”¨æˆ·å»å…³æ³¨å…¬ä¼—å·ï¼Œç›®å‰æ¥è§¦åˆ°çš„å¤§éƒ¨åˆ†æ–¹æ¡ˆéƒ½æ˜¯ ç”¨æˆ·è§¦å‘å®¢æœæ¶ˆæ¯ - å‘é€æŒ‡å®šå†…å®¹ - æ”¶åˆ°å…¬ä¼—å·äºŒç»´ç  - ç”¨æˆ·é•¿æŒ‰å…¬ä¼—å·äºŒç»´ç è¯†åˆ«å…³æ³¨ï¼Œè¿™ä¹ˆä¸€å¥—æ“ä½œå®åœ¨æ˜¯æœ‰äº›ç¹çï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•æ¥å®ç°è¯¥éœ€æ±‚å‘¢ï¼Ÿ</p><span id="more"></span><ol><li>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æ‰‹æœºå¾®ä¿¡ç«¯æ‰“å¼€å…¬ä¼—å·è¯¦æƒ…é¡µé¢ï¼Œå¹¶é€šè¿‡å³ä¸Šè§’è½¬å‘æŒ‰é’®å°†å…¬ä¼—å·æ¨èç»™ã€Œæ–‡ä»¶ä¼ è¾“åŠ©æ‰‹ã€</li><li>åœ¨PCç«¯ç‚¹å‡»åˆ†äº«çš„å…¬ä¼—å·å¡ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢<br><img src="https://guozhigq.github.io/img/QQ20210528-092457.png" alt="å…¬ä¼—å·å¡ç‰‡"></li><li>ç‚¹å‡»å›¾ä¸­çº¢è‰²æ¡†ä¸­çš„å†…å®¹ï¼Œå¯ä»¥åœ¨ç”µè„‘ç«¯æŸ¥çœ‹å…¬ä¼—å·çš„èµ„æ–™é¡µé¢<br><img src="https://guozhigq.github.io/img/QQ20210528-092225.png" alt="PCç«¯å…¬ä¼—å·èµ„æ–™é¡µé¢"></li><li>ç‚¹å‡»å›¾ä¸­çš„å¤åˆ¶æŒ‰é’®ï¼Œå°±å¾—åˆ°å…¬ä¼—å·èµ„æ–™é¡µé¢çš„é“¾æ¥äº†</li><li>è¿”å›å¼€å‘è€…å·¥å…·ï¼Œæ–°å»ºé¡µé¢ï¼Œå¹¶ä½¿ç”¨ webview æ ‡ç­¾å¼•ç”¨é“¾æ¥<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;web-view src=<span class="string">&quot;https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=xxxxxxxxxxx==&amp;scene=124#wechat_redirect&quot;</span>&gt;&lt;/web-view&gt;</span><br></pre></td></tr></table></figure></li><li>çœŸæœºè°ƒè¯•ï¼Œç‚¹å‡»è¿›å…¥å¦‚ä¸‹ç•Œé¢ å®Œç»“ ~<br><img src="https://guozhigq.github.io/img/QQ20210528-095934.png" alt="æ‰‹æœºç«¯å…³æ³¨"></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå¼€å‘ä¸­çš„å°æŠ€å·§</title>
      <link href="/post/e0b676b5.html"/>
      <url>/post/e0b676b5.html</url>
      
        <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åœ¨å°ç¨‹åºå¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å¾ˆå¤šå¥‡æ€ªçš„ bugï¼Œéœ€è¦è€—è´¹ä¸å°‘çš„æ—¶é—´å’Œç²¾åŠ›æ¥è§£å†³ï¼Œæ‰€ä»¥åœ¨æ­¤å¤„åšä¸€ä¸ªè®°å½•ï¼Œåç»­ä¼šä¸æ–­è¡¥å……ã€‚</p><span id="more"></span><h4 id="é˜»æ­¢äº‹ä»¶å†’æ³¡"><a href="#é˜»æ­¢äº‹ä»¶å†’æ³¡" class="headerlink" title="é˜»æ­¢äº‹ä»¶å†’æ³¡"></a>é˜»æ­¢äº‹ä»¶å†’æ³¡</h4><ol><li><p>å¯¹äºä¸€èˆ¬çš„å­å…ƒç´ çš„è§¦å‘äº‹ä»¶ä½¿ç”¨ catchtap æ–¹æ³•å³å¯</p></li><li><p>å¯¹äº inputã€videoã€[openType]ç±»å‹çš„ buttonï¼Œæˆ‘ä»¬å¯ä»¥åŒæ ·åœ¨æ ‡ç­¾ä¸­æ·»åŠ  catchtap æ–¹æ³•ï¼Œå…¶ä¸­ catchtap å¯¹åº”çš„æ–¹æ³•å†…å®¹ä¸ºç©ºå³å¯ï¼Œå¦‚ä¸‹</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button open-type=<span class="string">&quot;share&quot;</span> catchtap=<span class="string">&quot;xxx&quot;</span>&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="title function_">xxx</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="è½¬å‘æ—¶å¤šé€‰å¥½å‹"><a href="#è½¬å‘æ—¶å¤šé€‰å¥½å‹" class="headerlink" title="è½¬å‘æ—¶å¤šé€‰å¥½å‹"></a>è½¬å‘æ—¶å¤šé€‰å¥½å‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">showShareMenu</span>(&#123;</span><br><span class="line">        <span class="attr">withShareTicket</span>: <span class="literal">false</span>, <span class="comment">// å±æ€§å€¼ä¸ºfalseæ—¶ï¼Œå¼€å¯å¥½å‹åˆ†äº«å¤šé€‰åŠŸèƒ½</span></span><br><span class="line">        <span class="attr">menus</span>: [<span class="string">&#x27;shareAppMessage&#x27;</span>, <span class="string">&#x27;shareTimeline&#x27;</span>] <span class="comment">// è°ƒç”¨å¾®ä¿¡å¥½å‹åˆ†äº«ï¼Œæœ‹å‹åœˆåˆ†äº«ï¼ˆæœ‹å‹åœˆåˆ†äº«åŠŸèƒ½iosæš‚ä¸æ”¯æŒ 2021.02.04ï¼‰</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="setData-çš„ä½¿ç”¨äº‹é¡¹"><a href="#setData-çš„ä½¿ç”¨äº‹é¡¹" class="headerlink" title="setData çš„ä½¿ç”¨äº‹é¡¹"></a>setData çš„ä½¿ç”¨äº‹é¡¹</h4><ol><li>å› ä¸ºæ¶‰åŠåˆ°å°ç¨‹åºæ¸²æŸ“å±‚ä¸é€»è¾‘å±‚çš„æ•°æ®äº¤äº’ï¼Œæ‰€ä»¥ setData æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹;</li><li>ç›´æ¥ä¿®æ”¹ Page å®ä¾‹çš„ this.data æ˜¯æ— æ³•æ”¹å˜é¡µé¢çŠ¶æ€çš„;</li><li>å¦‚æœä¸éœ€è¦æ”¹å˜æ¸²æŸ“å±‚æ•°æ®ï¼Œå‡å°‘ä½¿ç”¨ setData;</li><li>ç”±äº setData æ˜¯éœ€è¦ä¸¤ä¸ªçº¿ç¨‹çš„ä¸€äº›é€šä¿¡æ¶ˆè€—ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæ¯æ¬¡è®¾ç½®çš„æ•°æ®ä¸åº”è¶…è¿‡ 1024kB;</li><li>setData çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª callback å›è°ƒï¼Œåœ¨æ­¤æ¬¡ setData å¯¹ç•Œé¢æ¸²æŸ“å®Œæ¯•åè§¦å‘; <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&quot;change text&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">// setDataå¯¹ç•Œé¢æ¸²æŸ“å®Œæ¯•åè§¦å‘</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id="å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º-10-å±‚"><a href="#å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º-10-å±‚" class="headerlink" title="å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º 10 å±‚"></a>å°ç¨‹åºé¡µé¢æ ˆæœ€å¤§å±‚çº§ä¸º 10 å±‚</h4><p>åœ¨ç±»ä¼¼äº <strong>åˆ—è¡¨ -&gt; è¯¦æƒ…</strong> ä¸šåŠ¡å¼€å‘ä¸­æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œåœ¨æ¯æ¬¡ wx.navigateTo()æ—¶ï¼ŒgetCurrentPages()åˆ¤æ–­é¡µé¢æ ˆå±‚çº§æ•°ï¼Œå¦‚æœåˆ°è¾¾ 10 å±‚æ— æ³•æ–°å¢æ—¶ï¼Œä½¿ç”¨ wx.redirecTo()è¿›è¡Œé¡µé¢è·³è½¬ã€‚ï¼ˆå°†å½“å‰é¡µé¢æ¨å‡ºé¡µé¢æ ˆï¼‰</p><h4 id="å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®"><a href="#å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®" class="headerlink" title="å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®"></a>å°ç¨‹åºå‘ä¸Šä¸€é¡µé¢ä¼ é€’æ•°æ®</h4><p>åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ° <strong>A -&gt; B -&gt; A</strong> é¡µé¢å›è·³ä¸”éœ€è¦å¸¦å‚æ•°çš„æƒ…å†µï¼Œå¯¹äºè¿™ç§éœ€æ±‚ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥æ»¡è¶³å‘¢ï¼Ÿ</p><ol><li><p>åœ¨ B é¡µé¢è°ƒç”¨åç«¯æ¥å£ï¼Œåœ¨ A é¡µé¢ onShow æ–¹æ³•ä¸­è·å–æ•°æ®;</p></li><li><p>ä½¿ç”¨ globalData å…¨å±€å‚æ•°ã€‚åœ¨ B é¡µé¢èµ‹å€¼ï¼ŒA é¡µé¢å–å€¼;</p></li><li><p>ä½¿ç”¨ç¼“å­˜ api wx.setStorageSync() wx.getStorageSync()ã€‚åœ¨ By é¡µé¢ setï¼ŒA é¡µé¢ get;</p></li><li><p>ä½¿ç”¨ getCurrentPages()è·å–å°ç¨‹åºé¡µé¢æ ˆï¼Œå¹¶æ‰§è¡Œ setData({})</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> pages = <span class="title function_">getCurrentPages</span>(); <span class="comment">// è·å–å½“å‰é¡µé¢æ ˆã€‚æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºé¦–é¡µï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸ºå½“å‰é¡µé¢ã€‚</span></span><br><span class="line"><span class="keyword">let</span> prevPage = pages[ pages.<span class="property">length</span> - <span class="number">2</span> ];  <span class="comment">// è·å–ä¸Šä¸€é¡µé¢Page() å®ä¾‹</span></span><br><span class="line">prevPage.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;,</span><br><span class="line">    wx.<span class="title function_">navigateBack</span>(&#123;</span><br><span class="line">        <span class="attr">delta</span>: <span class="number">1</span>  <span class="comment">// è¿”å›ä¸Šä¸€çº§é¡µé¢ã€‚</span></span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueä¸­çš„è™šæ‹ŸDOM</title>
      <link href="/post/1e9fca9b.html"/>
      <url>/post/1e9fca9b.html</url>
      
        <content type="html"><![CDATA[<h4 id="åœ¨äº†è§£è™šæ‹Ÿ-DOM-ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹"><a href="#åœ¨äº†è§£è™šæ‹Ÿ-DOM-ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹" class="headerlink" title="åœ¨äº†è§£è™šæ‹Ÿ DOM ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹"></a>åœ¨äº†è§£è™šæ‹Ÿ DOM ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹</h4><ol><li>è§£æè·å–åˆ°çš„ HTML æ–‡æ¡£ç”Ÿæˆ DOM</li><li>è§£æ CSS æ„æˆå±‚å æ ·å¼è¡¨ç»“æ„ CSSOM</li><li>å°†ä¸¤è€…è¿›è¡Œç»“åˆç”Ÿæˆæ¸²æŸ“æ ‘</li><li>æµè§ˆå™¨æ ¹æ®æ¸²æŸ“æ ‘ä¸Šçš„èŠ‚ç‚¹ä¿¡æ¯ç¡®å®šå…¶åæ ‡å€¼</li><li>è°ƒç”¨æ¯ä¸ªèŠ‚ç‚¹çš„ paint æ–¹æ³•ï¼Œå°†èŠ‚ç‚¹ç»˜åˆ¶åˆ°å±å¹•ä¸Š <span id="more"></span></li></ol><p><img src="https://i.loli.net/2020/12/22/2ZLbfcxYMHQCAn6.png" alt="æµè§ˆå™¨æ¸²æŸ“æµç¨‹"></p><p>å½“æˆ‘ä»¬ä½¿ç”¨åŸç”Ÿ js æˆ–è€… jquery æ“ä½œ DOM æ—¶ï¼Œæ¯å¯¹ DOM è¿›è¡Œä¸€æ¬¡æ“ä½œï¼Œæµè§ˆå™¨å°±ä¼šä»å¤´åˆ°å°¾æ‰§è¡Œä¸€éæµç¨‹ï¼Œå½“æ“ä½œååˆ†é¢‘ç¹æ—¶ï¼Œå¯¹äºæµè§ˆå™¨çš„æ€§èƒ½æ¶ˆè€—ä¾¿ä¼šå˜å¾—éå¸¸ä¸¥é‡ã€‚è™šæ‹Ÿ DOM å°±æ˜¯ä¸ºäº†è§£å†³<strong>æµè§ˆå™¨æ€§èƒ½é—®é¢˜</strong>è€Œè¢«è®¾è®¡å‡ºæ¥çš„</p><h4 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿ-DOM" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOM</h4><p>ç›¸è¾ƒäº DOM å¯¹è±¡ï¼ŒåŸç”Ÿçš„ JavaScript å¯¹è±¡å¤„ç†èµ·æ¥é€Ÿåº¦æ›´å¿«ï¼Œä¹Ÿæ›´ç®€å•ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ JavaScript å¯¹è±¡è¡¨ç¤ºå‡º DOM æ ‘ä¸Šçš„ç»“æ„ã€å±æ€§ä¿¡æ¯ï¼Œæ¯”å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> element = &#123;</span><br><span class="line">    <span class="attr">tagName</span>: <span class="string">&quot;ul&quot;</span>,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;list&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>, <span class="attr">props</span>: &#123; <span class="attr">class</span>: <span class="string">&quot;item&quot;</span> &#125;, <span class="attr">children</span>: [<span class="string">&quot;Item 1&quot;</span>] &#125;,</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>, <span class="attr">props</span>: &#123; <span class="attr">class</span>: <span class="string">&quot;item&quot;</span> &#125;, <span class="attr">children</span>: [<span class="string">&quot;Item 2&quot;</span>] &#125;,</span><br><span class="line">        &#123; <span class="attr">tagName</span>: <span class="string">&quot;li&quot;</span>, <span class="attr">props</span>: &#123; <span class="attr">class</span>: <span class="string">&quot;item&quot;</span> &#125;, <span class="attr">children</span>: [<span class="string">&quot;Item 3&quot;</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„ HTML ä»£ç ä¸º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id=<span class="string">&quot;list&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>æ—¢ç„¶ Javascript å¯¹è±¡å±æ€§å¯ä»¥ç”¨æ¥æè¿° DOM èŠ‚ç‚¹ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›æ“ä½œå°† Javascript å¯¹è±¡æ˜ å°„åˆ°çœŸå® DOM ä¸Š<br>æ­¤æ—¶ï¼Œæˆ‘ä»¬è¾¹å¯ä»¥å°†è™šæ‹Ÿ DOM ç®€å•ç†è§£ä¸ºä¸€ä¸ª JS å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è‡³å°‘åŒ…å«æœ‰æ ‡ç­¾å( tag)ã€å±æ€§(attrs)å’Œå­å…ƒç´ å¯¹è±¡( children)ä¸‰ä¸ªå±æ€§ã€‚</p><h4 id="è™šæ‹Ÿ-DOM-ä½œç”¨æ˜¯ä»€ä¹ˆ"><a href="#è™šæ‹Ÿ-DOM-ä½œç”¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="è™šæ‹Ÿ DOM ä½œç”¨æ˜¯ä»€ä¹ˆ"></a>è™šæ‹Ÿ DOM ä½œç”¨æ˜¯ä»€ä¹ˆ</h4><p>è™šæ‹Ÿ DOM çš„æœ€ç»ˆç›®çš„æ˜¯å°†è™šæ‹ŸèŠ‚ç‚¹æ¸²æŸ“åˆ°è§†å›¾ä¸Šï¼Œä½†å¦‚æœç›´æ¥è¦†ç›–çš„è¯ï¼Œé‚£è™šæ‹Ÿ DOM çš„å­˜åœ¨ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚ä¸ºäº†é¿å…ä¸å¿…è¦çš„ DOM æ“ä½œï¼Œè™šæ‹Ÿ DOM åœ¨å°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°è§†å›¾çš„è¿‡ç¨‹ä¸­ï¼Œå°†è™šæ‹ŸèŠ‚ç‚¹ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“è§†å›¾æ‰€ä½¿ç”¨çš„æ—§èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œå°†çœŸæ­£éœ€è¦æ›´æ–°å†…å®¹çš„èŠ‚ç‚¹è¿›è¡Œæ˜ å°„ï¼Œé¿å…æ“ä½œå…¶ä»–æ— å…³çš„ DOM</p><h4 id="æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ-DOM-ä¸»è¦åšäº†ä¸¤ä»¶äº‹"><a href="#æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ-DOM-ä¸»è¦åšäº†ä¸¤ä»¶äº‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ DOM ä¸»è¦åšäº†ä¸¤ä»¶äº‹"></a>æ€»ç»“ä¸€ä¸‹ï¼Œè™šæ‹Ÿ DOM ä¸»è¦åšäº†ä¸¤ä»¶äº‹</h4><ol><li>é€šè¿‡ Javascript å¯¹è±¡æ„å»ºè™šæ‹ŸèŠ‚ç‚¹</li><li>å°†æœ¬æ¬¡çš„è™šæ‹ŸèŠ‚ç‚¹ä¸ä¸Šæ¬¡çš„è¿›è¡Œå·®å¼‚å¯¹æ¯”ï¼Œå†è¿›è¡Œè§†å›¾æ›´æ–°</li></ol><h4 id="è™šæ‹Ÿ-Dom-çš„ä¼˜åŠ¿"><a href="#è™šæ‹Ÿ-Dom-çš„ä¼˜åŠ¿" class="headerlink" title="è™šæ‹Ÿ Dom çš„ä¼˜åŠ¿"></a>è™šæ‹Ÿ Dom çš„ä¼˜åŠ¿</h4><p>ã€ŒVirtual Dom çš„ä¼˜åŠ¿ã€å…¶å®è¿™é“é¢˜ç›®é¢è¯•å®˜æ›´æƒ³å¬åˆ°çš„ç­”æ¡ˆä¸æ˜¯ä¸Šæ¥å°±è¯´ã€Œç›´æ¥æ“ä½œ&#x2F;é¢‘ç¹æ“ä½œ DOM çš„æ€§èƒ½å·®ã€ï¼Œå¦‚æœ DOM æ“ä½œçš„æ€§èƒ½å¦‚æ­¤ä¸å ªï¼Œé‚£ä¹ˆ jQuery ä¹Ÿä¸è‡³äºæ´»åˆ°ä»Šå¤©ã€‚æ‰€ä»¥é¢è¯•å®˜æ›´æƒ³å¬åˆ° VDOM æƒ³è§£å†³çš„é—®é¢˜ä»¥åŠä¸ºä»€ä¹ˆé¢‘ç¹çš„ DOM æ“ä½œä¼šæ€§èƒ½å·®ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼š</p><ul><li>DOM å¼•æ“ã€JS å¼•æ“ ç›¸äº’ç‹¬ç«‹ï¼Œä½†åˆå·¥ä½œåœ¨åŒä¸€çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰</li><li>JS ä»£ç è°ƒç”¨ DOM API å¿…é¡» æŒ‚èµ· JS å¼•æ“ã€è½¬æ¢ä¼ å…¥å‚æ•°æ•°æ®ã€æ¿€æ´» DOM å¼•æ“ï¼ŒDOM é‡ç»˜åå†è½¬æ¢å¯èƒ½æœ‰çš„è¿”å›å€¼ï¼Œæœ€åæ¿€æ´» JS å¼•æ“å¹¶ç»§ç»­æ‰§è¡Œè‹¥æœ‰é¢‘ç¹çš„ DOM API è°ƒç”¨ï¼Œä¸”æµè§ˆå™¨å‚å•†ä¸åšâ€œæ‰¹é‡å¤„ç†â€ä¼˜åŒ–ï¼Œ</li><li>å¼•æ“é—´åˆ‡æ¢çš„å•ä½ä»£ä»·å°†è¿…é€Ÿç§¯ç´¯è‹¥å…¶ä¸­æœ‰å¼ºåˆ¶é‡ç»˜çš„ DOM API è°ƒç”¨ï¼Œé‡æ–°è®¡ç®—å¸ƒå±€ã€é‡æ–°ç»˜åˆ¶å›¾åƒä¼šå¼•èµ·æ›´å¤§çš„æ€§èƒ½æ¶ˆè€—ã€‚</li></ul><p>å…¶æ¬¡æ˜¯ VDOM å’ŒçœŸå® DOM çš„åŒºåˆ«å’Œä¼˜åŒ–ï¼š</p><ol><li>è™šæ‹Ÿ DOM ä¸ä¼šç«‹é©¬è¿›è¡Œæ’ç‰ˆä¸é‡ç»˜æ“ä½œ</li><li>è™šæ‹Ÿ DOM è¿›è¡Œé¢‘ç¹ä¿®æ”¹ï¼Œç„¶åä¸€æ¬¡æ€§æ¯”è¾ƒå¹¶ä¿®æ”¹çœŸå® DOM ä¸­éœ€è¦æ”¹çš„éƒ¨åˆ†ï¼Œæœ€ååœ¨çœŸå® DOM ä¸­è¿›è¡Œæ’ç‰ˆä¸é‡ç»˜ï¼Œå‡å°‘è¿‡å¤š DOM èŠ‚ç‚¹æ’ç‰ˆä¸é‡ç»˜æŸè€—</li><li>è™šæ‹Ÿ DOM æœ‰æ•ˆé™ä½å¤§é¢ç§¯çœŸå® DOM çš„é‡ç»˜ä¸æ’ç‰ˆï¼Œå› ä¸ºæœ€ç»ˆä¸çœŸå® DOM æ¯”è¾ƒå·®å¼‚ï¼Œå¯ä»¥åªæ¸²æŸ“å±€éƒ¨</li></ol><h4 id="å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®"><a href="#å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®" class="headerlink" title="å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®"></a>å†™åˆ°è¿™é‡Œï¼Œä¸ç¦æœ‰äº†ä¸€äº›ç–‘é—®</h4><ul><li><a href="''">è™šæ‹Ÿ DOM æ¸²æŸ“åˆ°çœŸå® DOM çš„å‘¨æœŸä¸ºå¤šä¹…</a></li><li><a href="''">è¿™ä¸ªæ¸²æŸ“å‘¨æœŸåˆæ˜¯ç”±ä»€ä¹ˆæ¥å†³å®šçš„</a><!-- [] --><!-- è™šæ‹ŸDOMä¹‹æ‰€ä»¥èƒ½å¤Ÿå‡å°‘å¯¹æµè§ˆå™¨æ€§èƒ½æ¶ˆè€—ï¼Œé™¤äº†ç”¨Jså¯¹è±¡è™šæ‹ŸDOMä¹‹å¤–ï¼Œå…³é”®åœ¨äºé€šè¿‡diffç®—æ³•ï¼Œå¯¹æ¯”è™šæ‹ŸDOMä¹‹é—´çš„å·®å¼‚ï¼Œå°†å˜åŒ–çš„èŠ‚ç‚¹æ•°æ®æ¸²æŸ“åˆ°çœŸå®DOMä¸Š --></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç¨‹åºä½¿ç”¨äº‘å¼€å‘å®ç°èŠå¤©</title>
      <link href="/post/796d8a17.html"/>
      <url>/post/796d8a17.html</url>
      
        <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>ä¹‹å‰åšçš„ä¸¤ä¸ªé¡¹ç›®éƒ½æ¶‰åŠåˆ°å³æ—¶é€šè®¯åŠŸèƒ½ï¼Œè¿‘æœŸå¸®æœ‹å‹å¼€å‘å°ç¨‹åºæ—¶ä¹Ÿæœ‰è¿™ä¸ªéœ€æ±‚ï¼Œå› ä¸ºæ²¡æœ‰åç«¯ï¼Œæ‰€ä»¥å†³å®šä½¿ç”¨äº‘å¼€å‘æ¥å®ç°é€šè®¯åŠŸèƒ½ã€‚ å³æ—¶é€šè®¯çš„å…³é”®ç‚¹åœ¨äºå³æ—¶ï¼Œåœ¨ä¹‹å‰çš„å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡websocketé•¿è¿æ¥æ¥å®ç°ï¼Œäº‘å¼€å‘ä¸­åˆæ€æ ·æ¥å®ç°å‘¢ï¼Ÿ</p><span id="more"></span><h3 id="åœºæ™¯åˆ†æ"><a href="#åœºæ™¯åˆ†æ" class="headerlink" title="åœºæ™¯åˆ†æ"></a>åœºæ™¯åˆ†æ</h3><ol><li>Aç‚¹å‡»Bçš„å¤´åƒå‘èµ·èŠå¤©æ—¶ï¼Œæ ¹æ®åŒæ–¹idç”Ÿæˆå”¯ä¸€çš„èŠå¤©å®¤group_idï¼Œç”¨äºå­˜å‚¨èŠå¤©æ•°æ®ã€‚è‹¥group_idå­˜åœ¨ï¼Œåˆ™è·å–èŠå¤©æ•°æ®</li><li>è€ƒè™‘åˆ°åˆ†åˆ«éœ€è¦å¯¹èŠå¤©åˆ—è¡¨å’ŒèŠå¤©æ•°æ®è¿›è¡Œå­˜å‚¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸¤ä¸ªé›†åˆï¼Œåˆ†åˆ«å‘½åä¸ºmsgListã€msgData</li><li>å‘èµ·èŠå¤©æ—¶ï¼Œéœ€è¦å¾€msgListé›†åˆæ·»åŠ ä¸€æ¡æ•°æ®ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™è¿›è¡Œæ›´æ–°è¦†ç›–ï¼Œç”¨æˆ·æ›´æ–°èŠå¤©æœ€åä¸€å¥å†…å®¹ä¸èŠå¤©ç»“æŸæ—¶é—´ï¼Œç”¨äºå±•ç¤ºèŠå¤©åˆ—è¡¨</li><li>è¿›è¡ŒèŠå¤©è¯¦æƒ…é¡µï¼Œæ ¹æ®group_idè·å–å¯¹åº”èŠå¤©æ•°æ®å¹¶è¿›è¡Œæ•°æ®æ¸²æŸ“</li><li>èŠå¤©çª—å£å†…å®æ—¶ç›‘å¬èŠå¤©æ•°æ®ï¼Œè¿›è¡Œæ•°æ®å¡«å……</li></ol><h3 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h3><h5 id="æ¶ˆæ¯å‘èµ·æ–¹"><a href="#æ¶ˆæ¯å‘èµ·æ–¹" class="headerlink" title="æ¶ˆæ¯å‘èµ·æ–¹"></a>æ¶ˆæ¯å‘èµ·æ–¹</h5><p>å‘èµ·èŠå¤©æ—¶ï¼Œç”Ÿæˆgroup_idå¹¶å¾€ <strong>msgList</strong> é›†åˆä¸­å­˜å‚¨ä¸€æ¡ä¿¡æ¯ï¼Œç”¨ä»¥è®°å½•Aã€BåŒæ–¹èŠå¤©å…³ç³»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// group_idä½¿ç”¨ä¸¤ä¸ªç”¨æˆ·uidä¹‹å’Œï¼Œä¾¿äºå¯¹æ•°æ®è¿›è¡ŒæŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">let</span> group_id = <span class="title class_">Number</span>(uid_a) + <span class="title class_">Number</span>(uid_b)</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„group_idï¼Œå¹¶ä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.where.html">Collection.where</a>ã€<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.get.html">Collection.get</a> æ–¹æ³•ä» <strong>msgList</strong> é›†åˆä¸­è·å–èŠå¤©æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> _db = db.<span class="title function_">collection</span>(<span class="string">&#x27;msgList&#x27;</span>)</span><br><span class="line"><span class="comment">// è·å–èŠå¤©è®°å½•</span></span><br><span class="line">_db</span><br><span class="line">    .<span class="title function_">where</span>(&#123;<span class="attr">groupId</span>: groupId&#125;)</span><br><span class="line">    .<span class="title function_">get</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">talkData</span>: res.<span class="property">data</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>å‘é€æ–‡æœ¬æ¶ˆæ¯ï¼Œå°†æ•°æ®åœ¨æœ¬åœ°æ·»åŠ åˆ°talkDataä¸­ï¼Œå¹¶ä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.add.html">Collection.add()</a> æ–¹æ³•å°†æ•°æ®æ·»åŠ åˆ° <strong>msgData</strong> é›†åˆä¸­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chatData = &#123;</span><br><span class="line">    <span class="attr">toId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ¥æ”¶äººid</span></span><br><span class="line">    <span class="attr">toAvatar</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ¥æ”¶äººå¤´åƒ</span></span><br><span class="line">    <span class="attr">toName</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ¥æ”¶äººæ˜µç§°</span></span><br><span class="line">    <span class="attr">fromId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å‘é€äººid</span></span><br><span class="line">    <span class="attr">fromAvatar</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å‘é€äººå¤´åƒ</span></span><br><span class="line">    <span class="attr">fromName</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// å‘é€äººæ˜µç§°</span></span><br><span class="line">    <span class="attr">groupId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// èŠå¤©å®¤id</span></span><br><span class="line">    <span class="attr">msgType</span>: <span class="string">&#x27;text&#x27;</span>, <span class="comment">// æ¶ˆæ¯ç±»å‹</span></span><br><span class="line">    <span class="attr">lastContent</span>: <span class="title class_">InputContent</span>, <span class="comment">// æ¶ˆæ¯å†…å®¹</span></span><br><span class="line">    <span class="attr">sendTime</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="comment">// å½“å‰æ—¶é—´</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è®°å½•èŠå¤©æ•°æ®</span></span><br><span class="line">db.<span class="title function_">collection</span>(<span class="string">&#x27;msgData&#x27;</span>)</span><br><span class="line">    .<span class="title function_">add</span>(&#123;<span class="attr">data</span>: chatData&#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">errMsg</span> == <span class="string">&quot;collection.add:ok&quot;</span>)&#123;</span><br><span class="line">            <span class="comment">// å‘é€æˆåŠŸï¼Œæ•°æ®æ”¾å…¥msgData</span></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// å‘é€å¤±è´¥çš„é€»è¾‘å¤„ç†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h5 id="æ¶ˆæ¯æ¥æ”¶æ–¹"><a href="#æ¶ˆæ¯æ¥æ”¶æ–¹" class="headerlink" title="æ¶ˆæ¯æ¥æ”¶æ–¹"></a>æ¶ˆæ¯æ¥æ”¶æ–¹</h5><p>æ¶ˆæ¯æ¥æ”¶æ—¶ï¼Œå…³é”®åœ¨äºä½¿ç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.watch.html">Collection.watch</a> æ–¹æ³• <strong>ç›‘å¬é›†åˆä¸­ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ•°æ®çš„æ›´æ–°äº‹ä»¶</strong> ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç»“åˆ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.where.html">Collection.where</a> æ–¹æ³•ä¸€èµ·ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬æ•°æ®å˜åŒ–</span></span><br><span class="line"><span class="keyword">const</span> that = <span class="variable language_">this</span></span><br><span class="line"><span class="keyword">let</span> _db = db.<span class="title function_">collection</span>(<span class="string">&#x27;msgData&#x27;</span>)</span><br><span class="line">_db </span><br><span class="line">    .<span class="title function_">where</span>(&#123;<span class="attr">toId</span>: <span class="string">&#x27;&#x27;</span>&#125;) <span class="comment">// æŸ¥è¯¢æ¡ä»¶ï¼š è¿”å›toId == å¯¹æ–¹idçš„æ•°æ®</span></span><br><span class="line">    .<span class="title function_">watch</span>(&#123;</span><br><span class="line">        <span class="attr">onChange</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> reviceMsg = res.<span class="property">docChanges</span>[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span>(reviceMsg.<span class="property">dataType</span> == <span class="string">&#x27;add&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">let</span> talkData = that.<span class="property">data</span>.<span class="property">talkData</span></span><br><span class="line">                talkData.<span class="title function_">push</span>(reviceMsg.<span class="property">doc</span>) <span class="comment">// å°†å®æ—¶ç›‘å¬åˆ°çš„æ•°æ®æ·»åŠ åˆ°æœ¬åœ°æ•°æ®ä¸­</span></span><br><span class="line">                that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">talkData</span>: talkData</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">onError</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;the watch closed because of error&#x27;</span>, err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ¸²æŸ“å¦‚ä½•ä¼˜åŒ–</title>
      <link href="/post/f6d4c315.html"/>
      <url>/post/f6d4c315.html</url>
      
        <content type="html"><![CDATA[<p>é¡µé¢æ€§èƒ½åŒ…å«äº†æœåŠ¡å™¨è¯·æ±‚å’Œå“åº”ã€åŠ è½½ã€æ‰§è¡Œè„šæœ¬ã€æ¸²æŸ“ã€å¸ƒå±€å’Œç»˜åˆ¶æ¯ä¸ªåƒç´ åˆ°å±å¹•ä¸Šã€‚è¿™é‡Œæˆ‘ä»¬åªè®¨è®º[æ¸²æŸ“ã€å¸ƒå±€å’Œç»˜åˆ¶]è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p>å‡è®¾æˆ‘ä»¬é€šè¿‡è¯·æ±‚å¾—åˆ°äº†é¡µé¢åŠ è½½æ‰€éœ€çš„èµ„æºjsã€cssã€å›¾ç‰‡ç­‰ç­‰ï¼Œé¡µé¢å¼€å§‹æ¸²æŸ“ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li>æµè§ˆå™¨è§£æ HTMLï¼Œå°†æ¥æ”¶åˆ°çš„æ•°æ® è½¬åŒ–ä¸º DOM æ ‘ï¼Œè§£æè¿‡ç¨‹ä¸­å¦‚æœå‘ç°å¼•ç”¨äº†å¤–éƒ¨èµ„æºåˆ™æš‚åœè§£æï¼ŒåŠ è½½å¤–éƒ¨èµ„æºï¼ŒåŠ è½½å®Œæˆåè§£æå‰©ä½™HTML</li><li>è§£æCssï¼Œæ„é€  CSS æ¨¡å‹ï¼Œç­‰åˆ° DOM å’Œ CSSOM å®Œæˆä¹‹åï¼Œæµè§ˆå™¨æ„é€ æ¸²æŸ“æ ‘ã€‚</li><li>è®¡ç®—æ‰€æœ‰å¯è§å†…å®¹çš„æ ·å¼ï¼Œä¸€æ—¦æ¸²æŸ“æ ‘å®Œæˆå¸ƒå±€å¼€å§‹ï¼Œå®šä¹‰æ‰€æœ‰æ¸²æŸ“æ ‘å…ƒç´ çš„ä½ç½®å’Œå¤§å°ã€‚å®Œæˆä¹‹åï¼Œé¡µé¢è¢«æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚è¿™ä¸€æ­¥ä¹Ÿç§°ä¸º<strong>å›æµé‡ç»˜</strong></li></ul><p>ä¸€å¥è¯æ€»ç»“ï¼š é¡µé¢æ¸²æŸ“ä¸»è¦åˆ†äº”ä¸ªæ­¥éª¤ï¼šæ„å»ºDOM -&gt; æ„å»ºCSSOM -&gt; æ„å»ºæ¸²æŸ“æ ‘ -&gt; å¸ƒå±€ -&gt; ç»˜åˆ¶ã€‚</p><p>æ‰€ä»¥å½“æˆ‘ä»¬æ›´æ”¹htmlä¸­DOMç»“æ„æˆ–è€…CSSæ ·å¼æ—¶ï¼Œéƒ½ä¼šå¯¼è‡´é¡µé¢ä»å¤´å†æ¸²æŸ“ä¸€æ¬¡ï¼Œå¹¶è§¦å‘å›æµã€é‡ç»˜ã€‚ç›®å‰å¸‚é¢ä¸Šçš„å‰ç«¯æ¡†æ¶åŸºè™šæ‹ŸDOMçš„æ€è·¯ä¸»è¦å°±æ˜¯ä»è¿™ä¸€è§’åº¦å‡ºå‘ï¼Œé€šè¿‡è™šæ‹ŸDOMçš„å¯¹æ¯”ï¼Œæœ€å°é¢—ç²’åº¦çš„æ›´æ–°çœŸå®DOMï¼Œå‡å°‘é¡µé¢åœ¨å›æµã€é‡ç»˜ä¸Šè€—è´¹çš„æˆæœ¬ã€‚</p><h6 id="å…³äºå›æµ-amp-é‡ç»˜çš„è§£é‡Šï¼š"><a href="#å…³äºå›æµ-amp-é‡ç»˜çš„è§£é‡Šï¼š" class="headerlink" title="å…³äºå›æµ&amp;é‡ç»˜çš„è§£é‡Šï¼š"></a>å…³äºå›æµ&amp;é‡ç»˜çš„è§£é‡Šï¼š</h6><ul><li>å›æµï¼šåœ¨é¡µé¢ä¸­ï¼Œå½“æˆ‘ä»¬å¯¹å…ƒç´ çš„å®½é«˜å¤§å°è¿›è¡Œæ”¹å˜æ—¶ï¼Œä¼šè§¦å‘è¯¥å…ƒç´ ä»¥åŠç›¸åº”çš„å…¶ä»–å…ƒç´ é‡æ–°è®¡ç®—å¸ƒå±€ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å‘ç”Ÿäº†å›æµã€‚</li><li>é‡ç»˜ï¼šé‡ç»˜æ„å‘³ç€å…ƒç´ åªæ˜¯è¿›è¡Œäº†å¤–è§‚çš„å˜åŒ–ï¼Œæ¯”å¦‚èƒŒæ™¯è‰²ã€å‰æ™¯è‰²ï¼Œä½†æ˜¯ä½ç½®å¤§å°ä¸å˜ï¼Œè¿™æ—¶å€™å…ƒç´ ä¼šé‡æ–°ç»˜åˆ¶ï¼Œç›¸åº”çš„ä¹Ÿä¸ä¼šå¯¹å‘¨è¾¹çš„å…ƒç´ äº§ç”Ÿå½±å“ã€‚<br>æ‰€ä»¥æˆ‘ä»¬è¯´å›æµä¸€å®šä¼šå‘ç”Ÿé‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šå¯¼è‡´å›æµï¼Œé‡ç»˜çš„æ€§èƒ½ä¼˜äºå›æµã€‚</li></ul><p>æ—¢ç„¶æ¸…æ¥šäº†æµè§ˆå™¨æ¸²æŸ“é¡µé¢çš„å¤§è‡´è¿‡ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥åšä¸€äº›å¯¹åº”çš„ä¼˜åŒ–</p><ul><li><p>å‡å°‘é¢‘ç¹è·å–domå®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨å˜é‡ä¸´æ—¶ä¿å­˜ã€‚<br>  å› ä¸ºåœ¨æµè§ˆå™¨ä¸­ï¼ŒDOMçš„æ¸²æŸ“è·ŸJSçš„æ‰§è¡Œï¼Œåˆ†åˆ«å‘ç”Ÿåœ¨æ¸²æŸ“å¼•æ“è·Ÿjså¼•æ“ä¸­ï¼Œå½“æˆ‘ä»¬é€šè¿‡JSæ“ä½œDOMçš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´é€šä¿¡ï¼Œå¦‚æœæ“ä½œDOMè¾ƒä¸ºé¢‘ç¹ï¼Œä¸€æ¥ä¸€å›å¯¹äºæ€§èƒ½çš„æ¶ˆè€—æ¯”è¾ƒé«˜ï¼Œå¹¶ä¸”åœ¨DOMçš„å°ºå¯¸&#x2F;å¤–è§‚å˜åŒ–æ—¶ï¼Œè¿˜ä¼šå‘ç”Ÿå›æµã€é‡ç»˜ï¼Œå¯¹äºæ€§èƒ½çš„å½±å“å°±æ›´ä¸¥é‡äº†ã€‚<br>  æ‰€ä»¥ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶éƒ½æ˜¯ç”¨äº†è™šæ‹ŸDOMçš„æ¦‚å¿µï¼Œé€šè¿‡è™šæ‹Ÿdomçš„å¯¹æ¯”ï¼Œä½¿çœŸå®DOMçš„æ›´æ–°æ›´â€œå…·ä½“â€ï¼Œ</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼˜åŒ–å‰</span></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span> () &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> count = <span class="number">0</span>; count &lt; <span class="number">15000</span>; count++)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;name&#x27;</span>).<span class="property">innerHTML</span> += <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼˜åŒ–å</span></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">funtcion <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> content = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++&gt;)&#123;</span><br><span class="line">        content += <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;name&#x27;</span>).<span class="property">innerHTML</span> += content;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>å…ƒç´ çš„æ‰¹é‡ä¿®æ”¹ï¼Œè®¾ç½®<code>display:none</code></p></li><li><p>å¤§é‡å…ƒç´ çš„æ’å…¥ï¼Œä½¿ç”¨<code>DocumentFragment</code></p></li><li><p>å¯¹äºæ ·å¼é¢‘ç¹å˜åŒ–çš„DOMï¼Œå¯ä»¥ä½¿ç”¨å†³å®šå®šä½æˆ–è€…ç›¸å¯¹å®šä½è„±ç¦»æ–‡æ¡£æµï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>will-change</code> åˆ›å»ºå›¾å±‚ï¼Œå€Ÿç”¨ <code>GPU</code> è¿›è¡Œæ¸²æŸ“ï¼Œåœ¨å…¼å®¹æ€§è¾ƒå·®çš„æµè§ˆä¸Šå¯ä»¥ä½¿ç”¨3Då˜å½¢ <code>transform: translateZ(0)</code> å¼ºåˆ¶åˆ›å»ºä¸€ä¸ªå›¾å±‚ã€‚</p></li><li><p>ä½¿ç”¨classListæ¥å®ç°å¯¹å…ƒç´ æ ·å¼çš„ä¿®æ”¹ï¼Œè€Œéstyleï¼Œå‡å°‘è§¦å‘å›æµé‡ç»˜çš„é¢‘æ¬¡</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼˜åŒ–å‰</span></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&#x27;100px&#x27;</span>;</span><br><span class="line">box.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;200px&#x27;</span>;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼˜åŒ–å</span></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;size&#x27;</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>é¿å…å¼ºåˆ¶æ›´æ–°å¸ƒå±€</p></li></ul><p>ä¸€èˆ¬çš„ï¼Œåœ¨æ¯æ¬¡äº‹ä»¶å¾ªç¯çš„æœ«å°¾ä¼šè¿›è¡Œä¸€æ¬¡DOMæ›´æ–°ï¼Œè¿™ä¸€å‘¨æœŸå¤§æ¦‚ä¸º16msï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä»¥ä¸‹æ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">box.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;big&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> width = box.<span class="property">offsetWidth</span>;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸ºboxæ–°å¢classæ ·å¼åï¼Œæˆ‘ä»¬é©¬ä¸Šåˆè¯»å–äº†å…ƒç´ çš„å®½åº¦ï¼Œè€Œæµè§ˆå™¨æ­¤æ—¶è¿˜æ²¡æœ‰å®Œæˆæ¸²æŸ“ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¸ºäº†è®¡ç®—å®½åº¦å€¼ï¼Œå°±éœ€è¦é‡æ–°å‘ç”Ÿå›æµã€é‡ç»˜ã€‚<br>é‚£ä¹ˆæ­£ç¡®çš„åšæ³•æ˜¯å…ˆè·å–å®½åº¦ï¼Œå†æ·»åŠ æ ·å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> width = box.<span class="property">offsetWidth</span>;</span><br><span class="line">box.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;big&#x27;</span>);</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºéœ€è¦æå‰åŠ è½½çš„èµ„æºï¼Œå¯ä»¥ä½¿ç”¨ <code>preload</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/mystyles.css&quot;</span> <span class="attr">as</span>=<span class="string">&quot;style&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>å¯¹äºéœ€è¦è§£æçš„éæœ¬ç«™åŸŸå&#x2F;è·¨åŸŸåŸŸåï¼Œå¯ä»¥ä½¿ç”¨ <code>dns-prefetch</code><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<ul><li><code>dns-prefetch</code> ä»…å¯¹è·¨åŸŸåŸŸä¸Šçš„ DNS æŸ¥æ‰¾æœ‰æ•ˆï¼Œå› æ­¤è¯·é¿å…ä½¿ç”¨å®ƒæ¥æŒ‡å‘æ‚¨çš„ç«™ç‚¹æˆ–åŸŸï¼ˆé¿å…å¤šæ­¤ä¸€ä¸¾ï¼‰</li><li><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://fonts.googleapis.com/&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li>preconnect</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•ˆç‡å¼€å‘ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å®˜é—®ï¼šè¾“å…¥URLå‘ç”Ÿäº†ä»€ä¹ˆ</title>
      <link href="/post/a3bb328d.html"/>
      <url>/post/a3bb328d.html</url>
      
        <content type="html"><![CDATA[<p>è€ç”Ÿå¸¸è°ˆçš„é¢è¯•é¢˜äº†</p><p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥URLå‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š</p><h3 id="DNSè§£æ"><a href="#DNSè§£æ" class="headerlink" title="DNSè§£æ"></a>DNSè§£æ</h3><ul><li>æµè§ˆå™¨æ ¡éªŒè¾“å…¥å†…å®¹æ˜¯å¦ä¸ºæœ‰æ•ˆåœ°å€ï¼Œå¦åˆ™å‘èµ·æœç´¢</li><li>è¿›è¡ŒDNSè§£æï¼Œä»¥æ­¤ä»æµè§ˆå™¨ç¼“å­˜ã€ç³»ç»Ÿç¼“å­˜ã€è·¯ç”±å™¨ç¼“å­˜ã€ISPç¼“å­˜ä¸­è·å–æœåŠ¡å™¨çš„IPåœ°å€ï¼Œç«¯å£å·</li><li>åˆ©ç”¨IPåœ°å€å’Œè¿œç¨‹æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼Œä¸‰æ¬¡æ¡æ‰‹</li><li>æ„å»ºè¯·æ±‚å¤´ä¿¡æ¯ï¼Œå‘èµ·è¯·æ±‚</li></ul><h3 id="è¯·æ±‚å‘é€-x2F-å“åº”"><a href="#è¯·æ±‚å‘é€-x2F-å“åº”" class="headerlink" title="è¯·æ±‚å‘é€&#x2F;å“åº”"></a>è¯·æ±‚å‘é€&#x2F;å“åº”</h3><ul><li>å‘èµ·è¯·æ±‚æ—¶ä¼šæ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ï¼Œæ¶‰åŠ<code>å¼ºç¼“å­˜</code>ã€<code>åå•†ç¼“å­˜</code>ï¼Œå¦‚æœå‘½ä¸­å¼ºç¼“å­˜å’Œåå•†åç¼“å­˜æœªè¿‡æœŸï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œå¦åˆ™è·å–å“åº”æ•°æ®</li><li>æ£€æŸ¥å“åº”ç±»å‹Content-Typeï¼Œå­—èŠ‚æµç±»å‹è°ƒç”¨ä¸‹è½½ç®¡ç†å™¨ï¼Œå¦åˆ™é€šçŸ¥æµè§ˆå™¨è¿›ç¨‹å‡†å¤‡æ¸²æŸ“è¿›ç¨‹å‡†å¤‡è¿›è¡Œæ¸²æŸ“</li><li>æ–­å¼€é“¾æ¥ å››æ¬¡æŒ¥æ‰‹</li></ul><h3 id="æµè§ˆå™¨æ¸²æŸ“"><a href="#æµè§ˆå™¨æ¸²æŸ“" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“"></a>æµè§ˆå™¨æ¸²æŸ“</h3><ul><li>è·å–HTMLåŸå§‹å­—èŠ‚ï¼Œæ ¹æ®æ–‡ä»¶æŒ‡å®šç¼–ç ï¼ˆUTF-8ï¼‰è¿›è¡Œè½¬æ¢</li><li>è¯æ³•åˆ†æ</li><li>æ„å»ºDOM   <ul><li>DOMæ ‘è·ŸCSSOMåˆæˆç”Ÿæˆæ¸²æŸ“æ ‘</li><li>æ¸²æŸ“æ ‘åªåŒ…å«æ¸²æŸ“ç½‘é¡µæ‰€éœ€çš„èŠ‚ç‚¹</li><li>å¸ƒå±€è®¡ç®—æ¯ä¸ªå¯¹è±¡çš„ä½ç½®è·Ÿå¤§å°</li><li>ç»˜åˆ¶ï¼Œå°†æ¸²æŸ“æ ‘æ¸²æŸ“åˆ°å±å¹•ä¸Š</li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
